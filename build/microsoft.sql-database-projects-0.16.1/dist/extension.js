/*! For license information please see extension.js.LICENSE.txt */
(()=>{var e={5318:e=>{e.exports=function(e){return e&&e.__esModule?e:{default:e}}},7437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4398),o={};try{const e=r(3331);o["common.adsversion"]=null==e?void 0:e.version}catch(e){}class i{constructor(e,t,r,n){this.reporter=e,this.eventName=t,this.properties=r,this.measurements=n,this.properties=r||{},Object.assign(this.properties,o),this.measurements=n||{}}send(){try{this.reporter.sendTelemetryEvent(this.eventName,this.properties,this.measurements)}catch(e){const t=e instanceof Error?e.message:e;console.error(`Error sending ${this.eventName} event ${t}`)}}withAdditionalProperties(e){return Object.assign(this.properties,e),this}withAdditionalMeasurements(e){return Object.assign(this.measurements,e),this}withConnectionInfo(e){return Object.assign(this.properties,{authenticationType:e.authenticationType,providerName:e.providerName,serverType:e.serverType,engineType:e.engineType}),this}}t.default=class{constructor(e,t,r){this._telemetryReporter=new n.default(e,t,r)}createViewEvent(e){return new i(this._telemetryReporter,"view",{view:e})}sendViewEvent(e){this.createViewEvent(e).send()}createActionEvent(e,t,r="",n="",o){const a=o?{durationInMs:o}:{};return new i(this._telemetryReporter,"action",{view:e,action:t,target:r,source:n},a)}sendActionEvent(e,t,r="",n="",o){this.createActionEvent(e,t,r,n,o).send()}createMetricsEvent(e,t=""){return new i(this._telemetryReporter,"metrics",{groupName:t},e)}sendMetricsEvent(e,t=""){this.createMetricsEvent(e,t).send()}createErrorEvent(e,t,r="",n=""){return new i(this._telemetryReporter,"error",{view:e,name:t,errorCode:r,errorType:n})}sendErrorEvent(e,t,r="",n=""){this.createErrorEvent(e,t,r,n).send()}createTelemetryEvent(e,t,r){return new i(this._telemetryReporter,e,t,r)}sendTelemetryEvent(e,t,r){this.createTelemetryEvent(e,t,r).send()}dispose(){return this._telemetryReporter.dispose()}}},8185:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5747);t.FILE_SYSTEM_ADAPTER={lstat:n.lstat,stat:n.stat,lstatSync:n.lstatSync,statSync:n.statSync,readdir:n.readdir,readdirSync:n.readdirSync},t.createFileSystemAdapter=function(e){return void 0===e?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),e)}},1107:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=process.versions.node.split("."),n=parseInt(r[0],10),o=parseInt(r[1],10),i=n>10,a=10===n&&o>=10;t.IS_SUPPORT_READDIR_WITH_FILE_TYPES=i||a},5923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(1411),o=r(3953),i=r(6913);function a(e={}){return e instanceof i.default?e:new i.default(e)}t.Settings=i.default,t.scandir=function(e,t,r){if("function"==typeof t)return n.read(e,a(),t);n.read(e,a(t),r)},t.scandirSync=function(e,t){const r=a(t);return o.read(e,r)}},1411:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6203),o=r(4595),i=r(1107),a=r(6582);function s(e,t,r){t.fs.readdir(e,{withFileTypes:!0},((n,i)=>{if(null!==n)return l(r,n);const s=i.map((r=>({dirent:r,name:r.name,path:`${e}${t.pathSegmentSeparator}${r.name}`})));if(!t.followSymbolicLinks)return u(r,s);const c=s.map((e=>function(e,t){return r=>{if(!e.dirent.isSymbolicLink())return r(null,e);t.fs.stat(e.path,((n,o)=>null!==n?t.throwErrorOnBrokenSymbolicLink?r(n):r(null,e):(e.dirent=a.fs.createDirentFromStats(e.name,o),r(null,e))))}}(e,t)));o(c,((e,t)=>{if(null!==e)return l(r,e);u(r,t)}))}))}function c(e,t,r){t.fs.readdir(e,((i,s)=>{if(null!==i)return l(r,i);const c=s.map((r=>`${e}${t.pathSegmentSeparator}${r}`)),p=c.map((e=>r=>n.stat(e,t.fsStatSettings,r)));o(p,((e,n)=>{if(null!==e)return l(r,e);const o=[];s.forEach(((e,r)=>{const i=n[r],s={name:e,path:c[r],dirent:a.fs.createDirentFromStats(e,i)};t.stats&&(s.stats=i),o.push(s)})),u(r,o)}))}))}function l(e,t){e(t)}function u(e,t){e(null,t)}t.read=function(e,t,r){return!t.stats&&i.IS_SUPPORT_READDIR_WITH_FILE_TYPES?s(e,t,r):c(e,t,r)},t.readdirWithFileTypes=s,t.readdir=c},3953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6203),o=r(1107),i=r(6582);function a(e,t){return t.fs.readdirSync(e,{withFileTypes:!0}).map((r=>{const n={dirent:r,name:r.name,path:`${e}${t.pathSegmentSeparator}${r.name}`};if(n.dirent.isSymbolicLink()&&t.followSymbolicLinks)try{const e=t.fs.statSync(n.path);n.dirent=i.fs.createDirentFromStats(n.name,e)}catch(e){if(t.throwErrorOnBrokenSymbolicLink)throw e}return n}))}function s(e,t){return t.fs.readdirSync(e).map((r=>{const o=`${e}${t.pathSegmentSeparator}${r}`,a=n.statSync(o,t.fsStatSettings),s={name:r,path:o,dirent:i.fs.createDirentFromStats(r,a)};return t.stats&&(s.stats=a),s}))}t.read=function(e,t){return!t.stats&&o.IS_SUPPORT_READDIR_WITH_FILE_TYPES?a(e,t):s(e,t)},t.readdirWithFileTypes=a,t.readdir=s},6913:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5622),o=r(6203),i=r(8185);t.default=class{constructor(e={}){this._options=e,this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!1),this.fs=i.createFileSystemAdapter(this._options.fs),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,n.sep),this.stats=this._getValue(this._options.stats,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0),this.fsStatSettings=new o.Settings({followSymbolicLink:this.followSymbolicLinks,fs:this.fs,throwErrorOnBrokenSymbolicLink:this.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return void 0===e?t:e}}},322:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}}t.createDirentFromStats=function(e,t){return new r(e,t)}},6582:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(322);t.fs=n},8980:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5747);t.FILE_SYSTEM_ADAPTER={lstat:n.lstat,stat:n.stat,lstatSync:n.lstatSync,statSync:n.statSync},t.createFileSystemAdapter=function(e){return void 0===e?t.FILE_SYSTEM_ADAPTER:Object.assign(Object.assign({},t.FILE_SYSTEM_ADAPTER),e)}},6203:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2654),o=r(8946),i=r(8328);function a(e={}){return e instanceof i.default?e:new i.default(e)}t.Settings=i.default,t.stat=function(e,t,r){if("function"==typeof t)return n.read(e,a(),t);n.read(e,a(t),r)},t.statSync=function(e,t){const r=a(t);return o.read(e,r)}},2654:(e,t)=>{"use strict";function r(e,t){e(t)}function n(e,t){e(null,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.read=function(e,t,o){t.fs.lstat(e,((i,a)=>null!==i?r(o,i):a.isSymbolicLink()&&t.followSymbolicLink?void t.fs.stat(e,((e,i)=>{if(null!==e)return t.throwErrorOnBrokenSymbolicLink?r(o,e):n(o,a);t.markSymbolicLink&&(i.isSymbolicLink=()=>!0),n(o,i)})):n(o,a)))}},8946:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.read=function(e,t){const r=t.fs.lstatSync(e);if(!r.isSymbolicLink()||!t.followSymbolicLink)return r;try{const r=t.fs.statSync(e);return t.markSymbolicLink&&(r.isSymbolicLink=()=>!0),r}catch(e){if(!t.throwErrorOnBrokenSymbolicLink)return r;throw e}}},8328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8980);t.default=class{constructor(e={}){this._options=e,this.followSymbolicLink=this._getValue(this._options.followSymbolicLink,!0),this.fs=n.createFileSystemAdapter(this._options.fs),this.markSymbolicLink=this._getValue(this._options.markSymbolicLink,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!0)}_getValue(e,t){return void 0===e?t:e}}},5439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9346),o=r(215),i=r(4078),a=r(8690);function s(e={}){return e instanceof a.default?e:new a.default(e)}t.Settings=a.default,t.walk=function(e,t,r){if("function"==typeof t)return new n.default(e,s()).read(t);new n.default(e,s(t)).read(r)},t.walkSync=function(e,t){const r=s(t);return new i.default(e,r).read()},t.walkStream=function(e,t){const r=s(t);return new o.default(e,r).read()}},9346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4714);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new n.default(this._root,this._settings),this._storage=new Set}read(e){this._reader.onError((t=>{!function(e,t){e(t)}(e,t)})),this._reader.onEntry((e=>{this._storage.add(e)})),this._reader.onEnd((()=>{!function(e,t){e(null,t)}(e,[...this._storage])})),this._reader.read()}}},215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2413),o=r(4714);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new o.default(this._root,this._settings),this._stream=new n.Readable({objectMode:!0,read:()=>{},destroy:this._reader.destroy.bind(this._reader)})}read(){return this._reader.onError((e=>{this._stream.emit("error",e)})),this._reader.onEntry((e=>{this._stream.push(e)})),this._reader.onEnd((()=>{this._stream.push(null)})),this._reader.read(),this._stream}}},4078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9555);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._reader=new n.default(this._root,this._settings)}read(){return this._reader.read()}}},4714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(8614),o=r(5923),i=r(373),a=r(6865),s=r(5274);class c extends s.default{constructor(e,t){super(e,t),this._settings=t,this._scandir=o.scandir,this._emitter=new n.EventEmitter,this._queue=i(this._worker.bind(this),this._settings.concurrency),this._isFatalError=!1,this._isDestroyed=!1,this._queue.drain=()=>{this._isFatalError||this._emitter.emit("end")}}read(){return this._isFatalError=!1,this._isDestroyed=!1,setImmediate((()=>{this._pushToQueue(this._root,this._settings.basePath)})),this._emitter}destroy(){if(this._isDestroyed)throw new Error("The reader is already destroyed");this._isDestroyed=!0,this._queue.killAndDrain()}onEntry(e){this._emitter.on("entry",e)}onError(e){this._emitter.once("error",e)}onEnd(e){this._emitter.once("end",e)}_pushToQueue(e,t){const r={directory:e,base:t};this._queue.push(r,(e=>{null!==e&&this._handleError(e)}))}_worker(e,t){this._scandir(e.directory,this._settings.fsScandirSettings,((r,n)=>{if(null!==r)return t(r,void 0);for(const t of n)this._handleEntry(t,e.base);t(null,void 0)}))}_handleError(e){a.isFatalError(this._settings,e)&&(this._isFatalError=!0,this._isDestroyed=!0,this._emitter.emit("error",e))}_handleEntry(e,t){if(this._isDestroyed||this._isFatalError)return;const r=e.path;void 0!==t&&(e.path=a.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),a.isAppliedFilter(this._settings.entryFilter,e)&&this._emitEntry(e),e.dirent.isDirectory()&&a.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(r,e.path)}_emitEntry(e){this._emitter.emit("entry",e)}}t.default=c},6865:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFatalError=function(e,t){return null===e.errorFilter||!e.errorFilter(t)},t.isAppliedFilter=function(e,t){return null===e||e(t)},t.replacePathSegmentSeparator=function(e,t){return e.split(/[\\/]/).join(t)},t.joinPathSegments=function(e,t,r){return""===e?t:e+r+t}},5274:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6865);t.default=class{constructor(e,t){this._root=e,this._settings=t,this._root=n.replacePathSegmentSeparator(e,t.pathSegmentSeparator)}}},9555:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5923),o=r(6865),i=r(5274);class a extends i.default{constructor(){super(...arguments),this._scandir=n.scandirSync,this._storage=new Set,this._queue=new Set}read(){return this._pushToQueue(this._root,this._settings.basePath),this._handleQueue(),[...this._storage]}_pushToQueue(e,t){this._queue.add({directory:e,base:t})}_handleQueue(){for(const e of this._queue.values())this._handleDirectory(e.directory,e.base)}_handleDirectory(e,t){try{const r=this._scandir(e,this._settings.fsScandirSettings);for(const e of r)this._handleEntry(e,t)}catch(e){this._handleError(e)}}_handleError(e){if(o.isFatalError(this._settings,e))throw e}_handleEntry(e,t){const r=e.path;void 0!==t&&(e.path=o.joinPathSegments(t,e.name,this._settings.pathSegmentSeparator)),o.isAppliedFilter(this._settings.entryFilter,e)&&this._pushToStorage(e),e.dirent.isDirectory()&&o.isAppliedFilter(this._settings.deepFilter,e)&&this._pushToQueue(r,e.path)}_pushToStorage(e){this._storage.add(e)}}t.default=a},8690:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5622),o=r(5923);t.default=class{constructor(e={}){this._options=e,this.basePath=this._getValue(this._options.basePath,void 0),this.concurrency=this._getValue(this._options.concurrency,1/0),this.deepFilter=this._getValue(this._options.deepFilter,null),this.entryFilter=this._getValue(this._options.entryFilter,null),this.errorFilter=this._getValue(this._options.errorFilter,null),this.pathSegmentSeparator=this._getValue(this._options.pathSegmentSeparator,n.sep),this.fsScandirSettings=new o.Settings({followSymbolicLinks:this._options.followSymbolicLinks,fs:this._options.fs,pathSegmentSeparator:this._options.pathSegmentSeparator,stats:this._options.stats,throwErrorOnBrokenSymbolicLink:this._options.throwErrorOnBrokenSymbolicLink})}_getValue(e,t){return void 0===e?t:e}}},6281:(e,t,r)=>{"use strict";var n=r(7396),o=function(){function e(t){if(e.INSTANCE)throw new Error("Console logging adapter tracking should be configured from the applicationInsights object");this._client=t,e.INSTANCE=this}return e.prototype.enable=function(e,t){n.IsInitialized&&(r(4309).wp(e&&t,this._client),r(5823).wp(e,this._client),r(454).wp(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1,!1)},e._methodNames=["debug","info","log","warn","error"],e}();e.exports=o},894:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5282),o=r(7396),i=function(){function e(){}return e.getCurrentContext=function(){if(!e.enabled)return null;var t=e.session.get(e.CONTEXT_NAME);return void 0===t?null:t},e.generateContextObject=function(e,t,r,n,o,i){return t=t||e,this.enabled?{operation:{name:r,id:e,parentId:t,traceparent:o,tracestate:i},customProperties:new a(n)}:null},e.runWithContext=function(t,r){return e.enabled?e.session.bind(r,((n={})[e.CONTEXT_NAME]=t,n))():r();var n},e.wrapEmitter=function(t){e.enabled&&e.session.bindEmitter(t)},e.wrapCallback=function(t){return e.enabled?e.session.bind(t):t},e.enable=function(t){this.enabled||(this.isNodeVersionCompatible()?(e.hasEverEnabled||(this.forceClsHooked=t,this.hasEverEnabled=!0,void 0===this.cls&&(!0===e.forceClsHooked||void 0===e.forceClsHooked&&e.shouldUseClsHooked()?this.cls=r(9562):this.cls=r(3057)),e.session=this.cls.createNamespace("AI-CLS-Session"),o.registerContextPreservation((function(t){return e.session.bind(t)}))),this.enabled=!0):this.enabled=!1)},e.disable=function(){this.enabled=!1},e.reset=function(){e.hasEverEnabled&&(e.session=null,e.session=this.cls.createNamespace("AI-CLS-Session"))},e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>3||parseInt(e[0])>2&&parseInt(e[1])>2},e.shouldUseClsHooked=function(){var e=process.versions.node.split(".");return parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=2},e.canUseClsHooked=function(){var e=process.versions.node.split("."),t=parseInt(e[0])>8||parseInt(e[0])>=8&&parseInt(e[1])>=0,r=parseInt(e[0])<8||parseInt(e[0])<=8&&parseInt(e[1])<2,n=parseInt(e[0])>4||parseInt(e[0])>=4&&parseInt(e[1])>=7;return!(t&&r)&&n},e.enabled=!1,e.hasEverEnabled=!1,e.forceClsHooked=void 0,e.CONTEXT_NAME="ApplicationInsights-Context",e}();t.CorrelationContextManager=i;var a=function(){function e(e){this.props=[],this.addHeaderData(e)}return e.prototype.addHeaderData=function(e){var t=e?e.split(", "):[];this.props=t.map((function(e){var t=e.split("=");return{key:t[0],value:t[1]}})).concat(this.props)},e.prototype.serializeToHeader=function(){return this.props.map((function(e){return e.key+"="+e.value})).join(", ")},e.prototype.getProperty=function(e){for(var t=0;t<this.props.length;++t){var r=this.props[t];if(r.key===e)return r.value}},e.prototype.setProperty=function(t,r){if(e.bannedCharacters.test(t)||e.bannedCharacters.test(r))n.warn("Correlation context property keys and values must not contain ',' or '='. setProperty was called with key: "+t+" and value: "+r);else{for(var o=0;o<this.props.length;++o){var i=this.props[o];if(i.key===t)return void(i.value=r)}this.props.push({key:t,value:r})}},e.bannedCharacters=/[,=]/,e}()},6639:e=>{"use strict";var t=function(){function e(t){if(e.INSTANCE)throw new Error("Exception tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t;var r=process.versions.node.split(".");e._canUseUncaughtExceptionMonitor=parseInt(r[0])>13||13===parseInt(r[0])&&parseInt(r[1])>=7}return e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.enable=function(t){var r=this;if(t){if(this._isInitialized=!0,!this._exceptionListenerHandle){var n=function(t,n,o){void 0===o&&(o=new Error(e._FALLBACK_ERROR_MESSAGE)),r._client.trackException({exception:o}),r._client.flush({isAppCrashing:!0}),t&&n&&1===process.listeners(n).length&&(console.error(o),process.exit(1))};e._canUseUncaughtExceptionMonitor?(this._exceptionListenerHandle=n.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle)):(this._exceptionListenerHandle=n.bind(this,!0,e.UNCAUGHT_EXCEPTION_HANDLER_NAME),this._rejectionListenerHandle=n.bind(this,!1),process.on(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.on(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle))}}else this._exceptionListenerHandle&&(e._canUseUncaughtExceptionMonitor?process.removeListener(e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME,this._exceptionListenerHandle):(process.removeListener(e.UNCAUGHT_EXCEPTION_HANDLER_NAME,this._exceptionListenerHandle),process.removeListener(e.UNHANDLED_REJECTION_HANDLER_NAME,this._rejectionListenerHandle)),this._exceptionListenerHandle=void 0,this._rejectionListenerHandle=void 0,delete this._exceptionListenerHandle,delete this._rejectionListenerHandle)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.INSTANCE=null,e.UNCAUGHT_EXCEPTION_MONITOR_HANDLER_NAME="uncaughtExceptionMonitor",e.UNCAUGHT_EXCEPTION_HANDLER_NAME="uncaughtException",e.UNHANDLED_REJECTION_HANDLER_NAME="unhandledRejection",e._RETHROW_EXIT_MESSAGE="Application Insights Rethrow Exception Handler",e._FALLBACK_ERROR_MESSAGE="A promise was rejected without providing an error. Application Insights generated this error stack for you.",e._canUseUncaughtExceptionMonitor=!1,e}();e.exports=t},8723:(e,t,r)=>{"use strict";var n=r(8605),o=r(7211),i=r(5282),a=r(5740),s=r(9036),c=r(8339),l=r(894),u=r(9962),p=r(8090),d=r(7396),h=function(){function e(t){if(e.INSTANCE)throw new Error("Client request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,this._isEnabled&&!this._isInitialized&&this._initialize(),d.IsInitialized&&(r(7886).wp(e,this._client),r(4777).wp(e,this._client),r(5071).wp(e,this._client),r(1227).wp(e,this._client))},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype._initialize=function(){var t=this;this._isInitialized=!0,n.get;var r=n.request,i=o.request,a=function(r,n){var o=!n[e.disableCollectionRequestOption]&&!r[e.alreadyAutoCollectedFlag];r[e.alreadyAutoCollectedFlag]=!0,r&&n&&o&&(l.CorrelationContextManager.wrapEmitter(r),e.trackRequest(t._client,{options:n,request:r}))};n.request=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var i=r.call.apply(r,[n,e].concat(t));return a(i,e),i},o.request=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=i.call.apply(i,[o,e].concat(t));return a(n,e),n},n.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var o,i=(o=n.request).call.apply(o,[n,e].concat(t));return i.end(),i},o.get=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,i=(n=o.request).call.apply(n,[o,e].concat(t));return i.end(),i}},e.trackRequest=function(t,r){if(r.options&&r.request&&t){var n,o,d=new c(r.options,r.request),h=l.CorrelationContextManager.getCurrentContext();if(h&&h.operation&&h.operation.traceparent&&p.isValidTraceId(h.operation.traceparent.traceId)?(h.operation.traceparent.updateSpanId(),n=h.operation.traceparent.getBackCompatRequestId()):u.w3cEnabled?(o=(f=new p).toString(),n=f.getBackCompatRequestId()):n=h&&h.operation&&h.operation.parentId+e.requestNumber+++".",a.canIncludeCorrelationHeader(t,d.getUrl())&&r.request.getHeader&&r.request.setHeader&&t.config&&t.config.correlationId){var m=r.request.getHeader(s.requestContextHeader);try{a.safeIncludeCorrelationHeader(t,r.request,m)}catch(e){i.warn("Request-Context header could not be set. Correlation of requests may be lost",e)}if(h&&h.operation)try{if(r.request.setHeader(s.requestIdHeader,n),r.request.setHeader(s.parentIdHeader,h.operation.id),r.request.setHeader(s.rootIdHeader,n),o||h.operation.traceparent)r.request.setHeader(s.traceparentHeader,o||h.operation.traceparent.toString());else if(u.w3cEnabled){var f=(new p).toString();r.request.setHeader(s.traceparentHeader,f)}if(h.operation.tracestate){var g=h.operation.tracestate.toString();g&&r.request.setHeader(s.traceStateHeader,g)}var y=h.customProperties.serializeToHeader();y&&r.request.setHeader(s.correlationContextHeader,y)}catch(e){i.warn("Correlation headers could not be set. Correlation of requests may be lost.",e)}}r.request.on&&(r.request.on("response",(function(e){d.onResponse(e);var o=d.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects["http.ClientResponse"]=e,t.trackDependency(o)})),r.request.on("error",(function(e){d.onError(e);var o=d.getDependencyTelemetry(r,n);o.contextObjects=o.contextObjects||{},o.contextObjects["http.RequestOptions"]=r.options,o.contextObjects["http.ClientRequest"]=r.request,o.contextObjects.Error=e,t.trackDependency(o)})))}else i.info("AutoCollectHttpDependencies.trackRequest was called with invalid parameters: ",!r.options,!r.request,!t)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e.disableCollectionRequestOption="disableAppInsightsAutoCollection",e.requestNumber=1,e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=h},8339:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(8835),a=r(5290),s=r(5740),c=r(9036),l=r(3054),u=r(9962),p=function(e){function t(r,n){var o=e.call(this)||this;return n&&n.method&&r&&(o.method=n.method,o.url=t._getUrlFromRequestOptions(r,n),o.startTime=+new Date),o}return o(t,e),t.prototype.onError=function(e){this._setStatus(void 0,e)},t.prototype.onResponse=function(e){this._setStatus(e.statusCode,void 0),this.correlationId=s.getCorrelationContextTarget(e,c.requestContextTargetKey)},t.prototype.getDependencyTelemetry=function(e,t){var r=i.parse(this.url);r.search=void 0,r.hash=void 0;var n=this.method.toUpperCase()+" "+r.pathname,o=a.RemoteDependencyDataConstants.TYPE_HTTP,s=r.hostname;this.correlationId?(o=a.RemoteDependencyDataConstants.TYPE_AI,this.correlationId!==u.correlationIdPrefix&&(s=r.hostname+" | "+this.correlationId)):o=a.RemoteDependencyDataConstants.TYPE_HTTP,r.port&&(s+=":"+r.port);var c={id:t,name:n,data:this.url,duration:this.duration,success:this._isSuccess(),resultCode:this.statusCode?this.statusCode.toString():null,properties:this.properties||{},dependencyTypeName:o,target:s};if(e){for(var l in e)c[l]||(c[l]=e[l]);if(e.properties)for(var l in e.properties)c.properties[l]=e.properties[l]}return c},t._getUrlFromRequestOptions=function(e,t){if("string"==typeof e)e=i.parse(e);else{var r=e;e={},r&&Object.keys(r).forEach((function(t){e[t]=r[t]}))}if(e.path){var n=i.parse(e.path);e.pathname=n.pathname,e.search=n.search}return e.host&&e.port&&!i.parse("http://"+e.host).port&&e.port&&(e.hostname=e.host,delete e.host),e.protocol=e.protocol||t.agent&&t.agent.protocol||void 0,e.hostname=e.hostname||"localhost",i.format(e)},t}(l);e.exports=p},6694:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(8835),a=r(5290),s=r(5740),c=r(9036),l=r(3054),u=r(9962),p=r(6333),d=r(8090),h=function(e){function t(t,r){var n=e.call(this)||this;return t&&(n.method=t.method,n.url=n._getAbsoluteUrl(t),n.startTime=+new Date,n.socketRemoteAddress=t.socket&&t.socket.remoteAddress,n.parseHeaders(t,r),t.connection&&(n.connectionRemoteAddress=t.connection.remoteAddress,n.legacySocketRemoteAddress=t.connection.socket&&t.connection.socket.remoteAddress)),n}return o(t,e),t.prototype.onError=function(e,t){this._setStatus(void 0,e),t&&(this.duration=t)},t.prototype.onResponse=function(e,t){this._setStatus(e.statusCode,void 0),t&&(this.duration=t)},t.prototype.getRequestTelemetry=function(e){var t={id:this.requestId,name:this.method+" "+i.parse(this.url).pathname,url:this.url,source:this.sourceCorrelationId,duration:this.duration,resultCode:this.statusCode?this.statusCode.toString():null,success:this._isSuccess(),properties:this.properties};if(e){for(var r in e)t[r]||(t[r]=e[r]);if(e.properties)for(var r in e.properties)t.properties[r]=e.properties[r]}return t},t.prototype.getRequestTags=function(e){var r={};for(var n in e)r[n]=e[n];return r[t.keys.locationIp]=e[t.keys.locationIp]||this._getIp(),r[t.keys.sessionId]=e[t.keys.sessionId]||this._getId("ai_session"),r[t.keys.userId]=e[t.keys.userId]||this._getId("ai_user"),r[t.keys.userAuthUserId]=e[t.keys.userAuthUserId]||this._getId("ai_authUser"),r[t.keys.operationName]=this.getOperationName(e),r[t.keys.operationParentId]=this.getOperationParentId(e),r[t.keys.operationId]=this.getOperationId(e),r},t.prototype.getOperationId=function(e){return e[t.keys.operationId]||this.operationId},t.prototype.getOperationParentId=function(e){return e[t.keys.operationParentId]||this.parentId||this.getOperationId(e)},t.prototype.getOperationName=function(e){return e[t.keys.operationName]||this.method+" "+i.parse(this.url).pathname},t.prototype.getRequestId=function(){return this.requestId},t.prototype.getCorrelationContextHeader=function(){return this.correlationContextHeader},t.prototype.getTraceparent=function(){return this.traceparent},t.prototype.getTracestate=function(){return this.tracestate},t.prototype.getLegacyRootId=function(){return this.legacyRootId},t.prototype._getAbsoluteUrl=function(e){if(!e.headers)return e.url;var t=e.connection?e.connection.encrypted:null,r=i.parse(e.url),n=r.pathname,o=r.search;return i.format({protocol:t?"https":"http",host:e.headers.host,pathname:n,search:o})},t.prototype._getIp=function(){var e=/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,t=function(t){var r=e.exec(t);if(r)return r[0]},r=t(this.rawHeaders["x-forwarded-for"])||t(this.rawHeaders["x-client-ip"])||t(this.rawHeaders["x-real-ip"])||t(this.connectionRemoteAddress)||t(this.socketRemoteAddress)||t(this.legacySocketRemoteAddress);return!r&&this.connectionRemoteAddress&&this.connectionRemoteAddress.substr&&"::"===this.connectionRemoteAddress.substr(0,2)&&(r="127.0.0.1"),r},t.prototype._getId=function(e){var r=this.rawHeaders&&this.rawHeaders.cookie&&"string"==typeof this.rawHeaders.cookie&&this.rawHeaders.cookie||"";return t.parseId(s.getCookie(e,r))},t.prototype.setBackCompatFromThisTraceContext=function(){this.operationId=this.traceparent.traceId,this.traceparent.legacyRootId&&(this.legacyRootId=this.traceparent.legacyRootId),this.parentId=this.traceparent.parentId,this.traceparent.updateSpanId(),this.requestId=this.traceparent.getBackCompatRequestId()},t.prototype.parseHeaders=function(e,t){if(this.rawHeaders=e.headers||e.rawHeaders,this.userAgent=e.headers&&e.headers["user-agent"],this.sourceCorrelationId=s.getCorrelationContextTarget(e,c.requestContextSourceKey),e.headers){var r=e.headers[c.traceStateHeader],n=e.headers[c.traceparentHeader],o=e.headers[c.requestIdHeader],i=e.headers[c.parentIdHeader],a=e.headers[c.rootIdHeader];this.correlationContextHeader=e.headers[c.correlationContextHeader],u.w3cEnabled&&(n||r)?(this.traceparent=new d(n),this.tracestate=n&&r&&new p(r),this.setBackCompatFromThisTraceContext()):o?u.w3cEnabled?(this.traceparent=new d(null,o),this.setBackCompatFromThisTraceContext()):(this.parentId=o,this.requestId=u.generateRequestId(this.parentId),this.operationId=u.getRootId(this.requestId)):u.w3cEnabled?(this.traceparent=new d,this.traceparent.parentId=i,this.traceparent.legacyRootId=a||i,this.setBackCompatFromThisTraceContext()):(this.parentId=i,this.requestId=u.generateRequestId(a||this.parentId),this.correlationContextHeader=null,this.operationId=u.getRootId(this.requestId)),t&&(this.requestId=t,this.operationId=u.getRootId(this.requestId))}},t.parseId=function(e){var t=e.split("|");return t.length>0?t[0]:""},t.keys=new a.ContextTagKeys,t}(l);e.exports=h},731:(e,t,r)=>{"use strict";var n=r(8605),o=r(7211),i=r(5282),a=r(5740),s=r(9036),c=r(6694),l=r(894),u=r(4350),p=function(){function e(t){if(e.INSTANCE)throw new Error("Server request tracking should be configured from the applicationInsights object");e.INSTANCE=this,this._client=t}return e.prototype.enable=function(e){this._isEnabled=e,(this._isAutoCorrelating||this._isEnabled||u.isEnabled())&&!this._isInitialized&&(this.useAutoCorrelation(this._isAutoCorrelating),this._initialize())},e.prototype.useAutoCorrelation=function(e,t){e&&!this._isAutoCorrelating?l.CorrelationContextManager.enable(t):!e&&this._isAutoCorrelating&&l.CorrelationContextManager.disable(),this._isAutoCorrelating=e},e.prototype.isInitialized=function(){return this._isInitialized},e.prototype.isAutoCorrelating=function(){return this._isAutoCorrelating},e.prototype._generateCorrelationContext=function(e){if(this._isAutoCorrelating)return l.CorrelationContextManager.generateContextObject(e.getOperationId(this._client.context.tags),e.getRequestId(),e.getOperationName(this._client.context.tags),e.getCorrelationContextHeader(),e.getTraceparent(),e.getTracestate())},e.prototype._initialize=function(){var t=this;this._isInitialized=!0;var r=function(r){if(r){if("function"!=typeof r)throw new Error("onRequest handler must be a function");return function(n,o){l.CorrelationContextManager.wrapEmitter(n),l.CorrelationContextManager.wrapEmitter(o);var i=n&&!n[e.alreadyAutoCollectedFlag];if(n&&i){var a=new c(n),s=t._generateCorrelationContext(a);l.CorrelationContextManager.runWithContext(s,(function(){t._isEnabled&&(n[e.alreadyAutoCollectedFlag]=!0,e.trackRequest(t._client,{request:n,response:o},a)),"function"==typeof r&&r(n,o)}))}else"function"==typeof r&&r(n,o)}}},i=function(e){var t=e.addListener.bind(e);e.addListener=function(e,n){switch(e){case"request":case"checkContinue":return t(e,r(n));default:return t(e,n)}},e.on=e.addListener},a=n.createServer;n.createServer=function(e){var t=a(r(e));return i(t),t};var s=o.createServer;o.createServer=function(e,t){var n=s(e,r(t));return i(n),n}},e.trackRequestSync=function(t,r){if(r.request&&r.response&&t){e.addResponseCorrelationIdHeader(t,r.response);var n=l.CorrelationContextManager.getCurrentContext(),o=new c(r.request,n&&n.operation.parentId);n&&(n.operation.id=o.getOperationId(t.context.tags)||n.operation.id,n.operation.name=o.getOperationName(t.context.tags)||n.operation.name,n.operation.parentId=o.getRequestId()||n.operation.parentId,n.customProperties.addHeaderData(o.getCorrelationContextHeader())),e.endRequest(t,o,r,r.duration,r.error)}else i.info("AutoCollectHttpRequests.trackRequestSync was called with invalid parameters: ",!r.request,!r.response,!t)},e.trackRequest=function(t,r,n){if(r.request&&r.response&&t){var o=l.CorrelationContextManager.getCurrentContext(),s=n||new c(r.request,o&&o.operation.parentId);a.canIncludeCorrelationHeader(t,s.getUrl())&&e.addResponseCorrelationIdHeader(t,r.response),o&&!n&&(o.operation.id=s.getOperationId(t.context.tags)||o.operation.id,o.operation.name=s.getOperationName(t.context.tags)||o.operation.name,o.operation.parentId=s.getOperationParentId(t.context.tags)||o.operation.parentId,o.customProperties.addHeaderData(s.getCorrelationContextHeader())),r.response.once&&r.response.once("finish",(function(){e.endRequest(t,s,r,null,null)})),r.request.on&&r.request.on("error",(function(n){e.endRequest(t,s,r,null,n)}))}else i.info("AutoCollectHttpRequests.trackRequest was called with invalid parameters: ",!r.request,!r.response,!t)},e.addResponseCorrelationIdHeader=function(e,t){if(e.config&&e.config.correlationId&&t.getHeader&&t.setHeader&&!t.headersSent){var r=t.getHeader(s.requestContextHeader);a.safeIncludeCorrelationHeader(e,t,r)}},e.endRequest=function(e,t,r,n,o){o?t.onError(o,n):t.onResponse(r.response,n);var i=t.getRequestTelemetry(r);if(i.tagOverrides=t.getRequestTags(e.context.tags),r.tagOverrides)for(var a in r.tagOverrides)i.tagOverrides[a]=r.tagOverrides[a];var s=t.getLegacyRootId();s&&(i.properties.ai_legacyRootId=s),i.contextObjects=i.contextObjects||{},i.contextObjects["http.ServerRequest"]=r.request,i.contextObjects["http.ServerResponse"]=r.response,e.trackRequest(i)},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1,l.CorrelationContextManager.disable(),this._isAutoCorrelating=!1},e.alreadyAutoCollectedFlag="_appInsightsAutoCollected",e}();e.exports=p},1629:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(9253),i=r(4470),a=r(5282),s=function(){function e(t){this._disabledMetrics={},e.INSTANCE&&e.INSTANCE.dispose(),e.INSTANCE=this,this._client=t}return e.isNodeVersionCompatible=function(){var e=process.versions.node.split(".");return parseInt(e[0])>=6},e.prototype.enable=function(t,n,o){var i=this;if(void 0===n&&(n={}),void 0===o&&(o=6e4),e.isNodeVersionCompatible()){if(null==e._metricsAvailable&&t&&!this._isInitialized)try{var s=r(6591);e._emitter=new s,e._metricsAvailable=!0,a.info("Native metrics module successfully loaded!")}catch(t){return void(e._metricsAvailable=!1)}this._isEnabled=t,this._disabledMetrics=n,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),this._isEnabled&&e._emitter?(e._emitter.enable(!0,o),this._handle=setInterval((function(){return i._trackNativeMetrics()}),o),this._handle.unref()):e._emitter&&(e._emitter.enable(!1),this._handle&&(clearInterval(this._handle),this._handle=void 0))}},e.prototype.dispose=function(){this.enable(!1)},e.parseEnabled=function(e){var t=process.env[o.ENV_nativeMetricsDisableAll],r=process.env[o.ENV_nativeMetricsDisablers];if(t)return{isEnabled:!1,disabledMetrics:{}};if(r){var i=r.split(","),a={};if(i.length>0)for(var s=0,c=i;s<c.length;s++)a[c[s]]=!0;return"object"==typeof e?{isEnabled:!0,disabledMetrics:n({},e,a)}:{isEnabled:e,disabledMetrics:a}}return"boolean"==typeof e?{isEnabled:e,disabledMetrics:{}}:{isEnabled:!0,disabledMetrics:e}},e.prototype._trackNativeMetrics=function(){var e=!0;"object"!=typeof this._isEnabled&&(e=this._isEnabled),e&&(this._trackGarbageCollection(),this._trackEventLoop(),this._trackHeapUsage())},e.prototype._trackGarbageCollection=function(){if(!this._disabledMetrics.gc){var t,r=e._emitter.getGCData();for(var n in r){var o=r[n].metrics,a=n+" Garbage Collection Duration",s=Math.sqrt(o.sumSquares/o.count-Math.pow(o.total/o.count,2))||0;this._client.trackMetric({name:a,value:o.total,count:o.count,max:o.max,min:o.min,stdDev:s,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)})}}},e.prototype._trackEventLoop=function(){if(!this._disabledMetrics.loop){var t=e._emitter.getLoopData().loopUsage;if(0!=t.count){var r,n=Math.sqrt(t.sumSquares/t.count-Math.pow(t.total/t.count,2))||0;this._client.trackMetric({name:"Event Loop CPU Time",value:t.total,count:t.count,min:t.min,max:t.max,stdDev:n,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,r)})}}},e.prototype._trackHeapUsage=function(){if(!this._disabledMetrics.heap){var e,t,r,n=process.memoryUsage(),o=n.heapUsed,a=n.heapTotal,s=n.rss;this._client.trackMetric({name:"Memory Usage (Heap)",value:o,count:1,tagOverrides:(e={},e[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,e)}),this._client.trackMetric({name:"Memory Total (Heap)",value:a,count:1,tagOverrides:(t={},t[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,t)}),this._client.trackMetric({name:"Memory Usage (Non-Heap)",value:s-a,count:1,tagOverrides:(r={},r[this._client.context.keys.internalSdkVersion]="node-nativeperf:"+i.sdkVersion,r)})}},e}();t.AutoCollectNativePerformance=s},4350:(e,t,r)=>{"use strict";var n=r(2087),o=r(3580),i=function(){function e(t,r,n){void 0===r&&(r=6e4),void 0===n&&(n=!1),this._lastIntervalRequestExecutionTime=0,this._lastIntervalDependencyExecutionTime=0,e.INSTANCE||(e.INSTANCE=this),this._isInitialized=!1,this._client=t,this._collectionInterval=r,this._enableLiveMetricsCounters=n}return e.prototype.enable=function(t,r){var o=this;this._isEnabled=t,this._isEnabled&&!this._isInitialized&&(this._isInitialized=!0),t?this._handle||(this._lastCpus=n.cpus(),this._lastRequests={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},this._lastDependencies={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},this._lastExceptions={totalExceptionCount:e._totalExceptionCount,time:+new Date},"function"==typeof process.cpuUsage&&(this._lastAppCpuUsage=process.cpuUsage()),this._lastHrtime=process.hrtime(),this._collectionInterval=r||this._collectionInterval,this._handle=setInterval((function(){return o.trackPerformance()}),this._collectionInterval),this._handle.unref()):this._handle&&(clearInterval(this._handle),this._handle=void 0)},e.countRequest=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalRequestExecutionTime+=n,!1===r&&e._totalFailedRequestCount++,e._totalRequestCount++}},e.countException=function(){e._totalExceptionCount++},e.countDependency=function(t,r){var n;if(e.isEnabled()){if("string"==typeof t)n=+new Date("1970-01-01T"+t+"Z");else{if("number"!=typeof t)return;n=t}e._intervalDependencyExecutionTime+=n,!1===r&&e._totalFailedDependencyCount++,e._totalDependencyCount++}},e.prototype.isInitialized=function(){return this._isInitialized},e.isEnabled=function(){return e.INSTANCE&&e.INSTANCE._isEnabled},e.prototype.trackPerformance=function(){this._trackCpu(),this._trackMemory(),this._trackNetwork(),this._trackDependencyRate(),this._trackExceptionRate()},e.prototype._trackCpu=function(){var e=n.cpus();if(e&&e.length&&this._lastCpus&&e.length===this._lastCpus.length){for(var t=0,r=0,i=0,a=0,s=0,c=0;e&&c<e.length;c++){var l=e[c],u=this._lastCpus[c],p=(l.model,l.speed,l.times),d=u.times;t+=p.user-d.user||0,r+=p.sys-d.sys||0,i+=p.nice-d.nice||0,a+=p.idle-d.idle||0,s+=p.irq-d.irq||0}var h=void 0;if("function"==typeof process.cpuUsage){var m=process.cpuUsage(),f=process.hrtime(),g=m.user-this._lastAppCpuUsage.user+(m.system-this._lastAppCpuUsage.system)||0;void 0!==this._lastHrtime&&2===this._lastHrtime.length&&(h=100*g/((1e6*(f[0]-this._lastHrtime[0])+(f[1]-this._lastHrtime[1])/1e3||0)*e.length)),this._lastAppCpuUsage=m,this._lastHrtime=f}var y=t+r+i+a+s||1;this._client.trackMetric({name:o.PerformanceCounter.PROCESSOR_TIME,value:(y-a)/y*100}),this._client.trackMetric({name:o.PerformanceCounter.PROCESS_TIME,value:h||t/y*100})}this._lastCpus=e},e.prototype._trackMemory=function(){var e=n.freemem(),t=process.memoryUsage().rss,r=n.totalmem()-e;this._client.trackMetric({name:o.PerformanceCounter.PRIVATE_BYTES,value:t}),this._client.trackMetric({name:o.PerformanceCounter.AVAILABLE_BYTES,value:e}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.COMMITTED_BYTES,value:r})},e.prototype._trackNetwork=function(){var t=this._lastRequests,r={totalRequestCount:e._totalRequestCount,totalFailedRequestCount:e._totalFailedRequestCount,time:+new Date},n=r.totalRequestCount-t.totalRequestCount||0,i=r.totalFailedRequestCount-t.totalFailedRequestCount||0,a=r.time-t.time,s=a/1e3,c=(e._intervalRequestExecutionTime-this._lastIntervalRequestExecutionTime)/n||0;if(this._lastIntervalRequestExecutionTime=e._intervalRequestExecutionTime,a>0){var l=n/s,u=i/s;this._client.trackMetric({name:o.PerformanceCounter.REQUEST_RATE,value:l}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.PerformanceCounter.REQUEST_DURATION,value:c}),this._enableLiveMetricsCounters&&this._client.trackMetric({name:o.QuickPulseCounter.REQUEST_FAILURE_RATE,value:u})}this._lastRequests=r},e.prototype._trackDependencyRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastDependencies,r={totalDependencyCount:e._totalDependencyCount,totalFailedDependencyCount:e._totalFailedDependencyCount,time:+new Date},n=r.totalDependencyCount-t.totalDependencyCount||0,i=r.totalFailedDependencyCount-t.totalFailedDependencyCount||0,a=r.time-t.time,s=a/1e3,c=(e._intervalDependencyExecutionTime-this._lastIntervalDependencyExecutionTime)/n||0;if(this._lastIntervalDependencyExecutionTime=e._intervalDependencyExecutionTime,a>0){var l=n/s,u=i/s;this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_RATE,value:l}),this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_FAILURE_RATE,value:u}),(!this._enableLiveMetricsCounters||n>0)&&this._client.trackMetric({name:o.QuickPulseCounter.DEPENDENCY_DURATION,value:c})}this._lastDependencies=r}},e.prototype._trackExceptionRate=function(){if(this._enableLiveMetricsCounters){var t=this._lastExceptions,r={totalExceptionCount:e._totalExceptionCount,time:+new Date},n=r.totalExceptionCount-t.totalExceptionCount||0,i=r.time-t.time;if(i>0){var a=n/(i/1e3);this._client.trackMetric({name:o.QuickPulseCounter.EXCEPTION_RATE,value:a})}this._lastExceptions=r}},e.prototype.dispose=function(){e.INSTANCE=null,this.enable(!1),this._isInitialized=!1},e._totalRequestCount=0,e._totalFailedRequestCount=0,e._lastRequestExecutionTime=0,e._totalDependencyCount=0,e._totalFailedDependencyCount=0,e._lastDependencyExecutionTime=0,e._totalExceptionCount=0,e._intervalDependencyExecutionTime=0,e._intervalRequestExecutionTime=0,e}();e.exports=i},3054:e=>{"use strict";var t=function(){function e(){}return e.prototype.getUrl=function(){return this.url},e.prototype.RequestParser=function(){this.startTime=+new Date},e.prototype._setStatus=function(e,t){var r=+new Date;this.duration=r-this.startTime,this.statusCode=e;var n=this.properties||{};if(t)if("string"==typeof t)n.error=t;else if(t instanceof Error)n.error=t.message;else if("object"==typeof t)for(var o in t)n[o]=t[o]&&t[o].toString&&t[o].toString();this.properties=n},e.prototype._isSuccess=function(){return 0<this.statusCode&&this.statusCode<400},e}();e.exports=t},5823:(e,t,r)=>{"use strict";var n=r(5290),o=r(4953),i=[],a={10:n.SeverityLevel.Verbose,20:n.SeverityLevel.Verbose,30:n.SeverityLevel.Information,40:n.SeverityLevel.Warning,50:n.SeverityLevel.Error,60:n.SeverityLevel.Critical},s=function(e){var t=e.data.result;i.forEach((function(r){var n=a[e.data.level];t instanceof Error?r.trackException({exception:t}):r.trackTrace({message:t,severity:n})}))};t.wp=function(e,t){e?(0===i.length&&o.channel.subscribe("bunyan",s),i.push(t)):0===(i=i.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("bunyan",s)}},4309:(e,t,r)=>{"use strict";var n=r(5290),o=r(4953),i=[],a=function(e){var t=e.data.message;i.forEach((function(r){t instanceof Error?r.trackException({exception:t}):(t.lastIndexOf("\n")==t.length-1&&(t=t.substring(0,t.length-1)),r.trackTrace({message:t,severity:e.data.stderr?n.SeverityLevel.Warning:n.SeverityLevel.Information}))}))};t.wp=function(e,t){e?(0===i.length&&o.channel.subscribe("console",a),i.push(t)):0===(i=i.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("console",a)}},7396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5282);t.IsInitialized=!process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL;var o="DiagnosticChannel";if(t.IsInitialized){var i=r(4106),a=(process.env.APPLICATION_INSIGHTS_NO_PATCH_MODULES||"").split(","),s={bunyan:i.bunyan,console:i.console,mongodb:i.mongodb,mongodbCore:i.mongodbCore,mysql:i.mysql,redis:i.redis,pg:i.pg,pgPool:i.pgPool,winston:i.winston};for(var c in s)-1===a.indexOf(c)&&(s[c].enable(),n.info(o,"Subscribed to "+c+" events"));a.length>0&&n.info(o,"Some modules will not be patched",a)}else n.info(o,"Not subscribing to dependency autocollection because APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL was set");t.registerContextPreservation=function(e){t.IsInitialized&&r(4953).channel.addContextPreservation(e)}},7886:(e,t,r)=>{"use strict";var n=r(4953),o=[];t.qP=function(e){e.data.event.commandName,o.forEach((function(t){var r=e.data.startedData&&e.data.startedData.databaseName||"Unknown database";t.trackDependency({target:r,data:e.data.event.commandName,name:e.data.event.commandName,duration:e.data.event.duration,success:e.data.succeeded,resultCode:e.data.succeeded?"0":"1",dependencyTypeName:"mongodb"})}))},t.wp=function(e,r){e?(0===o.length&&n.channel.subscribe("mongodb",t.qP),o.push(r)):0===(o=o.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("mongodb",t.qP)}},4777:(e,t,r)=>{"use strict";var n=r(4953),o=[];t.qP=function(e){o.forEach((function(t){var r=e.data.query||{},n=r.sql||"Unknown query",o=!e.data.err,i=(r._connection||{}).config||{},a=i.socketPath?i.socketPath:(i.host||"localhost")+":"+i.port;t.trackDependency({target:a,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",dependencyTypeName:"mysql"})}))},t.wp=function(e,r){e?(0===o.length&&n.channel.subscribe("mysql",t.qP),o.push(r)):0===(o=o.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("mysql",t.qP)}},1227:(e,t,r)=>{"use strict";var n=r(4953),o=[];t.qP=function(e){o.forEach((function(t){var r=e.data.query,n=r.preparable&&r.preparable.text||r.plan||r.text||"unknown query",o=!e.data.error,i=e.data.database.host+":"+e.data.database.port;t.trackDependency({target:i,data:n,name:n,duration:e.data.duration,success:o,resultCode:o?"0":"1",dependencyTypeName:"postgres"})}))},t.wp=function(e,r){e?(0===o.length&&n.channel.subscribe("postgres",t.qP),o.push(r)):0===(o=o.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("postgres",t.qP)}},5071:(e,t,r)=>{"use strict";var n=r(4953),o=[];t.qP=function(e){o.forEach((function(t){"info"!==e.data.commandObj.command&&t.trackDependency({target:e.data.address,name:e.data.commandObj.command,data:e.data.commandObj.command,duration:e.data.duration,success:!e.data.err,resultCode:e.data.err?"1":"0",dependencyTypeName:"redis"})}))},t.wp=function(e,r){e?(0===o.length&&n.channel.subscribe("redis",t.qP),o.push(r)):0===(o=o.filter((function(e){return e!=r}))).length&&n.channel.unsubscribe("redis",t.qP)}},454:(e,t,r)=>{"use strict";var n=r(5290),o=r(4953),i=[],a={syslog:function(e){var t={emerg:n.SeverityLevel.Critical,alert:n.SeverityLevel.Critical,crit:n.SeverityLevel.Critical,error:n.SeverityLevel.Error,warning:n.SeverityLevel.Warning,notice:n.SeverityLevel.Information,info:n.SeverityLevel.Information,debug:n.SeverityLevel.Verbose};return void 0===t[e]?n.SeverityLevel.Information:t[e]},npm:function(e){var t={error:n.SeverityLevel.Error,warn:n.SeverityLevel.Warning,info:n.SeverityLevel.Information,verbose:n.SeverityLevel.Verbose,debug:n.SeverityLevel.Verbose,silly:n.SeverityLevel.Verbose};return void 0===t[e]?n.SeverityLevel.Information:t[e]},unknown:function(e){return n.SeverityLevel.Information}},s=function(e){var t=e.data.message;i.forEach((function(r){if(t instanceof Error)r.trackException({exception:t,properties:e.data.meta});else{var n=a[e.data.levelKind](e.data.level);r.trackTrace({message:t,severity:n,properties:e.data.meta})}}))};t.wp=function(e,t){e?(0===i.length&&o.channel.subscribe("winston",s),i.push(t)):0===(i=i.filter((function(e){return e!=t}))).length&&o.channel.unsubscribe("winston",s)}},3580:(e,t)=>{"use strict";var r,n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_BREEZE_ENDPOINT="https://dc.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_ENDPOINT="https://rt.services.visualstudio.com",t.DEFAULT_LIVEMETRICS_HOST="rt.services.visualstudio.com",function(e){e.COMMITTED_BYTES="\\Memory\\Committed Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.REQUEST_RATE="\\ApplicationInsights\\Requests/Sec",e.REQUEST_FAILURE_RATE="\\ApplicationInsights\\Requests Failed/Sec",e.REQUEST_DURATION="\\ApplicationInsights\\Request Duration",e.DEPENDENCY_RATE="\\ApplicationInsights\\Dependency Calls/Sec",e.DEPENDENCY_FAILURE_RATE="\\ApplicationInsights\\Dependency Calls Failed/Sec",e.DEPENDENCY_DURATION="\\ApplicationInsights\\Dependency Call Duration",e.EXCEPTION_RATE="\\ApplicationInsights\\Exceptions/Sec"}(r=t.QuickPulseCounter||(t.QuickPulseCounter={})),function(e){e.PRIVATE_BYTES="\\Process(??APP_WIN32_PROC??)\\Private Bytes",e.AVAILABLE_BYTES="\\Memory\\Available Bytes",e.PROCESSOR_TIME="\\Processor(_Total)\\% Processor Time",e.PROCESS_TIME="\\Process(??APP_WIN32_PROC??)\\% Processor Time",e.REQUEST_RATE="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Requests/Sec",e.REQUEST_DURATION="\\ASP.NET Applications(??APP_W3SVC_PROC??)\\Request Execution Time"}(n=t.PerformanceCounter||(t.PerformanceCounter={})),t.PerformanceToQuickPulseCounter=((o={})[n.PROCESSOR_TIME]=r.PROCESSOR_TIME,o[n.REQUEST_RATE]=r.REQUEST_RATE,o[n.REQUEST_DURATION]=r.REQUEST_DURATION,o[r.COMMITTED_BYTES]=r.COMMITTED_BYTES,o[r.REQUEST_FAILURE_RATE]=r.REQUEST_FAILURE_RATE,o[r.DEPENDENCY_RATE]=r.DEPENDENCY_RATE,o[r.DEPENDENCY_FAILURE_RATE]=r.DEPENDENCY_FAILURE_RATE,o[r.DEPENDENCY_DURATION]=r.DEPENDENCY_DURATION,o[r.EXCEPTION_RATE]=r.EXCEPTION_RATE,o),t.QuickPulseDocumentType={Event:"Event",Exception:"Exception",Trace:"Trace",Metric:"Metric",Request:"Request",Dependency:"RemoteDependency",Availability:"Availability"},t.QuickPulseType={Event:"EventTelemetryDocument",Exception:"ExceptionTelemetryDocument",Trace:"TraceTelemetryDocument",Metric:"MetricTelemetryDocument",Request:"RequestTelemetryDocument",Dependency:"DependencyTelemetryDocument",Availability:"AvailabilityTelemetryDocument"},t.TelemetryTypeStringToQuickPulseType={EventData:t.QuickPulseType.Event,ExceptionData:t.QuickPulseType.Exception,MessageData:t.QuickPulseType.Trace,MetricData:t.QuickPulseType.Metric,RequestData:t.QuickPulseType.Request,RemoteDependencyData:t.QuickPulseType.Dependency,AvailabilityData:t.QuickPulseType.Availability},t.TelemetryTypeStringToQuickPulseDocumentType={EventData:t.QuickPulseDocumentType.Event,ExceptionData:t.QuickPulseDocumentType.Exception,MessageData:t.QuickPulseDocumentType.Trace,MetricData:t.QuickPulseDocumentType.Metric,RequestData:t.QuickPulseDocumentType.Request,RemoteDependencyData:t.QuickPulseDocumentType.Dependency,AvailabilityData:t.QuickPulseDocumentType.Availability}},9382:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9958),o=function(){function e(){}return e.TYPE_HTTP="Http",e.TYPE_AI="Http (tracked component)",e}();t.RemoteDependencyDataConstants=o,t.domainSupportsProperties=function(e){return"properties"in e||e instanceof n.EventData||e instanceof n.ExceptionData||e instanceof n.MessageData||e instanceof n.MetricData||e instanceof n.PageViewData||e instanceof n.RemoteDependencyData||e instanceof n.RequestData}},7220:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(r(8934));e.exports=i},4101:e=>{"use strict";e.exports=function(){}},9871:e=>{"use strict";e.exports=function(){this.applicationVersion="ai.application.ver",this.deviceId="ai.device.id",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceOEMName="ai.device.oemName",this.deviceOSVersion="ai.device.osVersion",this.deviceType="ai.device.type",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.userAccountId="ai.user.accountId",this.userId="ai.user.id",this.userAuthUserId="ai.user.authUserId",this.cloudRole="ai.cloud.role",this.cloudRoleInstance="ai.cloud.roleInstance",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalNodeName="ai.internal.nodeName"}},320:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){return e.call(this)||this}return o(t,e),t}(r(4101));e.exports=i},8602:(e,t,r)=>{"use strict";var n=r(495);e.exports=function(){this.kind=n.Measurement}},495:e=>{"use strict";var t;!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(t||(t={})),e.exports=t},8934:e=>{"use strict";e.exports=function(){}},7300:e=>{"use strict";e.exports=function(){this.ver=1,this.sampleRate=100,this.tags={}}},4526:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(r(8934));e.exports=i},935:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.exceptions=[],t.properties={},t.measurements={},t}return o(t,e),t}(r(8934));e.exports=i},8082:e=>{"use strict";e.exports=function(){this.hasFullStack=!0,this.parsedStack=[]}},901:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t}return o(t,e),t}(r(8934));e.exports=i},3092:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.metrics=[],t.properties={},t}return o(t,e),t}(r(8934));e.exports=i},6279:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(r(4526));e.exports=i},6290:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.success=!0,t.properties={},t.measurements={},t}return o(t,e),t}(r(8934));e.exports=i},7339:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=function(e){function t(){var t=e.call(this)||this;return t.ver=2,t.properties={},t.measurements={},t}return o(t,e),t}(r(8934));e.exports=i},9697:e=>{"use strict";var t;!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(t||(t={})),e.exports=t},6376:e=>{"use strict";e.exports=function(){}},9958:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AvailabilityData=r(7220),t.Base=r(4101),t.ContextTagKeys=r(9871),t.Data=r(320),t.DataPoint=r(8602),t.DataPointType=r(495),t.Domain=r(8934),t.Envelope=r(7300),t.EventData=r(4526),t.ExceptionData=r(935),t.ExceptionDetails=r(8082),t.MessageData=r(901),t.MetricData=r(3092),t.PageViewData=r(6279),t.RemoteDependencyData=r(6290),t.RequestData=r(7339),t.SeverityLevel=r(9697),t.StackFrame=r(6376)},5481:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.telemetryTypeToBaseType=function(e){switch(e){case r.Event:return"EventData";case r.Exception:return"ExceptionData";case r.Trace:return"MessageData";case r.Metric:return"MetricData";case r.Request:return"RequestData";case r.Dependency:return"RemoteDependencyData";case r.Availability:return"AvailabilityData"}},t.baseTypeToTelemetryType=function(e){switch(e){case"EventData":return r.Event;case"ExceptionData":return r.Exception;case"MessageData":return r.Trace;case"MetricData":return r.Metric;case"RequestData":return r.Request;case"RemoteDependencyData":return r.Dependency;case"AvailabilityData":return r.Availability}},t.TelemetryTypeString={Event:"EventData",Exception:"ExceptionData",Trace:"MessageData",Metric:"MetricData",Request:"RequestData",Dependency:"RemoteDependencyData",Availability:"AvailabilityData"},function(e){e[e.Event=0]="Event",e[e.Exception=1]="Exception",e[e.Trace=2]="Trace",e[e.Metric=3]="Metric",e[e.Request=4]="Request",e[e.Dependency=5]="Dependency",e[e.Availability=6]="Availability"}(r=t.TelemetryType||(t.TelemetryType={}))},2626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(5481))},5290:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(9382)),n(r(9958)),n(r(2626))},3504:(e,t,r)=>{"use strict";var n=r(5282),o=function(){function e(e,t,r,n){this._buffer=[],this._lastSend=0,this._isDisabled=e,this._getBatchSize=t,this._getBatchIntervalMs=r,this._sender=n}return e.prototype.setUseDiskRetryCaching=function(e,t,r){this._sender.setDiskRetryMode(e,t,r)},e.prototype.send=function(e){var t=this;if(!this._isDisabled())if(e){var r=this._stringify(e);"string"==typeof r&&(this._buffer.push(r),this._buffer.length>=this._getBatchSize()?this.triggerSend(!1):!this._timeoutHandle&&this._buffer.length>0&&(this._timeoutHandle=setTimeout((function(){t._timeoutHandle=null,t.triggerSend(!1)}),this._getBatchIntervalMs())))}else n.warn("Cannot send null/undefined telemetry")},e.prototype.triggerSend=function(e,t){var r=this._buffer.length<1;if(!r){var n=this._buffer.join("\n");e?(this._sender.saveOnCrash(n),"function"==typeof t&&t("data saved on crash")):this._sender.send(Buffer.from?Buffer.from(n):new Buffer(n),t)}this._lastSend=+new Date,this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null,r&&"function"==typeof t&&t("no data to send")},e.prototype._stringify=function(e){try{return JSON.stringify(e)}catch(t){n.warn("Failed to serialize payload",t,e)}},e}();e.exports=o},9253:(e,t,r)=>{"use strict";var n=r(9962),o=r(5158),i=r(3580),a=r(8835),s=function(){function e(t){var r=this;this.endpointBase=i.DEFAULT_BREEZE_ENDPOINT;var n=process.env[e.ENV_connectionString],s=o.parse(t),c=o.parse(n),l=!s.instrumentationkey&&Object.keys(s).length>0?null:t;this.instrumentationKey=s.instrumentationkey||l||c.instrumentationkey||e._getInstrumentationKey(),this.endpointUrl=(s.ingestionendpoint||c.ingestionendpoint||this.endpointBase)+"/v2/track",this.maxBatchSize=250,this.maxBatchIntervalMs=15e3,this.disableAppInsights=!1,this.samplingPercentage=100,this.correlationIdRetryIntervalMs=3e4,this.correlationHeaderExcludedDomains=["*.core.windows.net","*.core.chinacloudapi.cn","*.core.cloudapi.de","*.core.usgovcloudapi.net","*.core.microsoft.scloud","*.core.eaglex.ic.gov"],this.setCorrelationId=function(e){return r.correlationId=e},this.proxyHttpUrl=process.env[e.ENV_http_proxy]||void 0,this.proxyHttpsUrl=process.env[e.ENV_https_proxy]||void 0,this.httpAgent=void 0,this.httpsAgent=void 0,this.profileQueryEndpoint=s.ingestionendpoint||c.ingestionendpoint||process.env[e.ENV_profileQueryEndpoint]||this.endpointBase,this._quickPulseHost=s.liveendpoint||c.liveendpoint||process.env[e.ENV_quickPulseHost]||i.DEFAULT_LIVEMETRICS_HOST,this._quickPulseHost.match(/^https?:\/\//)&&(this._quickPulseHost=a.parse(this._quickPulseHost).host)}return Object.defineProperty(e.prototype,"profileQueryEndpoint",{get:function(){return this._profileQueryEndpoint},set:function(e){n.cancelCorrelationIdQuery(this,this.setCorrelationId),this._profileQueryEndpoint=e,this.correlationId=n.correlationIdPrefix,n.queryCorrelationId(this,this.setCorrelationId)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"quickPulseHost",{get:function(){return this._quickPulseHost},set:function(e){this._quickPulseHost=e},enumerable:!0,configurable:!0}),e._getInstrumentationKey=function(){var t=process.env[e.ENV_iKey]||process.env[e.ENV_azurePrefix+e.ENV_iKey]||process.env[e.legacy_ENV_iKey]||process.env[e.ENV_azurePrefix+e.legacy_ENV_iKey];if(!t||""==t)throw new Error("Instrumentation key not found, pass the key in the config to this method or set the key in the environment variable APPINSIGHTS_INSTRUMENTATIONKEY before starting the server");return t},e.ENV_azurePrefix="APPSETTING_",e.ENV_iKey="APPINSIGHTS_INSTRUMENTATIONKEY",e.legacy_ENV_iKey="APPINSIGHTS_INSTRUMENTATION_KEY",e.ENV_profileQueryEndpoint="APPINSIGHTS_PROFILE_QUERY_ENDPOINT",e.ENV_quickPulseHost="APPINSIGHTS_QUICKPULSE_HOST",e.ENV_connectionString="APPLICATIONINSIGHTS_CONNECTION_STRING",e.ENV_nativeMetricsDisablers="APPLICATION_INSIGHTS_DISABLE_EXTENDED_METRIC",e.ENV_nativeMetricsDisableAll="APPLICATION_INSIGHTS_DISABLE_ALL_EXTENDED_METRICS",e.ENV_http_proxy="http_proxy",e.ENV_https_proxy="https_proxy",e}();e.exports=s},5158:(e,t,r)=>{"use strict";var n=r(3580),o=function(){function e(){}return e.parse=function(t){if(!t)return{};var r=t.split(e._FIELDS_SEPARATOR).reduce((function(t,r){var n=r.split(e._FIELD_KEY_VALUE_SEPARATOR);if(2===n.length){var o=n[0].toLowerCase(),i=n[1];t[o]=i}return t}),{});if(Object.keys(r).length>0){if(r.endpointsuffix){var o=r.location?r.location+".":"";r.ingestionendpoint=r.ingestionendpoint||"https://"+o+"dc."+r.endpointsuffix,r.liveendpoint=r.liveendpoint||"https://"+o+"live."+r.endpointsuffix}r.ingestionendpoint=r.ingestionendpoint||n.DEFAULT_BREEZE_ENDPOINT,r.liveendpoint=r.liveendpoint||n.DEFAULT_LIVEMETRICS_ENDPOINT}return r},e._FIELDS_SEPARATOR=";",e._FIELD_KEY_VALUE_SEPARATOR="=",e}();e.exports=o},4470:(e,t,r)=>{"use strict";var n=r(2087),o=r(5747),i=r(5622),a=r(5290),s=r(5282),c=function(){function e(e){this.keys=new a.ContextTagKeys,this.tags={},this._loadApplicationContext(),this._loadDeviceContext(),this._loadInternalContext()}return e.prototype._loadApplicationContext=function(t){if(t=t||i.resolve(__dirname,"../../../../package.json"),!e.appVersion[t]){e.appVersion[t]="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.appVersion[t]=r.version)}catch(e){s.info("unable to read app version: ",e)}}this.tags[this.keys.applicationVersion]=e.appVersion[t]},e.prototype._loadDeviceContext=function(){this.tags[this.keys.deviceId]="",this.tags[this.keys.cloudRoleInstance]=n&&n.hostname(),this.tags[this.keys.deviceOSVersion]=n&&n.type()+" "+n.release(),this.tags[this.keys.cloudRole]=e.DefaultRoleName,this.tags["ai.device.osArchitecture"]=n&&n.arch(),this.tags["ai.device.osPlatform"]=n&&n.platform()},e.prototype._loadInternalContext=function(){var t=i.resolve(__dirname,"../../package.json");if(!e.sdkVersion){e.sdkVersion="unknown";try{var r=JSON.parse(o.readFileSync(t,"utf8"));r&&"string"==typeof r.version&&(e.sdkVersion=r.version)}catch(e){s.info("unable to read app version: ",e)}}this.tags[this.keys.internalSdkVersion]="node:"+e.sdkVersion},e.DefaultRoleName="Web",e.appVersion={},e.sdkVersion=null,e}();e.exports=c},9962:(e,t,r)=>{"use strict";var n=r(5740),o=r(5282),i=function(){function e(){}return e.queryCorrelationId=function(t,r){var i=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId";if(e.completedLookups.hasOwnProperty(i))r(e.completedLookups[i]);else if(e.pendingLookups[i])e.pendingLookups[i].push(r);else{e.pendingLookups[i]=[r];var a=function(){if(e.pendingLookups[i]){var r={method:"GET",disableAppInsightsAutoCollection:!0};o.info(e.TAG,r);var s=n.makeRequest(t,i,r,(function(r){if(200===r.statusCode){var n="";r.setEncoding("utf-8"),r.on("data",(function(e){n+=e})),r.on("end",(function(){o.info(e.TAG,n);var t=e.correlationIdPrefix+n;e.completedLookups[i]=t,e.pendingLookups[i]&&e.pendingLookups[i].forEach((function(e){return e(t)})),delete e.pendingLookups[i]}))}else r.statusCode>=400&&r.statusCode<500?(e.completedLookups[i]=void 0,delete e.pendingLookups[i]):setTimeout(a,t.correlationIdRetryIntervalMs)}));s&&(s.on("error",(function(t){o.warn(e.TAG,t)})),s.end())}};setTimeout(a,0)}},e.cancelCorrelationIdQuery=function(t,r){var n=t.profileQueryEndpoint+"/api/profiles/"+t.instrumentationKey+"/appId",o=e.pendingLookups[n];o&&(e.pendingLookups[n]=o.filter((function(e){return e!=r})),0==e.pendingLookups[n].length&&delete e.pendingLookups[n])},e.generateRequestId=function(t){if(t){"."!==(t="|"==t[0]?t:"|"+t)[t.length-1]&&(t+=".");var r=(e.currentRootId++).toString(16);return e.appendSuffix(t,r,"_")}return e.generateRootId()},e.getRootId=function(e){var t=e.indexOf(".");t<0&&(t=e.length);var r="|"===e[0]?1:0;return e.substring(r,t)},e.generateRootId=function(){return"|"+n.w3cTraceId()+"."},e.appendSuffix=function(t,r,o){if(t.length+r.length<e.requestIdMaxLength)return t+r+o;var i=e.requestIdMaxLength-9;if(t.length>i)for(;i>1;--i){var a=t[i-1];if("."===a||"_"===a)break}if(i<=1)return e.generateRootId();for(r=n.randomu32().toString(16);r.length<8;)r="0"+r;return t.substring(0,i)+r+"#"},e.TAG="CorrelationIdManager",e.correlationIdPrefix="cid-v1:",e.w3cEnabled=!1,e.pendingLookups={},e.completedLookups={},e.requestIdMaxLength=1024,e.currentRootId=n.randomu32(),e}();e.exports=i},9813:(e,t,r)=>{"use strict";var n=r(5290),o=r(5740),i=r(894),a=function(){function e(){}return e.createEnvelope=function(t,r,i,a,s){var c=null;switch(r){case n.TelemetryType.Trace:c=e.createTraceData(t);break;case n.TelemetryType.Dependency:c=e.createDependencyData(t);break;case n.TelemetryType.Event:c=e.createEventData(t);break;case n.TelemetryType.Exception:c=e.createExceptionData(t);break;case n.TelemetryType.Request:c=e.createRequestData(t);break;case n.TelemetryType.Metric:c=e.createMetricData(t);break;case n.TelemetryType.Availability:c=e.createAvailabilityData(t)}if(i&&n.domainSupportsProperties(c.baseData)){if(c&&c.baseData)if(c.baseData.properties)for(var l in i)c.baseData.properties[l]||(c.baseData.properties[l]=i[l]);else c.baseData.properties=i;c.baseData.properties=o.validateStringMap(c.baseData.properties)}var u=s&&s.instrumentationKey||"",p=new n.Envelope;return p.data=c,p.iKey=u,p.name="Microsoft.ApplicationInsights."+u.replace(/-/g,"")+"."+c.baseType.substr(0,c.baseType.length-4),p.tags=this.getTags(a,t.tagOverrides),p.time=(new Date).toISOString(),p.ver=1,p.sampleRate=s?s.samplingPercentage:100,r===n.TelemetryType.Metric&&(p.sampleRate=100),p},e.createTraceData=function(e){var t=new n.MessageData;t.message=e.message,t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Information:t.severityLevel=e.severity;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Trace),r.baseData=t,r},e.createDependencyData=function(e){var t=new n.RemoteDependencyData;"string"==typeof e.name&&(t.name=e.name.length>1024?e.name.slice(0,1021)+"...":e.name),t.data=e.data,t.target=e.target,t.duration=o.msToTimeSpan(e.duration),t.success=e.success,t.type=e.dependencyTypeName,t.properties=e.properties,t.resultCode=e.resultCode?e.resultCode+"":"",e.id?t.id=e.id:t.id=o.w3cTraceId();var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Dependency),r.baseData=t,r},e.createEventData=function(e){var t=new n.EventData;t.name=e.name,t.properties=e.properties,t.measurements=e.measurements;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Event),r.baseData=t,r},e.createExceptionData=function(e){var t=new n.ExceptionData;t.properties=e.properties,isNaN(e.severity)?t.severityLevel=n.SeverityLevel.Error:t.severityLevel=e.severity,t.measurements=e.measurements,t.exceptions=[];var r=e.exception.stack,i=new n.ExceptionDetails;i.message=e.exception.message,i.typeName=e.exception.name,i.parsedStack=this.parseStack(r),i.hasFullStack=o.isArray(i.parsedStack)&&i.parsedStack.length>0,t.exceptions.push(i);var a=new n.Data;return a.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Exception),a.baseData=t,a},e.createRequestData=function(e){var t=new n.RequestData;e.id?t.id=e.id:t.id=o.w3cTraceId(),t.name=e.name,t.url=e.url,t.source=e.source,t.duration=o.msToTimeSpan(e.duration),t.responseCode=e.resultCode?e.resultCode+"":"",t.success=e.success,t.properties=e.properties;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Request),r.baseData=t,r},e.createMetricData=function(e){var t=new n.MetricData;t.metrics=[];var r=new n.DataPoint;r.count=isNaN(e.count)?1:e.count,r.kind=n.DataPointType.Aggregation,r.max=isNaN(e.max)?e.value:e.max,r.min=isNaN(e.min)?e.value:e.min,r.name=e.name,r.stdDev=isNaN(e.stdDev)?0:e.stdDev,r.value=e.value,t.metrics.push(r),t.properties=e.properties;var o=new n.Data;return o.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Metric),o.baseData=t,o},e.createAvailabilityData=function(e){var t=new n.AvailabilityData;e.id?t.id=e.id:t.id=o.w3cTraceId(),t.name=e.name,t.duration=o.msToTimeSpan(e.duration),t.success=e.success,t.runLocation=e.runLocation,t.message=e.message,t.measurements=e.measurements,t.properties=e.properties;var r=new n.Data;return r.baseType=n.telemetryTypeToBaseType(n.TelemetryType.Availability),r.baseData=t,r},e.getTags=function(e,t){var r=i.CorrelationContextManager.getCurrentContext(),n={};if(e&&e.tags)for(var o in e.tags)n[o]=e.tags[o];if(t)for(var o in t)n[o]=t[o];return r&&(n[e.keys.operationId]=n[e.keys.operationId]||r.operation.id,n[e.keys.operationName]=n[e.keys.operationName]||r.operation.name,n[e.keys.operationParentId]=n[e.keys.operationParentId]||r.operation.parentId),n},e.parseStack=function(e){var t=void 0;if("string"==typeof e){var r=e.split("\n");t=[];for(var n=0,o=0,i=0;i<=r.length;i++){var a=r[i];if(s.regex.test(a)){var c=new s(r[i],n++);o+=c.sizeInBytes,t.push(c)}}if(o>32768)for(var l=0,u=t.length-1,p=0,d=l,h=u;l<u;){if((p+=t[l].sizeInBytes+t[u].sizeInBytes)>32768){var m=h-d+1;t.splice(d,m);break}d=l,h=u,l++,u--}}return t},e}(),s=function(){function e(t,r){this.sizeInBytes=0,this.level=r,this.method="<no_method>",this.assembly=o.trim(t);var n=t.match(e.regex);n&&n.length>=5&&(this.method=o.trim(n[2])||this.method,this.fileName=o.trim(n[4])||"<no_filename>",this.line=parseInt(n[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=e.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return e.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,e.baseSize=58,e}();e.exports=a},5282:e=>{"use strict";var t=function(){function e(){}return e.info=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.enableDebug&&console.info(e.TAG+t,r)},e.warn=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];e.disableWarnings||console.warn(e.TAG+t,r)},e.enableDebug=!1,e.disableWarnings=!1,e.disableErrors=!1,e.TAG="ApplicationInsights:",e}();e.exports=t},1259:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=r(7625),a=r(731),s=r(8723),c=r(5282),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.trackNodeHttpRequestSync=function(e){e&&e.request&&e.response&&e.duration?a.trackRequestSync(this,e):c.warn("trackNodeHttpRequestSync requires NodeHttpRequestTelemetry object with request, response and duration specified.")},t.prototype.trackNodeHttpRequest=function(e){(e.duration||e.error)&&c.warn("trackNodeHttpRequest will ignore supplied duration and error parameters. These values are collected from the request and response objects."),e&&e.request&&e.response?a.trackRequest(this,e):c.warn("trackNodeHttpRequest requires NodeHttpRequestTelemetry object with request and response specified.")},t.prototype.trackNodeHttpDependency=function(e){e&&e.request?s.trackRequest(this,e):c.warn("trackNodeHttpDependency requires NodeHttpDependencyTelemetry object with request specified.")},t}(i);e.exports=l},7148:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=r(2087),i=r(5290),a=r(3580),s=r(5740),c=r(5282),l=s.w3cTraceId(),u=function(){function e(){}return e.createQuickPulseEnvelope=function(e,t,r,n){var i=o&&"function"==typeof o.hostname&&o.hostname()||"Unknown",a=n.tags&&n.keys&&n.keys.cloudRoleInstance&&n.tags[n.keys.cloudRoleInstance]||i;return{Documents:t.length>0?t:null,InstrumentationKey:r.instrumentationKey||"",Metrics:e.length>0?e:null,InvariantVersion:1,Timestamp:"/Date("+Date.now()+")/",Version:n.tags[n.keys.internalSdkVersion],StreamId:l,MachineName:i,Instance:a}},e.createQuickPulseMetric=function(e){return{Name:e.name,Value:e.value,Weight:e.count||1}},e.telemetryEnvelopeToQuickPulseDocument=function(t){switch(t.data.baseType){case i.TelemetryTypeString.Event:return e.createQuickPulseEventDocument(t);case i.TelemetryTypeString.Exception:return e.createQuickPulseExceptionDocument(t);case i.TelemetryTypeString.Trace:return e.createQuickPulseTraceDocument(t);case i.TelemetryTypeString.Dependency:return e.createQuickPulseDependencyDocument(t);case i.TelemetryTypeString.Request:return e.createQuickPulseRequestDocument(t)}return null},e.createQuickPulseEventDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.name;return n({},r,{Name:o})},e.createQuickPulseTraceDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.severityLevel||0;return n({},r,{Message:t.data.baseData.message,SeverityLevel:i.SeverityLevel[o]})},e.createQuickPulseExceptionDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData.exceptions,i="",a="",s="";return o&&o.length>0&&(o[0].parsedStack&&o[0].parsedStack.length>0?o[0].parsedStack.forEach((function(e){i+=e.assembly+"\n"})):o[0].stack&&o[0].stack.length>0&&(i=o[0].stack),a=o[0].message,s=o[0].typeName),n({},r,{Exception:i,ExceptionMessage:a,ExceptionType:s})},e.createQuickPulseRequestDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n({},r,{Name:o.name,Success:o.success,Duration:o.duration,ResponseCode:o.responseCode,OperationName:o.name})},e.createQuickPulseDependencyDocument=function(t){var r=e.createQuickPulseDocument(t),o=t.data.baseData;return n({},r,{Name:o.name,Target:o.target,Success:o.success,Duration:o.duration,ResultCode:o.resultCode,CommandName:o.data,OperationName:r.OperationId,DependencyTypeName:o.type})},e.createQuickPulseDocument=function(t){var r,n;return t.data.baseType?(n=a.TelemetryTypeStringToQuickPulseType[t.data.baseType],r=a.TelemetryTypeStringToQuickPulseDocumentType[t.data.baseType]):c.warn("Document type invalid; not sending live metric document",t.data.baseType),{DocumentType:r,__type:n,OperationId:t.tags[e.keys.operationId],Version:"1.0",Properties:e.aggregateProperties(t)}},e.aggregateProperties=function(e){var t=[],r=e.data.baseData.measurements||{};for(var n in r)if(r.hasOwnProperty(n)){var o={key:n,value:r[n]};t.push(o)}var i=e.data.baseData.properties||{};for(var n in i)i.hasOwnProperty(n)&&(o={key:n,value:i[n]},t.push(o));return t},e.keys=new i.ContextTagKeys,e}();e.exports=u},9184:(e,t,r)=>{"use strict";var n=r(7211),o=r(8723),i=r(5282),a=function(){function e(e){this._config=e,this._consecutiveErrors=0}return e.prototype.ping=function(e,t){this._submitData(e,t,"ping")},e.prototype.post=function(e,t){this._submitData([e],t,"post")},e.prototype._submitData=function(t,r,a){var s,c,l=this,u=JSON.stringify(t),p=((s={})[o.disableCollectionRequestOption]=!0,s.host=this._config.quickPulseHost,s.method="POST",s.path="/QuickPulseService.svc/"+a+"?ikey="+this._config.instrumentationKey,s.headers=((c={Expect:"100-continue"})["x-ms-qps-transmission-time"]=1e4*Date.now(),c["Content-Type"]="application/json",c["Content-Length"]=Buffer.byteLength(u),c),s),d=n.request(p,(function(e){var t="true"===e.headers["x-ms-qps-subscribed"];l._consecutiveErrors=0,r(t,e)}));d.on("error",(function(t){l._consecutiveErrors++;var n="Transient error connecting to the Live Metrics endpoint. This packet will not appear in your Live Metrics Stream. Error:";l._consecutiveErrors%e.MAX_QPS_FAILURES_BEFORE_WARN==0?(n="Live Metrics endpoint could not be reached "+l._consecutiveErrors+" consecutive times. Most recent error:",i.warn(e.TAG,n,t)):i.info(e.TAG,n,t),r()})),d.write(u),d.end()},e.TAG="QuickPulseSender",e.MAX_QPS_FAILURES_BEFORE_WARN=25,e}();e.exports=a},3668:(e,t,r)=>{"use strict";var n=r(5282),o=r(9253),i=r(7148),a=r(9184),s=r(3580),c=r(4470),l=function(){function e(e,t){this._isCollectingData=!1,this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0,this._metrics={},this._documents=[],this._collectors=[],this.config=new o(e),this.context=t||new c,this._sender=new a(this.config),this._isEnabled=!1}return e.prototype.addCollector=function(e){this._collectors.push(e)},e.prototype.trackMetric=function(e){this._addMetric(e)},e.prototype.addDocument=function(e){var t=i.telemetryEnvelopeToQuickPulseDocument(e);t&&this._documents.push(t)},e.prototype.enable=function(e){e&&!this._isEnabled?(this._isEnabled=!0,this._goQuickPulse()):!e&&this._isEnabled&&(this._isEnabled=!1,clearTimeout(this._handle),this._handle=void 0)},e.prototype.enableCollectors=function(e){this._collectors.forEach((function(t){t.enable(e)}))},e.prototype._addMetric=function(e){var t=e.value,r=e.count||1,n=s.PerformanceToQuickPulseCounter[e.name];n&&(this._metrics[n]?(this._metrics[n].Value=(this._metrics[n].Value*this._metrics[n].Weight+t*r)/(this._metrics[n].Weight+r),this._metrics[n].Weight+=r):(this._metrics[n]=i.createQuickPulseMetric(e),this._metrics[n].Name=n,this._metrics[n].Weight=1))},e.prototype._resetQuickPulseBuffer=function(){delete this._metrics,this._metrics={},this._documents.length=0},e.prototype._goQuickPulse=function(){var t=this,r=Object.keys(this._metrics).map((function(e){return t._metrics[e]})),n=i.createQuickPulseEnvelope(r,this._documents.slice(),this.config,this.context);this._resetQuickPulseBuffer(),this._isCollectingData?this._post(n):this._ping(n);var o=this._isCollectingData?e.POST_INTERVAL:e.PING_INTERVAL;this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_POST_WAIT_TIME&&!this._lastSendSucceeded?(this._isCollectingData=!1,o=e.FALLBACK_INTERVAL):!this._isCollectingData&&Date.now()-this._lastSuccessTime>=e.MAX_PING_WAIT_TIME&&!this._lastSendSucceeded&&(o=e.FALLBACK_INTERVAL),this._lastSendSucceeded=null,this._handle=setTimeout(this._goQuickPulse.bind(this),o),this._handle.unref()},e.prototype._ping=function(e){this._sender.ping(e,this._quickPulseDone.bind(this))},e.prototype._post=function(e){this._sender.post(e,this._quickPulseDone.bind(this))},e.prototype._quickPulseDone=function(e,t){null!=e?(this._isCollectingData!==e&&(n.info("Live Metrics sending data",e),this.enableCollectors(e)),this._isCollectingData=e,t&&t.statusCode<300&&t.statusCode>=200?(this._lastSuccessTime=Date.now(),this._lastSendSucceeded=!0):this._lastSendSucceeded=!1):this._lastSendSucceeded=!1},e.MAX_POST_WAIT_TIME=2e4,e.MAX_PING_WAIT_TIME=6e4,e.FALLBACK_INTERVAL=6e4,e.PING_INTERVAL=5e3,e.POST_INTERVAL=1e3,e}();e.exports=l},9036:e=>{"use strict";e.exports={requestContextHeader:"request-context",requestContextSourceKey:"appId",requestContextTargetKey:"appId",requestIdHeader:"request-id",parentIdHeader:"x-ms-request-id",rootIdHeader:"x-ms-request-root-id",correlationContextHeader:"correlation-context",traceparentHeader:"traceparent",traceStateHeader:"tracestate"}},2588:(e,t,r)=>{"use strict";var n=r(5747),o=r(2087),i=r(5622),a=r(8761),s=r(3129),c=r(5282),l=r(8723),u=r(5740),p=function(){function e(t,r,o){if(this._config=t,this._onSuccess=r,this._onError=o,this._enableDiskRetryMode=!1,this._resendInterval=e.WAIT_BETWEEN_RESEND,this._maxBytesOnDisk=e.MAX_BYTES_ON_DISK,this._numConsecutiveFailures=0,!e.OS_PROVIDES_FILE_PROTECTION)if(e.USE_ICACLS){try{e.OS_PROVIDES_FILE_PROTECTION=n.existsSync(e.ICACLS_PATH)}catch(e){}e.OS_PROVIDES_FILE_PROTECTION||c.warn(e.TAG,"Could not find ICACLS in expected location! This is necessary to use disk retry mode on Windows.")}else e.OS_PROVIDES_FILE_PROTECTION=!0}return e.prototype.setDiskRetryMode=function(t,r,n){this._enableDiskRetryMode=e.OS_PROVIDES_FILE_PROTECTION&&t,"number"==typeof r&&r>=0&&(this._resendInterval=Math.floor(r)),"number"==typeof n&&n>=0&&(this._maxBytesOnDisk=Math.floor(n)),t&&!e.OS_PROVIDES_FILE_PROTECTION&&(this._enableDiskRetryMode=!1,c.warn(e.TAG,"Ignoring request to enable disk retry mode. Sufficient file protection capabilities were not detected."))},e.prototype.send=function(t,r){var n=this,o=this._config.endpointUrl,i={method:"POST",withCredentials:!1,headers:{"Content-Type":"application/x-json-stream"}};a.gzip(t,(function(a,s){var p=s;a?(c.warn(a),p=t,i.headers["Content-Length"]=t.length.toString()):(i.headers["Content-Encoding"]="gzip",i.headers["Content-Length"]=s.length),c.info(e.TAG,i),i[l.disableCollectionRequestOption]=!0;var d=u.makeRequest(n._config,o,i,(function(o){o.setEncoding("utf-8");var i="";o.on("data",(function(e){i+=e})),o.on("end",(function(){n._numConsecutiveFailures=0,c.info(e.TAG,i),"function"==typeof n._onSuccess&&n._onSuccess(i),"function"==typeof r&&r(i),n._enableDiskRetryMode&&(200===o.statusCode?setTimeout((function(){return n._sendFirstFileOnDisk()}),n._resendInterval).unref():408!==o.statusCode&&429!==o.statusCode&&439!==o.statusCode&&500!==o.statusCode&&503!==o.statusCode||n._storeToDisk(t))}))}));d.on("error",(function(o){if(n._numConsecutiveFailures++,!n._enableDiskRetryMode||n._numConsecutiveFailures>0&&n._numConsecutiveFailures%e.MAX_CONNECTION_FAILURES_BEFORE_WARN==0){var i="Ingestion endpoint could not be reached. This batch of telemetry items has been lost. Use Disk Retry Caching to enable resending of failed telemetry. Error:";n._enableDiskRetryMode&&(i="Ingestion endpoint could not be reached "+n._numConsecutiveFailures+" consecutive times. There may be resulting telemetry loss. Most recent error:"),c.warn(e.TAG,i,o)}else i="Transient failure to reach ingestion endpoint. This batch of telemetry items will be retried. Error:",c.info(e.TAG,i,o);if(n._onErrorHelper(o),"function"==typeof r){var a="error sending telemetry";o&&"function"==typeof o.toString&&(a=o.toString()),r(a)}n._enableDiskRetryMode&&n._storeToDisk(t)})),d.write(p),d.end()}))},e.prototype.saveOnCrash=function(e){this._enableDiskRetryMode&&this._storeToDiskSync(e)},e.prototype._runICACLS=function(t,r){var n=s.spawn(e.ICACLS_PATH,t,{windowsHide:!0});n.on("error",(function(e){return r(e)})),n.on("close",(function(e,t){return r(0===e?null:new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+e+")"))}))},e.prototype._runICACLSSync=function(t){if(!s.spawnSync)throw new Error("Could not synchronously call ICACLS under current version of Node.js");var r=s.spawnSync(e.ICACLS_PATH,t,{windowsHide:!0});if(r.error)throw r.error;if(0!==r.status)throw new Error("Setting ACL restrictions did not succeed (ICACLS returned code "+r.status+")")},e.prototype._getACLIdentity=function(t){if(e.ACL_IDENTITY)return t(null,e.ACL_IDENTITY);var r=s.spawn(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]}),n="";r.stdout.on("data",(function(e){return n+=e})),r.on("error",(function(e){return t(e,null)})),r.on("close",(function(r,o){return e.ACL_IDENTITY=n&&n.trim(),t(0===r?null:new Error("Getting ACL identity did not succeed (PS returned code "+r+")"),e.ACL_IDENTITY)}))},e.prototype._getACLIdentitySync=function(){if(e.ACL_IDENTITY)return e.ACL_IDENTITY;if(s.spawnSync){var t=s.spawnSync(e.POWERSHELL_PATH,["-Command","[System.Security.Principal.WindowsIdentity]::GetCurrent().Name"],{windowsHide:!0,stdio:["ignore","pipe","pipe"]});if(t.error)throw t.error;if(0!==t.status)throw new Error("Getting ACL identity did not succeed (PS returned code "+t.status+")");return e.ACL_IDENTITY=t.stdout&&t.stdout.toString().trim(),e.ACL_IDENTITY}throw new Error("Could not synchronously get ACL identity under current version of Node.js")},e.prototype._getACLArguments=function(e,t){return[e,"/grant","*S-1-5-32-544:(OI)(CI)F","/grant",t+":(OI)(CI)F","/inheritance:r"]},e.prototype._applyACLRules=function(t,r){var n=this;return e.USE_ICACLS?void 0!==e.ACLED_DIRECTORIES[t]?r(e.ACLED_DIRECTORIES[t]?null:new Error("Setting ACL restrictions did not succeed (cached result)")):(e.ACLED_DIRECTORIES[t]=!1,void this._getACLIdentity((function(o,i){if(o)return e.ACLED_DIRECTORIES[t]=!1,r(o);n._runICACLS(n._getACLArguments(t,i),(function(n){return e.ACLED_DIRECTORIES[t]=!n,r(n)}))}))):r(null)},e.prototype._applyACLRulesSync=function(t){if(e.USE_ICACLS){if(void 0===e.ACLED_DIRECTORIES[t])return this._runICACLSSync(this._getACLArguments(t,this._getACLIdentitySync())),void(e.ACLED_DIRECTORIES[t]=!0);if(!e.ACLED_DIRECTORIES[t])throw new Error("Setting ACL restrictions did not succeed (cached result)")}},e.prototype._confirmDirExists=function(e,t){var r=this;n.lstat(e,(function(o,i){o&&"ENOENT"===o.code?n.mkdir(e,(function(n){n&&"EEXIST"!==n.code?t(n):r._applyACLRules(e,t)})):!o&&i.isDirectory()?r._applyACLRules(e,t):t(o||new Error("Path existed but was not a directory"))}))},e.prototype._getShallowDirectorySize=function(e,t){n.readdir(e,(function(r,o){if(r)return t(r,-1);var a=null,s=0,c=0;if(0!==o.length)for(var l=0;l<o.length;l++)n.stat(i.join(e,o[l]),(function(e,r){c++,e?a=e:r.isFile()&&(s+=r.size),c===o.length&&t(a,a?-1:s)}));else t(null,0)}))},e.prototype._getShallowDirectorySizeSync=function(e){for(var t=n.readdirSync(e),r=0,o=0;o<t.length;o++)r+=n.statSync(i.join(e,t[o])).size;return r},e.prototype._storeToDisk=function(t){var r=this,a=i.join(o.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);c.info(e.TAG,"Checking existance of data storage directory: "+a),this._confirmDirExists(a,(function(o){if(o)return c.warn(e.TAG,"Error while checking/creating directory: "+(o&&o.message)),void r._onErrorHelper(o);r._getShallowDirectorySize(a,(function(o,s){if(o||s<0)return c.warn(e.TAG,"Error while checking directory size: "+(o&&o.message)),void r._onErrorHelper(o);if(s>r._maxBytesOnDisk)c.warn(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+s);else{var l=(new Date).getTime()+".ai.json",u=i.join(a,l);c.info(e.TAG,"saving data to disk at: "+u),n.writeFile(u,t,{mode:384},(function(e){return r._onErrorHelper(e)}))}}))}))},e.prototype._storeToDiskSync=function(t){var r=i.join(o.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);try{c.info(e.TAG,"Checking existance of data storage directory: "+r),n.existsSync(r)||n.mkdirSync(r),this._applyACLRulesSync(r);var a=this._getShallowDirectorySizeSync(r);if(a>this._maxBytesOnDisk)return void c.info(e.TAG,"Not saving data due to max size limit being met. Directory size in bytes is: "+a);var s=(new Date).getTime()+".ai.json",l=i.join(r,s);c.info(e.TAG,"saving data before crash to disk at: "+l),n.writeFileSync(l,t,{mode:384})}catch(t){c.warn(e.TAG,"Error while saving data to disk: "+(t&&t.message)),this._onErrorHelper(t)}},e.prototype._sendFirstFileOnDisk=function(){var t=this,r=i.join(o.tmpdir(),e.TEMPDIR_PREFIX+this._config.instrumentationKey);n.exists(r,(function(e){e&&n.readdir(r,(function(e,o){if(e)t._onErrorHelper(e);else if((o=o.filter((function(e){return i.basename(e).indexOf(".ai.json")>-1}))).length>0){var a=o[0],s=i.join(r,a);n.readFile(s,(function(e,r){e?t._onErrorHelper(e):n.unlink(s,(function(e){e?t._onErrorHelper(e):t.send(r)}))}))}}))}))},e.prototype._onErrorHelper=function(e){"function"==typeof this._onError&&this._onError(e)},e.TAG="Sender",e.ICACLS_PATH=process.env.systemdrive+"/windows/system32/icacls.exe",e.POWERSHELL_PATH=process.env.systemdrive+"/windows/system32/windowspowershell/v1.0/powershell.exe",e.ACLED_DIRECTORIES={},e.ACL_IDENTITY=null,e.WAIT_BETWEEN_RESEND=6e4,e.MAX_BYTES_ON_DISK=5e7,e.MAX_CONNECTION_FAILURES_BEFORE_WARN=5,e.TEMPDIR_PREFIX="appInsights-node",e.OS_PROVIDES_FILE_PROTECTION=!1,e.USE_ICACLS="Windows_NT"===o.type(),e}();e.exports=p},7625:(e,t,r)=>{"use strict";var n=r(8835),o=r(9253),i=r(4470),a=r(5290),s=r(3504),c=r(9428),l=r(894),u=r(2588),p=r(5740),d=r(5282),h=r(9813),m=function(){function e(e){this._telemetryProcessors=[];var t=new o(e);this.config=t,this.context=new i,this.commonProperties={};var r=new u(this.config);this.channel=new s((function(){return t.disableAppInsights}),(function(){return t.maxBatchSize}),(function(){return t.maxBatchIntervalMs}),r)}return e.prototype.trackAvailability=function(e){this.track(e,a.TelemetryType.Availability)},e.prototype.trackTrace=function(e){this.track(e,a.TelemetryType.Trace)},e.prototype.trackMetric=function(e){this.track(e,a.TelemetryType.Metric)},e.prototype.trackException=function(e){e&&e.exception&&!p.isError(e.exception)&&(e.exception=new Error(e.exception.toString())),this.track(e,a.TelemetryType.Exception)},e.prototype.trackEvent=function(e){this.track(e,a.TelemetryType.Event)},e.prototype.trackRequest=function(e){this.track(e,a.TelemetryType.Request)},e.prototype.trackDependency=function(e){e&&!e.target&&e.data&&(e.target=n.parse(e.data).host),this.track(e,a.TelemetryType.Dependency)},e.prototype.flush=function(e){this.channel.triggerSend(!!e&&!!e.isAppCrashing,e?e.callback:void 0)},e.prototype.track=function(e,t){if(e&&a.telemetryTypeToBaseType(t)){var r=h.createEnvelope(e,t,this.commonProperties,this.context,this.config);e.time&&(r.time=e.time.toISOString());var n=this.runTelemetryProcessors(r,e.contextObjects);n=n&&c.samplingTelemetryProcessor(r,{correlationContext:l.CorrelationContextManager.getCurrentContext()}),c.performanceMetricsTelemetryProcessor(r,this.quickPulseClient),n&&this.channel.send(r)}else d.warn("track() requires telemetry object and telemetryType to be specified.")},e.prototype.addTelemetryProcessor=function(e){this._telemetryProcessors.push(e)},e.prototype.clearTelemetryProcessors=function(){this._telemetryProcessors=[]},e.prototype.runTelemetryProcessors=function(e,t){var r=!0,n=this._telemetryProcessors.length;if(0===n)return r;(t=t||{}).correlationContext=l.CorrelationContextManager.getCurrentContext();for(var o=0;o<n;++o)try{var i=this._telemetryProcessors[o];if(i&&!1===i.apply(null,[e,t])){r=!1;break}}catch(t){r=!0,d.warn("One of telemetry processors failed, telemetry item will be sent.",t,e)}return r},e}();e.exports=m},8090:(e,t,r)=>{"use strict";var n=r(5740),o=r(9962),i=function(){function e(t,r){if(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.version=e.DEFAULT_VERSION,t&&"string"==typeof t)if(t.split(",").length>1)this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16);else{var i=t.trim().split("-"),a=i.length;a>=4?(this.version=i[0],this.traceId=i[1],this.spanId=i[2],this.traceFlag=i[3]):(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^[0-9a-f]{2}$/g)||(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId()),"00"===this.version&&4!==a&&(this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),"ff"===this.version&&(this.version=e.DEFAULT_VERSION,this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)),this.version.match(/^0[0-9a-f]$/g)||(this.version=e.DEFAULT_VERSION),this.traceFlag.match(/^[0-9a-f]{2}$/g)||(this.traceFlag=e.DEFAULT_TRACE_FLAG,this.traceId=n.w3cTraceId()),e.isValidTraceId(this.traceId)||(this.traceId=n.w3cTraceId()),e.isValidSpanId(this.spanId)||(this.spanId=n.w3cTraceId().substr(0,16),this.traceId=n.w3cTraceId()),this.parentId=this.getBackCompatRequestId()}else if(r){this.parentId=r.slice();var s=o.getRootId(r);e.isValidTraceId(s)||(this.legacyRootId=s,s=n.w3cTraceId()),-1!==r.indexOf("|")&&(r=r.substring(1+r.substring(0,r.length-1).lastIndexOf("."),r.length-1)),this.traceId=s,this.spanId=r}else this.traceId=n.w3cTraceId(),this.spanId=n.w3cTraceId().substr(0,16)}return e.isValidTraceId=function(e){return e.match(/^[0-9a-f]{32}$/)&&"00000000000000000000000000000000"!==e},e.isValidSpanId=function(e){return e.match(/^[0-9a-f]{16}$/)&&"0000000000000000"!==e},e.prototype.getBackCompatRequestId=function(){return"|"+this.traceId+"."+this.spanId+"."},e.prototype.toString=function(){return this.version+"-"+this.traceId+"-"+this.spanId+"-"+this.traceFlag},e.prototype.updateSpanId=function(){this.spanId=n.w3cTraceId().substr(0,16)},e.DEFAULT_TRACE_FLAG="01",e.DEFAULT_VERSION="00",e}();e.exports=i},6333:e=>{"use strict";var t=function(){function e(e){this.fieldmap=[],e&&(this.fieldmap=this.parseHeader(e))}return e.prototype.toString=function(){var e=this.fieldmap;return e&&0!=e.length?e.join(", "):null},e.validateKeyChars=function(e){var t=e.split("@");if(2==t.length){var r=t[0].trim(),n=t[1].trim(),o=Boolean(r.match(/^[\ ]?[a-z0-9\*\-\_/]{1,241}$/)),i=Boolean(n.match(/^[\ ]?[a-z0-9\*\-\_/]{1,14}$/));return o&&i}return 1==t.length&&Boolean(e.match(/^[\ ]?[a-z0-9\*\-\_/]{1,256}$/))},e.prototype.parseHeader=function(t){var r=[],n={},o=t.split(",");if(o.length>32)return null;for(var i=0,a=o;i<a.length;i++){var s=a[i].trim();if(0!==s.length){var c=s.split("=");if(2!==c.length)return null;if(!e.validateKeyChars(c[0]))return null;if(n[c[0]])return null;n[c[0]]=!0,r.push(s)}}return r},e.strict=!0,e}();e.exports=t},5740:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o=r(8605),i=r(7211),a=r(8835),s=r(7619),c=r(5282),l=r(9036),u=function(){function e(){}return e.getCookie=function(t,r){var n="";if(t&&t.length&&"string"==typeof r)for(var o=t+"=",i=r.split(";"),a=0;a<i.length;a++)if(r=i[a],(r=e.trim(r))&&0===r.indexOf(o)){n=r.substring(o.length,i[a].length);break}return n},e.trim=function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},e.int32ArrayToBase64=function(e){var t=function(e,t){return String.fromCharCode(e>>t&255)},r=e.map((function(e){return t(e,24)+t(e,16)+t(e,8)+t(e,0)})).join(""),n=(Buffer.from?Buffer.from(r,"binary"):new Buffer(r,"binary")).toString("base64");return n.substr(0,n.indexOf("="))},e.random32=function(){return 4294967296*Math.random()|0},e.randomu32=function(){return e.random32()+2147483648},e.w3cTraceId=function(){for(var t,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],n="",o=0;o<4;o++)n+=r[15&(t=e.random32())]+r[t>>4&15]+r[t>>8&15]+r[t>>12&15]+r[t>>16&15]+r[t>>20&15]+r[t>>24&15]+r[t>>28&15];var i=r[8+4*Math.random()|0];return n.substr(0,8)+n.substr(9,4)+"4"+n.substr(13,3)+i+n.substr(16,3)+n.substr(19,12)},e.isValidW3CId=function(e){return 32===e.length&&"00000000000000000000000000000000"!==e},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.isError=function(e){return e instanceof Error},e.isPrimitive=function(e){var t=typeof e;return"string"===t||"number"===t||"boolean"===t},e.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},e.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=(e/1e3%60).toFixed(7).replace(/0{0,4}$/,""),r=""+Math.floor(e/6e4)%60,n=""+Math.floor(e/36e5)%24,o=Math.floor(e/864e5);return t=t.indexOf(".")<2?"0"+t:t,r=r.length<2?"0"+r:r,(o>0?o+".":"")+(n=n.length<2?"0"+n:n)+":"+r+":"+t},e.extractError=function(e){var t=e;return{message:e.message,code:t.code||t.id||""}},e.extractObject=function(t){return t instanceof Error?e.extractError(t):"function"==typeof t.toJSON?t.toJSON():t},e.validateStringMap=function(t){if("object"==typeof t){var r={};for(var n in t){var o="",i=t[n],a=typeof i;if(e.isPrimitive(i))o=i.toString();else if(null===i||"undefined"===a)o="";else{if("function"===a){c.info("key: "+n+" was function; will not serialize");continue}var s=e.isArray(i)?i:e.extractObject(i);try{o=e.isPrimitive(s)?s:JSON.stringify(s)}catch(e){o=i.constructor.name.toString()+" (Error: "+e.message+")",c.info("key: "+n+", could not be serialized")}}r[n]=o.substring(0,e.MAX_PROPERTY_LENGTH)}return r}c.info("Invalid properties dropped from payload")},e.canIncludeCorrelationHeader=function(e,t){var r=e&&e.config&&e.config.correlationHeaderExcludedDomains;if(!r||0==r.length||!t)return!0;for(var n=0;n<r.length;n++)if(new RegExp(r[n].replace(/\./g,".").replace(/\*/g,".*")).test(a.parse(t).hostname))return!1;return!0},e.getCorrelationContextTarget=function(e,t){var r=e.headers&&e.headers[l.requestContextHeader];if(r)for(var n=r.split(","),o=0;o<n.length;++o){var i=n[o].split("=");if(2==i.length&&i[0]==t)return i[1]}},e.makeRequest=function(t,r,s,l){r&&0===r.indexOf("//")&&(r="https:"+r);var u=a.parse(r),p=n({},s,{host:u.hostname,port:u.port,path:u.pathname}),d=void 0;if("https:"===u.protocol&&(d=t.proxyHttpsUrl||void 0),"http:"===u.protocol&&(d=t.proxyHttpUrl||void 0),d){0===d.indexOf("//")&&(d="http:"+d);var h=a.parse(d);"https:"===h.protocol?(c.info("Proxies that use HTTPS are not supported"),d=void 0):p=n({},p,{host:h.hostname,port:h.port||"80",path:r,headers:n({},p.headers,{Host:u.hostname})})}var m="https:"===u.protocol&&!d;return m&&void 0!==t.httpsAgent?p.agent=t.httpsAgent:m||void 0===t.httpAgent?m&&(p.agent=e.tlsRestrictedAgent):p.agent=t.httpAgent,m?i.request(p,l):o.request(p,l)},e.safeIncludeCorrelationHeader=function(t,r,n){var o;if("string"==typeof n)o=n;else if(n instanceof Array)o=n.join(",");else if(n&&"function"==typeof n.toString)try{o=n.toString()}catch(e){c.warn("Outgoing request-context header could not be read. Correlation of requests may be lost.",e,n)}o?e.addCorrelationIdHeaderFromString(t,r,o):r.setHeader(l.requestContextHeader,l.requestContextSourceKey+"="+t.config.correlationId)},e.addCorrelationIdHeaderFromString=function(e,t,r){var n=r.split(","),o=l.requestContextSourceKey+"=";n.some((function(e){return e.substring(0,o.length)===o}))||t.setHeader(l.requestContextHeader,r+","+l.requestContextSourceKey+"="+e.config.correlationId)},e.MAX_PROPERTY_LENGTH=8192,e.tlsRestrictedAgent=new i.Agent({secureOptions:s.SSL_OP_NO_SSLv2|s.SSL_OP_NO_SSLv3|s.SSL_OP_NO_TLSv1|s.SSL_OP_NO_TLSv1_1}),e}();e.exports=u},4127:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4350),o=r(5290);t.performanceMetricsTelemetryProcessor=function(e,t){switch(t&&t.addDocument(e),e.data.baseType){case o.TelemetryTypeString.Exception:n.countException();break;case o.TelemetryTypeString.Request:var r=e.data.baseData;n.countRequest(r.duration,r.success);break;case o.TelemetryTypeString.Dependency:var i=e.data.baseData;n.countDependency(i.duration,i.success)}return!0}},2037:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5290);function o(e){var t=2147483647,r=5381;if(!e)return 0;for(;e.length<8;)e+=e;for(var n=0;n<e.length;n++)r=((r<<5)+r|0)+e.charCodeAt(n)|0;return(r=r<=-2147483648?t:Math.abs(r))/t*100}t.samplingTelemetryProcessor=function(e,t){var r=e.sampleRate;return null==r||r>=100||!(!e.data||n.TelemetryType.Metric!==n.baseTypeToTelemetryType(e.data.baseType))||(t.correlationContext&&t.correlationContext.operation?o(t.correlationContext.operation.id)<r:100*Math.random()<r)},t.getSamplingHashCode=o},9428:(e,t,r)=>{"use strict";function n(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}Object.defineProperty(t,"__esModule",{value:!0}),n(r(2037)),n(r(4127))},9574:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(894),i=r(6281),a=r(6639),s=r(4350),c=r(8723),l=r(731),u=r(9962),p=r(5282),d=r(3668),h=r(1629);t.TelemetryClient=r(1259),t.Contracts=r(5290),function(e){e[e.AI=0]="AI",e[e.AI_AND_W3C=1]="AI_AND_W3C"}(n=t.DistributedTracingModes||(t.DistributedTracingModes={}));var m,f,g,y,v,b,w,S,P,E=!0,D=!1,T=!0,x=!0,_=!0,C=!0,j=!0,I=!0,N=!1,A=!0,R=void 0,F=void 0,k=!1;function O(){return t.defaultClient?(k=!0,g.enable(E,D),y.enable(T),v.enable(x),b.enable(A,f),w.useAutoCorrelation(I,m),w.enable(_),S.enable(C),t.liveMetricsClient&&N&&t.liveMetricsClient.enable(N)):p.warn("Start cannot be called before setup"),L}t.setup=function(e){return t.defaultClient?p.info("The default client is already setup"):(t.defaultClient=new t.TelemetryClient(e),g=new i(t.defaultClient),y=new a(t.defaultClient),v=new s(t.defaultClient),w=new l(t.defaultClient),S=new c(t.defaultClient),b||(b=new h.AutoCollectNativePerformance(t.defaultClient))),t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(j,R,F),L},t.start=O,t.getCorrelationContext=function(){return I?o.CorrelationContextManager.getCurrentContext():null},t.wrapWithCorrelationContext=function(e){return o.CorrelationContextManager.wrapCallback(e)};var L=function(){function e(){}return e.setDistributedTracingMode=function(t){return u.w3cEnabled=t===n.AI_AND_W3C,e},e.setAutoCollectConsole=function(t,r){return void 0===r&&(r=!1),E=t,D=r,k&&g.enable(t,r),e},e.setAutoCollectExceptions=function(t){return T=t,k&&y.enable(t),e},e.setAutoCollectPerformance=function(t,r){void 0===r&&(r=!0),x=t;var n=h.AutoCollectNativePerformance.parseEnabled(r);return A=n.isEnabled,f=n.disabledMetrics,k&&(v.enable(t),b.enable(n.isEnabled,n.disabledMetrics)),e},e.setAutoCollectRequests=function(t){return _=t,k&&w.enable(t),e},e.setAutoCollectDependencies=function(t){return C=t,k&&S.enable(t),e},e.setAutoDependencyCorrelation=function(t,r){return I=t,m=r,k&&w.useAutoCorrelation(t,r),e},e.setUseDiskRetryCaching=function(r,n,o){return j=r,R=n,F=o,t.defaultClient&&t.defaultClient.channel&&t.defaultClient.channel.setUseDiskRetryCaching(r,n,o),e},e.setInternalLogging=function(t,r){return void 0===t&&(t=!1),void 0===r&&(r=!0),p.enableDebug=t,p.disableWarnings=!r,e},e.setSendLiveMetrics=function(r){return void 0===r&&(r=!1),t.defaultClient?(!t.liveMetricsClient&&r?(t.liveMetricsClient=new d(t.defaultClient.config.instrumentationKey),P=new s(t.liveMetricsClient,1e3,!0),t.liveMetricsClient.addCollector(P),t.defaultClient.quickPulseClient=t.liveMetricsClient):t.liveMetricsClient&&t.liveMetricsClient.enable(r),N=r,e):(p.warn("Live metrics client cannot be setup without the default client"),e)},e.start=O,e}();t.Configuration=L,t.dispose=function(){t.defaultClient=null,k=!1,g&&g.dispose(),y&&y.dispose(),v&&v.dispose(),b&&b.dispose(),w&&w.dispose(),S&&S.dispose(),t.liveMetricsClient&&(t.liveMetricsClient.enable(!1),N=!1,t.liveMetricsClient=void 0)}},9822:(e,t,r)=>{"use strict";const n=process.binding("async_wrap"),o=n.Providers.TIMERWRAP,i={nextTick:r(3269),promise:r(9565),timers:r(7190)},a=new Set;function s(){this.enabled=!1,this.counter=0}function c(){const e=this.initFns=[],t=this.preFns=[],r=this.postFns=[],n=this.destroyFns=[];this.init=function(t,r,n,i){if(r!==o)for(const o of e)o(t,this,r,n,i);else a.add(t)},this.pre=function(e){if(!a.has(e))for(const r of t)r(e,this)},this.post=function(e,t){if(!a.has(e))for(const n of r)n(e,this,t)},this.destroy=function(e){if(a.has(e))a.delete(e);else for(const t of n)t(e)}}function l(e,t){const r=e.indexOf(t);-1!==r&&e.splice(r,1)}function u(){this._state=new s,this._hooks=new c,this.version=r(1910).i8,this.providers=n.Providers;for(const e of Object.keys(i))i[e].call(this);process.env.hasOwnProperty("NODE_ASYNC_HOOK_WARNING")&&console.warn("warning: you are using async-hook-jl which is unstable."),n.setupHooks({init:this._hooks.init,pre:this._hooks.pre,post:this._hooks.post,destroy:this._hooks.destroy})}c.prototype.add=function(e){e.init&&this.initFns.push(e.init),e.pre&&this.preFns.push(e.pre),e.post&&this.postFns.push(e.post),e.destroy&&this.destroyFns.push(e.destroy)},c.prototype.remove=function(e){e.init&&l(this.initFns,e.init),e.pre&&l(this.preFns,e.pre),e.post&&l(this.postFns,e.post),e.destroy&&l(this.destroyFns,e.destroy)},e.exports=u,u.prototype.addHooks=function(e){this._hooks.add(e)},u.prototype.removeHooks=function(e){this._hooks.remove(e)},u.prototype.enable=function(){this._state.enabled=!0,n.enable()},u.prototype.disable=function(){this._state.enabled=!1,n.disable()}},3223:(e,t,r)=>{"use strict";const n=r(9822);if(global._asyncHook){if(global._asyncHook.version!==r(1910).i8)throw new Error("Conflicting version of async-hook-jl found");e.exports=global._asyncHook}else r(2512).filter.attach((function(e,t){return t.filter((function(e){const t=e.getFileName();return!(t&&t.slice(0,__dirname.length)===__dirname)}))})),e.exports=global._asyncHook=new n},1910:e=>{"use strict";e.exports={i8:"1.7.6"}},3269:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,r=this._state,n=process.nextTick;process.nextTick=function(){if(!r.enabled)return n.apply(process,arguments);const o=new Array(arguments.length);for(let e=0;e<arguments.length;e++)o[e]=arguments[e];const i=o[0];if("function"!=typeof i)throw new TypeError("callback is not a function");const a=new t,s=--r.counter;return e.init.call(a,s,0,null,null),o[0]=function(){e.pre.call(a,s);let t=!0;try{i.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(a,s,!0),e.destroy.call(null,s)}))}e.post.call(a,s,!1),e.destroy.call(null,s)},n.apply(process,o)}}},9565:e=>{"use strict";function t(){}e.exports=function(){const e=this._hooks,r=this._state,n=global.Promise,o=n.prototype.then;function i(t,r,n,o){return"function"!=typeof t?o?function(t){return function(r){return e.destroy.call(null,t),r}}(n):function(t){return function(r){throw e.destroy.call(null,t),r}}(n):function(){e.pre.call(r,n);try{return t.apply(this,arguments)}finally{e.post.call(r,n,!1),e.destroy.call(null,n)}}}n.prototype.then=function(n,a){if(!r.enabled)return o.call(this,n,a);const s=new t,c=--r.counter;return e.init.call(s,c,0,null,null),o.call(this,i(n,s,c,!0),i(a,s,c,!1))}}},7190:(e,t,r)=>{"use strict";const n=r(8213);function o(){}function i(){}function a(){}const s=new Map,c=new Map,l=new Map;let u=null,p=!1;function d(e,t,r,o,i,a,s){const c=n[r],l=n[o];n[r]=function(){if(!t.enabled)return c.apply(n,arguments);const r=new Array(arguments.length);for(let e=0;e<arguments.length;e++)r[e]=arguments[e];const o=r[0];if("function"!=typeof o)throw new TypeError('"callback" argument must be a function');const l=new i,d=--t.counter;let h;return e.init.call(l,d,0,null,null),r[0]=function(){u=h,e.pre.call(l,d);let t=!0;try{o.apply(this,arguments),t=!1}finally{t&&process.listenerCount("uncaughtException")>0&&process.once("uncaughtException",(function(){e.post.call(l,d,!0),a.delete(h),e.destroy.call(null,d)}))}e.post.call(l,d,!1),u=null,(s||p)&&(p=!1,a.delete(h),e.destroy.call(null,d))},h=c.apply(n,r),a.set(h,d),h},n[o]=function(t){if(u===t&&null!==t)p=!0;else if(a.has(t)){const r=a.get(t);a.delete(t),e.destroy.call(null,r)}l.apply(n,arguments)}}e.exports=function(){d(this._hooks,this._state,"setTimeout","clearTimeout",o,s,!0),d(this._hooks,this._state,"setInterval","clearInterval",i,c,!1),d(this._hooks,this._state,"setImmediate","clearImmediate",a,l,!0),global.setTimeout=n.setTimeout,global.setInterval=n.setInterval,global.setImmediate=n.setImmediate,global.clearTimeout=n.clearTimeout,global.clearInterval=n.clearInterval,global.clearImmediate=n.clearImmediate}},8286:e=>{"use strict";e.exports=(e,t)=>class extends e{constructor(e){var r,n;super((function(e,i){r=this,n=[function(r){return t(o,!1),e(r)},function(e){return t(o,!1),i(e)}]}));var o=this;try{e.apply(r,n)}catch(e){n[1](e)}return o}}},9090:(e,t,r)=>{var n,o,i=r(6372).wrap,a=[],s=0,c=!1,l=[];function u(e,t){var r=e.length,n=t.length,o=[];if(0===r&&0===n)return o;for(var i=0;i<r;i++)o[i]=e[i];if(0===n)return o;for(var a=0;a<n;a++){var s=!0;for(i=0;i<r;i++)if(e[i].uid===t[a].uid){s=!1;break}s&&o.push(t[a])}return o}if(process._fatalException){var p,d=!1;n=function(e){var t=a.length;if(d||0===t)return!1;var r=!1;d=!0;for(var n=0;n<t;++n){var o=a[n];if(0!=(8&o.flags)){var i=p&&p[o.uid];r=o.error(i,e)||r}}return d=!1,l.length>0&&(a=l.pop()),p=void 0,r&&!c},o=function(e,t,r){var n=[];c=!0;for(var o=0;o<r;++o){var i=t[o];if(n[i.uid]=i.data,0!=(1&i.flags)){var s=i.create(i.data);void 0!==s&&(n[i.uid]=s)}}return c=!1,function(){p=n,l.push(a),a=u(t,a),c=!0;for(var o=0;o<r;++o)(2&t[o].flags)>0&&t[o].before(this,n[t[o].uid]);c=!1;var i=e.apply(this,arguments);for(c=!0,o=0;o<r;++o)(4&t[o].flags)>0&&t[o].after(this,n[t[o].uid]);return c=!1,a=l.pop(),p=void 0,i}},i(process,"_fatalException",(function(e){return function(t){return n(t)||e(t)}}))}else{var h=!1;n=function(e){if(h)throw e;for(var t=!1,r=a.length,n=0;n<r;++n){var o=a[n];0!=(8&o.flags)&&(t=o.error(null,e)||t)}if(!t&&c)throw e},o=function(e,t,r){var o=[];c=!0;for(var i=0;i<r;++i){var s=t[i];if(o[s.uid]=s.data,0!=(1&s.flags)){var p=s.create(s.data);void 0!==p&&(o[s.uid]=p)}}return c=!1,function(){var i,s=!1,p=!1;l.push(a),a=u(t,a),c=!0;for(var d=0;d<r;++d)(2&t[d].flags)>0&&t[d].before(this,o[t[d].uid]);c=!1;try{i=e.apply(this,arguments)}catch(e){for(s=!0,d=0;d<r;++d)if(0!=(8&a[d].flags))try{p=a[d].error(o[t[d].uid],e)||p}catch(e){throw h=!0,e}if(!p)throw process.removeListener("uncaughtException",n),process._originalNextTick((function(){process.addListener("uncaughtException",n)})),e}finally{if(!s||p){for(c=!0,d=0;d<r;++d)(4&t[d].flags)>0&&t[d].after(this,o[t[d].uid]);c=!1}a=l.pop()}return i}},process.addListener("uncaughtException",n)}function m(e,t){"function"==typeof e.create&&(this.create=e.create,this.flags|=1),"function"==typeof e.before&&(this.before=e.before,this.flags|=2),"function"==typeof e.after&&(this.after=e.after,this.flags|=4),"function"==typeof e.error&&(this.error=e.error,this.flags|=8),this.uid=++s,this.data=void 0===t?null:t}function f(e,t){if("object"!=typeof e||!e)throw new TypeError("callbacks argument must be an object");return e instanceof m?e:new m(e,t)}m.prototype.create=void 0,m.prototype.before=void 0,m.prototype.after=void 0,m.prototype.error=void 0,m.prototype.data=void 0,m.prototype.uid=0,m.prototype.flags=0,process.createAsyncListener=f,process.addAsyncListener=function(e,t){var r;r=e instanceof m?e:f(e,t);for(var n=!1,o=0;o<a.length;o++)if(r===a[o]){n=!0;break}return n||a.push(r),r},process.removeAsyncListener=function(e){for(var t=0;t<a.length;t++)if(e===a[t]){a.splice(t,1);break}},e.exports=function(e){var t=a.length;if(0===t)return e;for(var r=a.slice(),n=0;n<t;++n)if(r[n].flags>0)return o(e,r,t);return function(e,t,r){c=!0;for(var n=0;n<r;++n){var o=t[n];o.create&&o.create(o.data)}return c=!1,function(){l.push(a),a=u(t,a);var r=e.apply(this,arguments);return a=l.pop(),r}}(e,r,t)}},7645:(e,t,r)=>{"use strict";if(process.addAsyncListener)throw new Error("Don't require polyfill unless needed");var n=r(6372),o=r(2249),i=n.wrap,a=n.massWrap,s=r(9090),c=r(1669),l=o.gte(process.version,"6.0.0"),u=o.gte(process.version,"7.0.0"),p=o.gte(process.version,"8.0.0"),d=o.gte(process.version,"11.0.0"),h=r(1631);function m(e){return function(){this.on("connection",(function(e){e._handle&&(e._handle.onread=s(e._handle.onread))}));try{return e.apply(this,arguments)}finally{this._handle&&this._handle.onconnection&&(this._handle.onconnection=s(this._handle.onconnection))}}}function f(e){if(e&&e._handle){var t=e._handle;t._originalOnread||(t._originalOnread=t.onread),t.onread=s(t._originalOnread)}}u&&!h._normalizeArgs?h._normalizeArgs=function(e){if(0===e.length)return[{},null];var t,r,n=e[0],o={};"object"==typeof n&&null!==n?o=n:"string"==typeof(t=n)&&!1===(r=t,(r=Number(r))>=0&&r)?o.path=n:(o.port=n,e.length>1&&"string"==typeof e[1]&&(o.host=e[1]));var i=e[e.length-1];return"function"!=typeof i?[o,null]:[o,i]}:u||h._normalizeConnectArgs||(h._normalizeConnectArgs=function(e){var t,r={};"object"==typeof e[0]&&null!==e[0]?r=e[0]:"string"==typeof e[0]&&!1===(t=e[0],(t=Number(t))>=0&&t)?r.path=e[0]:(r.port=e[0],"string"==typeof e[1]&&(r.host=e[1]));var n=e[e.length-1];return"function"==typeof n?[r,n]:[r]}),"_setUpListenHandle"in h.Server.prototype?i(h.Server.prototype,"_setUpListenHandle",m):i(h.Server.prototype,"_listen2",m),i(h.Socket.prototype,"connect",(function(e){return function(){var t;(t=p&&Array.isArray(arguments[0])&&Object.getOwnPropertySymbols(arguments[0]).length>0?arguments[0]:u?h._normalizeArgs(arguments):h._normalizeConnectArgs(arguments))[1]&&(t[1]=s(t[1]));var r=e.apply(this,t);return f(this),r}}));var g=r(8605);i(g.Agent.prototype,"addRequest",(function(e){return function(t){var r=t.onSocket;return t.onSocket=s((function(e){return f(e),r.apply(this,arguments)})),e.apply(this,arguments)}}));var y=r(3129);function v(e){Array.isArray(e.stdio)&&e.stdio.forEach((function(e){e&&e._handle&&(e._handle.onread=s(e._handle.onread),i(e._handle,"close",A))})),e._handle&&(e._handle.onexit=s(e._handle.onexit))}y.ChildProcess?i(y.ChildProcess.prototype,"spawn",(function(e){return function(){var t=e.apply(this,arguments);return v(this),t}})):a(y,["execFile","fork","spawn"],(function(e){return function(){var t=e.apply(this,arguments);return v(t),t}})),process._fatalException||(process._originalNextTick=process.nextTick);var b=[];process._nextDomainTick&&b.push("_nextDomainTick"),process._tickDomainCallback&&b.push("_tickDomainCallback"),a(process,b,N),i(process,"nextTick",A);var w=["setTimeout","setInterval"];global.setImmediate&&w.push("setImmediate");var S=r(8213),P=global.setTimeout===S.setTimeout;a(S,w,A),P&&a(global,w,A);var E=r(881);a(E,["lookup","resolve","resolve4","resolve6","resolveCname","resolveMx","resolveNs","resolveTxt","resolveSrv","reverse"],N),E.resolveNaptr&&i(E,"resolveNaptr",N);var D,T,x=r(5747);a(x,["watch","rename","truncate","chown","fchown","chmod","fchmod","stat","lstat","fstat","link","symlink","readlink","realpath","unlink","rmdir","mkdir","readdir","close","open","utimes","futimes","fsync","write","read","readFile","writeFile","appendFile","watchFile","unwatchFile","exists"],N),x.lchown&&i(x,"lchown",N),x.lchmod&&i(x,"lchmod",N),x.ftruncate&&i(x,"ftruncate",N);try{D=r(8761)}catch(e){}if(D&&D.Deflate&&D.Deflate.prototype){var _=Object.getPrototypeOf(D.Deflate.prototype);_._transform?i(_,"_transform",N):_.write&&_.flush&&_.end&&a(_,["write","flush","end"],N)}try{T=r(6417)}catch(e){}if(T){var C=["pbkdf2","randomBytes"];d||C.push("pseudoRandomBytes"),a(T,C,N)}var j=!!global.Promise&&"function Promise() { [native code] }"===Promise.toString()&&"function toString() { [native code] }"===Promise.toString.toString();if(j){var I=process.addAsyncListener({create:function(){j=!1}});global.Promise.resolve(!0).then((function(){j=!1})),process.removeAsyncListener(I)}function N(e){var t=function(){var t,r=arguments.length-1;if("function"==typeof arguments[r]){t=Array(arguments.length);for(var n=0;n<arguments.length-1;n++)t[n]=arguments[n];t[r]=s(arguments[r])}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof n&&(n=s(n)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof o&&(o=s(o)),e.call(this,r,n,o))};case 4:return function(r,n,o,i){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof i&&(i=s(i)),e.call(this,r,n,o,i))};case 5:return function(r,n,o,i,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof a&&(a=s(a)),e.call(this,r,n,o,i,a))};case 6:return function(r,n,o,i,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof c&&(c=s(c)),e.call(this,r,n,o,i,a,c))};default:return t}}function A(e){var t=function(){var t;if("function"==typeof arguments[0]){(t=Array(arguments.length))[0]=s(arguments[0]);for(var r=1;r<arguments.length;r++)t[r]=arguments[r]}return e.apply(this,t||arguments)};switch(e.length){case 1:return function(r){return 1!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r))};case 2:return function(r,n){return 2!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r,n))};case 3:return function(r,n,o){return 3!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r,n,o))};case 4:return function(r,n,o,i){return 4!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r,n,o,i))};case 5:return function(r,n,o,i,a){return 5!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r,n,o,i,a))};case 6:return function(r,n,o,i,a,c){return 6!==arguments.length?t.apply(this,arguments):("function"==typeof r&&(r=s(r)),e.call(this,r,n,o,i,a,c))};default:return t}}j&&function(){var e=global.Promise;function t(r){if(!(this instanceof t))return e(r);if("function"!=typeof r)return new e(r);var o,i,a=new e((function(e,t){o=this,i=[function(t){return n(a,!1),e(t)},function(e){return n(a,!1),t(e)}]}));a.__proto__=t.prototype;try{r.apply(o,i)}catch(e){i[1](e)}return a}function n(e,t){e.__asl_wrapper&&!t||(e.__asl_wrapper=s(o))}function o(t,r,i,a){var s;try{return{returnVal:s=r.call(t,i),error:!1}}catch(e){return{errorVal:e,error:!0}}finally{s instanceof e?a.__asl_wrapper=function(){return(s.__asl_wrapper||o).apply(this,arguments)}:n(a,!0)}}function a(e){return function(){var t=this,r=e.apply(t,Array.prototype.map.call(arguments,n));return r.__asl_wrapper=function(e,n,i,a){return t.__asl_wrapper?(t.__asl_wrapper(e,(function(){}),null,r),r.__asl_wrapper(e,n,i,a)):o(e,n,i,a)},r;function n(e){return"function"!=typeof e?e:s((function(n){var i=(t.__asl_wrapper||o)(this,e,n,r);if(i.error)throw i.errorVal;return i.returnVal}))}}}c.inherits(t,e),i(e.prototype,"then",a),e.prototype.chain&&i(e.prototype,"chain",a),l?global.Promise=r(8286)(e,n):(["all","race","reject","resolve","accept","defer"].forEach((function(r){"function"==typeof e[r]&&(t[r]=e[r])})),global.Promise=t)}()},2249:(e,t)=>{var r;t=e.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=0,s=a++;i[s]="0|[1-9]\\d*";var c=a++;i[c]="[0-9]+";var l=a++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=a++;i[u]="("+i[s]+")\\.("+i[s]+")\\.("+i[s]+")";var p=a++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var d=a++;i[d]="(?:"+i[s]+"|"+i[l]+")";var h=a++;i[h]="(?:"+i[c]+"|"+i[l]+")";var m=a++;i[m]="(?:-("+i[d]+"(?:\\."+i[d]+")*))";var f=a++;i[f]="(?:-?("+i[h]+"(?:\\."+i[h]+")*))";var g=a++;i[g]="[0-9A-Za-z-]+";var y=a++;i[y]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var v=a++,b="v?"+i[u]+i[m]+"?"+i[y]+"?";i[v]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[f]+"?"+i[y]+"?",S=a++;i[S]="^"+w+"$";var P=a++;i[P]="((?:<|>)?=?)";var E=a++;i[E]=i[c]+"|x|X|\\*";var D=a++;i[D]=i[s]+"|x|X|\\*";var T=a++;i[T]="[v=\\s]*("+i[D]+")(?:\\.("+i[D]+")(?:\\.("+i[D]+")(?:"+i[m]+")?"+i[y]+"?)?)?";var x=a++;i[x]="[v=\\s]*("+i[E]+")(?:\\.("+i[E]+")(?:\\.("+i[E]+")(?:"+i[f]+")?"+i[y]+"?)?)?";var _=a++;i[_]="^"+i[P]+"\\s*"+i[T]+"$";var C=a++;i[C]="^"+i[P]+"\\s*"+i[x]+"$";var j=a++;i[j]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=a++;i[I]="(?:~>?)";var N=a++;i[N]="(\\s*)"+i[I]+"\\s+",o[N]=new RegExp(i[N],"g");var A=a++;i[A]="^"+i[I]+i[T]+"$";var R=a++;i[R]="^"+i[I]+i[x]+"$";var F=a++;i[F]="(?:\\^)";var k=a++;i[k]="(\\s*)"+i[F]+"\\s+",o[k]=new RegExp(i[k],"g");var O=a++;i[O]="^"+i[F]+i[T]+"$";var L=a++;i[L]="^"+i[F]+i[x]+"$";var q=a++;i[q]="^"+i[P]+"\\s*("+w+")$|^$";var M=a++;i[M]="^"+i[P]+"\\s*("+b+")$|^$";var B=a++;i[B]="(\\s*)"+i[P]+"\\s*("+w+"|"+i[T]+")",o[B]=new RegExp(i[B],"g");var V=a++;i[V]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=a++;i[$]="^\\s*("+i[x]+")\\s+-\\s+("+i[x]+")\\s*$";var U=a++;i[U]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)r(H,i[H]),o[H]||(o[H]=new RegExp(i[H]));function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[v]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[v]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=G,t.valid=function(e,t){var r=G(e,t);return r?r.version:null},t.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=X;var W=/^[0-9]+$/;function X(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Q(e,t,r){return new z(e,r).compare(new z(t,r))}function K(e,t,r){return Q(e,t,r)>0}function Y(e,t,r){return Q(e,t,r)<0}function J(e,t,r){return 0===Q(e,t,r)}function Z(e,t,r){return 0!==Q(e,t,r)}function ee(e,t,r){return Q(e,t,r)>=0}function te(e,t,r){return Q(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return J(e,r,n);case"!=":return Z(e,r,n);case">":return K(e,r,n);case">=":return ee(e,r,n);case"<":return Y(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,r){return Q(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=K,t.lt=Y,t.eq=J,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,o,i,a,s,c,l,u,p,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(c)?"":ae(l)?"<"+(+c+1)+".0.0":ae(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+s)).trim()}function ce(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function ue(e,t,r,n){var o,i,a,s,c;switch(e=new z(e,n),t=new ie(t,n),r){case">":o=K,i=te,a=Y,s=">",c=">=";break;case"<":o=Y,i=ee,a=K,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,d=null;if(u.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),p=p||e,d=d||e,o(e.semver,p.semver,n)?p=e:a(e.semver,d.semver,n)&&(d=e)})),p.operator===s||p.operator===c)return!1;if((!d.operator||d.operator===s)&&i(e,d.semver))return!1;if(d.operator===c&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[q]:o[M],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new z(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||c},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[$]:o[V];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[N],"$1~")).replace(o[k],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[M],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[L]:o[O];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[R]:o[A];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[C]:o[_];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var c=ae(o),l=c||ae(i),u=l||ae(a);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(i=0),a=0,">"===n?(n=">=",l?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",l?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):l?t=">="+o+".0.0 <"+(+o+1)+".0.0":u&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[U],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new z("0.0.0");if(e.test(r))return r;if(r=new z("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!K(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return ue(e,t,"<",r)},t.gtr=function(e,t,r){return ue(e,t,">",r)},t.outside=ue,t.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(o[j]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},6744:(e,t,r)=>{"use strict";const n=r(3349),o=r(7529),i=r(8050),a=r(4339),s=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=s.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(s.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};s.parse=(e,t={})=>a(e,t),s.stringify=(e,t={})=>n("string"==typeof e?s.parse(e,t):e,t),s.compile=(e,t={})=>("string"==typeof e&&(e=s.parse(e,t)),o(e,t)),s.expand=(e,t={})=>{"string"==typeof e&&(e=s.parse(e,t));let r=i(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},s.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?s.compile(e,t):s.expand(e,t),e.exports=s},7529:(e,t,r)=>{"use strict";const n=r(2664),o=r(3083);e.exports=(e,t={})=>{let r=(e,i={})=>{let a=o.isInvalidBrace(i),s=!0===e.invalid&&!0===t.escapeInvalid,c=!0===a||!0===s,l=!0===t.escapeInvalid?"\\":"",u="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return c?l+e.value:"(";if("close"===e.type)return c?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":c?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=o.reduce(e.nodes),i=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==i.length)return r.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let t of e.nodes)u+=r(t,e);return u};return r(e)}},6611:e=>{"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},8050:(e,t,r)=>{"use strict";const n=r(2664),o=r(3349),i=r(3083),a=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?i.flatten(t).map((e=>`{${e}}`)):t;for(let o of e)if(Array.isArray(o))for(let e of o)n.push(a(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?a(o,e,r):o+e);return i.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,s=(e,c={})=>{e.queue=[];let l=c,u=c.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,u=l.queue;if(e.invalid||e.dollar)return void u.push(a(u.pop(),o(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void u.push(a(u.pop(),["{}"]));if(e.nodes&&e.ranges>0){let s=i.reduce(e.nodes);if(i.exceedsLimit(...s,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let c=n(...s,t);return 0===c.length&&(c=o(e,t)),u.push(a(u.pop(),c)),void(e.nodes=[])}let p=i.encloseBrace(e),d=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,d=h.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?d.push(a(d.pop(),r.value)):r.nodes&&s(r,e):u.push(a(u.pop(),d,p)):(1===t&&d.push(""),d.push(""))}return d};return i.flatten(s(e))}},4339:(e,t,r)=>{"use strict";const n=r(3349),{MAX_LENGTH:o,CHAR_BACKSLASH:i,CHAR_BACKTICK:a,CHAR_COMMA:s,CHAR_DOT:c,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:u,CHAR_LEFT_CURLY_BRACE:p,CHAR_RIGHT_CURLY_BRACE:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:m,CHAR_DOUBLE_QUOTE:f,CHAR_SINGLE_QUOTE:g,CHAR_NO_BREAK_SPACE:y,CHAR_ZERO_WIDTH_NOBREAK_SPACE:v}=r(6611);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let w,S={type:"root",input:e,nodes:[]},P=[S],E=S,D=S,T=0,x=e.length,_=0,C=0;const j=()=>e[_++],I=e=>{if("text"===e.type&&"dot"===D.type&&(D.type="text"),!D||"text"!==D.type||"text"!==e.type)return E.nodes.push(e),e.parent=E,e.prev=D,D=e,e;D.value+=e.value};for(I({type:"bos"});_<x;)if(E=P[P.length-1],w=j(),w!==v&&w!==y)if(w!==i)if(w!==m)if(w!==h)if(w!==l)if(w!==u)if(w!==f&&w!==g&&w!==a)if(w!==p)if(w!==d)if(w===s&&C>0){if(E.ranges>0){E.ranges=0;let e=E.nodes.shift();E.nodes=[e,{type:"text",value:n(E)}]}I({type:"comma",value:w}),E.commas++}else if(w===c&&C>0&&0===E.commas){let e=E.nodes;if(0===C||0===e.length){I({type:"text",value:w});continue}if("dot"===D.type){if(E.range=[],D.value+=w,D.type="range",3!==E.nodes.length&&5!==E.nodes.length){E.invalid=!0,E.ranges=0,D.type="text";continue}E.ranges++,E.args=[];continue}if("range"===D.type){e.pop();let t=e[e.length-1];t.value+=D.value+w,D=t,E.ranges--;continue}I({type:"dot",value:w})}else I({type:"text",value:w});else{if("brace"!==E.type){I({type:"text",value:w});continue}let e="close";E=P.pop(),E.close=!0,I({type:e,value:w}),C--,E=P[P.length-1]}else{C++;let e=D.value&&"$"===D.value.slice(-1)||!0===E.dollar;E=I({type:"brace",open:!0,close:!1,dollar:e,depth:C,commas:0,ranges:0,nodes:[]}),P.push(E),I({type:"open",value:w})}else{let e,r=w;for(!0!==t.keepQuotes&&(w="");_<x&&(e=j());)if(e!==i){if(e===r){!0===t.keepQuotes&&(w+=e);break}w+=e}else w+=e+j();I({type:"text",value:w})}else{if("paren"!==E.type){I({type:"text",value:w});continue}E=P.pop(),I({type:"text",value:w}),E=P[P.length-1]}else E=I({type:"paren",nodes:[]}),P.push(E),I({type:"text",value:w});else{let e;for(T++;_<x&&(e=j());)if(w+=e,e!==h)if(e!==i){if(e===m&&(T--,0===T))break}else w+=j();else T++;I({type:"text",value:w})}else I({type:"text",value:"\\"+w});else I({type:"text",value:(t.keepEscaping?w:"")+j()});do{if(E=P.pop(),"root"!==E.type){E.nodes.forEach((e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)}));let e=P[P.length-1],t=e.nodes.indexOf(E);e.nodes.splice(t,1,...E.nodes)}}while(P.length>0);return I({type:"eos"}),S}},3349:(e,t,r)=>{"use strict";const n=r(3083);e.exports=(e,t={})=>{let r=(e,o={})=>{let i=t.escapeInvalid&&n.isInvalidBrace(o),a=!0===e.invalid&&!0===t.escapeInvalid,s="";if(e.value)return(i||a)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)s+=r(t);return s};return r(e)}},3083:(e,t)=>{"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find((e=>e.type===t)),t.exceedsLimit=(e,r,n=1,o)=>!1!==o&&!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=o,t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0),t.isInvalidBrace=e=>!("brace"!==e.type||!0!==e.invalid&&!e.dollar&&(e.commas>>0+e.ranges>>0!=0&&!0===e.open&&!0===e.close||(e.invalid=!0,0))),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||!0===e.open||!0===e.close,t.reduce=e=>e.reduce(((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e)),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let o=e[n];Array.isArray(o)?r(o,t):void 0!==o&&t.push(o)}return t};return r(e),t}},4046:(e,t,r)=>{"use strict";const n=r(1669),o=r(2357),i=r(9867),a=r(3223),s="error@context",c=[];for(let e in a.providers)c[a.providers[e]]=e;const l=process.env.DEBUG_CLS_HOOKED;let u=-1;function p(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map}function d(e){return process.namespaces[e]}function h(e){let t=d(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function m(e){process.env.DEBUG&&process._rawDebug(e)}function f(e){return e?"function"==typeof e?e.name?e.name:(e.toString().trim().match(/^function\s*([^\s(]+)/)||[])[1]:e.constructor&&e.constructor.name?e.constructor.name:void 0:e}if(e.exports={getNamespace:d,createNamespace:function(e){o.ok(e,"namespace must be given a name."),l&&m("CREATING NAMESPACE "+e);let t=new p(e);return t.id=u,a.addHooks({init(r,o,i,a,s){u=r,a?(t._contexts.set(r,t._contexts.get(a)),l&&m("PARENTID: "+e+" uid:"+r+" parent:"+a+" provider:"+i)):t._contexts.set(u,t.active),l&&m("INIT "+e+" uid:"+r+" parent:"+a+" provider:"+c[i]+" active:"+n.inspect(t.active,!0))},pre(r,o){u=r;let i=t._contexts.get(r);i?(l&&m(" PRE "+e+" uid:"+r+" handle:"+f(o)+" context:"+n.inspect(i)),t.enter(i)):l&&m(" PRE MISSING CONTEXT "+e+" uid:"+r+" handle:"+f(o))},post(r,o){u=r;let i=t._contexts.get(r);i?(l&&m(" POST "+e+" uid:"+r+" handle:"+f(o)+" context:"+n.inspect(i)),t.exit(i)):l&&m(" POST MISSING CONTEXT "+e+" uid:"+r+" handle:"+f(o))},destroy(r){u=r,l&&m("DESTROY "+e+" uid:"+r+" context:"+n.inspect(t._contexts.get(u))+" active:"+n.inspect(t.active,!0)),t._contexts.delete(r)}}),process.namespaces[e]=t,t},destroyNamespace:h,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){h(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:s},p.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return l&&m("    SETTING KEY:"+e+"="+t+" in ns:"+this.name+" uid:"+u+" active:"+n.inspect(this.active,!0)),this.active[e]=t,t},p.prototype.get=function(e){if(this.active)return l&&m("    GETTING KEY:"+e+"="+this.active[e]+" "+this.name+" uid:"+u+" active:"+n.inspect(this.active,!0)),this.active[e];l&&m("    GETTING KEY:"+e+"=undefined "+this.name+" uid:"+u+" active:"+n.inspect(this.active,!0))},p.prototype.createContext=function(){l&&m("   CREATING Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  active:"+n.inspect(this.active,!0,2,!0));let e=Object.create(this.active?this.active:Object.prototype);return e._ns_name=this.name,e.id=u,l&&m("   CREATED Context: "+this.name+" uid:"+u+" len:"+this._set.length+"  context:"+n.inspect(e,!0,2,!0)),e},p.prototype.run=function(e){let t=this.createContext();this.enter(t);try{return l&&m(" BEFORE RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+n.inspect(t)),e(t),t}catch(e){throw e&&(e[s]=t),e}finally{l&&m(" AFTER RUN: "+this.name+" uid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t)}},p.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},p.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return l&&m(" BEFORE runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(l&&m(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[s]=t,l&&m(" AFTER runPromise: "+this.name+" uid:"+u+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},p.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},p.prototype.enter=function(e){o.ok(e,"context must be provided for entering"),l&&m("  ENTER "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+n.inspect(e)),this._set.push(this.active),this.active=e},p.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),l&&m("  EXIT "+this.name+" uid:"+u+" len:"+this._set.length+" context: "+n.inspect(e)),this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(l&&m("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},p.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;let t=e,r=e["cls@contexts"];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},p.prototype.fromException=function(e){return e[s]},process.namespaces={},a._state&&!a._state.enabled&&a.enable(),l){var g=r(2512);for(var y in g.filter._modifiers)g.filter.deattach(y)}},3964:(e,t,r)=>{"use strict";const n=r(1669),o=r(2357),i=r(9867),a=r(7303),s="error@context",c=process.env.DEBUG_CLS_HOOKED;let l=-1;function u(e){this.name=e,this.active=null,this._set=[],this.id=null,this._contexts=new Map,this._indent=0}function p(e){return process.namespaces[e]}function d(e){let t=p(e);o.ok(t,"can't delete nonexistent namespace! \""+e+'"'),o.ok(t.id,"don't assign to process.namespaces directly! "+n.inspect(t)),process.namespaces[e]=null}function h(...e){c&&process._rawDebug(`${n.format(...e)}`)}e.exports={getNamespace:p,createNamespace:function(e){o.ok(e,"namespace must be given a name."),c&&h(`NS-CREATING NAMESPACE (${e})`);let t=new u(e);return t.id=l,a.createHook({init(r,o,i,s){if(l=a.executionAsyncId(),t.active){if(t._contexts.set(r,t.active),c){h(`${" ".repeat(t._indent<0?0:t._indent)}INIT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(0===l){const i=a.triggerAsyncId(),u=t._contexts.get(i);if(u){if(t._contexts.set(r,u),c){h(`${" ".repeat(t._indent<0?0:t._indent)}INIT USING CONTEXT FROM TRIGGERID [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}else if(c){h(`${" ".repeat(t._indent<0?0:t._indent)}INIT MISSING CONTEXT [${o}] (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}}if(c&&"PROMISE"===o){h(n.inspect(s,{showHidden:!0}));const a=s.parentId;h(`${" ".repeat(t._indent<0?0:t._indent)}INIT RESOURCE-PROMISE [${o}] (${e}) parentId:${a} asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} resource:${s}`)}},before(r){let o;if(l=a.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(c){const i=a.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`),t._indent+=2}t.enter(o)}else if(c){const o=a.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}BEFORE MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} namespace._contexts:${n.inspect(t._contexts,{showHidden:!0,depth:2,colors:!0})}`),t._indent+=2}},after(r){let o;if(l=a.executionAsyncId(),o=t._contexts.get(r)||t._contexts.get(l),o){if(c){const i=a.triggerAsyncId();t._indent-=2;h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}t.exit(o)}else if(c){const i=a.triggerAsyncId();t._indent-=2;h(`${" ".repeat(t._indent<0?0:t._indent)}AFTER MISSING CONTEXT (${e}) asyncId:${r} currentUid:${l} triggerId:${i} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(o)}`)}},destroy(r){if(l=a.executionAsyncId(),c){const o=a.triggerAsyncId();h(`${" ".repeat(t._indent<0?0:t._indent)}DESTROY (${e}) currentUid:${l} asyncId:${r} triggerId:${o} active:${n.inspect(t.active,{showHidden:!0,depth:2,colors:!0})} context:${n.inspect(t._contexts.get(l))}`)}t._contexts.delete(r)}}).enable(),process.namespaces[e]=t,t},destroyNamespace:d,reset:function(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){d(e)})),process.namespaces=Object.create(null)},ERROR_SYMBOL:s},u.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,c&&h(" ".repeat(this._indent<0?0:this._indent)+"CONTEXT-SET KEY:"+e+"="+t+" in ns:"+this.name+" currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),t},u.prototype.get=function(e){if(this.active){if(c){const t=a.executionAsyncId(),r=a.triggerAsyncId(),o=" ".repeat(this._indent<0?0:this._indent);h(o+"CONTEXT-GETTING KEY:"+e+"="+this.active[e]+" ("+this.name+") currentUid:"+l+" active:"+n.inspect(this.active,{showHidden:!0,depth:2,colors:!0})),h(`${o}CONTEXT-GETTING KEY: (${this.name}) ${e}=${this.active[e]} currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} active:${n.inspect(this.active)}`)}return this.active[e]}if(c){const t=a.currentId(),r=a.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-GETTING KEY NO ACTIVE NS: (${this.name}) ${e}=undefined currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length}`)}},u.prototype.createContext=function(){let e=Object.create(this.active?this.active:Object.prototype);if(e._ns_name=this.name,e.id=l,c){const t=a.executionAsyncId(),r=a.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-CREATED Context: (${this.name}) currentUid:${l} asyncHooksCurrentId:${t} triggerId:${r} len:${this._set.length} context:${n.inspect(e,{showHidden:!0,depth:2,colors:!0})}`)}return e},u.prototype.run=function(e){let t=this.createContext();this.enter(t);try{if(c){const e=a.triggerAsyncId(),r=a.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN BEGIN: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} context:${n.inspect(t)}`)}return e(t),t}catch(e){throw e&&(e[s]=t),e}finally{if(c){const e=a.triggerAsyncId(),r=a.executionAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-RUN END: (${this.name}) currentUid:${l} triggerId:${e} asyncHooksCurrentId:${r} len:${this._set.length} ${n.inspect(t)}`)}this.exit(t)}},u.prototype.runAndReturn=function(e){let t;return this.run((function(r){t=e(r)})),t},u.prototype.runPromise=function(e){let t=this.createContext();this.enter(t);let r=e(t);if(!r||!r.then||!r.catch)throw new Error("fn must return a promise.");return c&&h("CONTEXT-runPromise BEFORE: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),r.then((e=>(c&&h("CONTEXT-runPromise AFTER then: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e))).catch((e=>{throw e[s]=t,c&&h("CONTEXT-runPromise AFTER catch: ("+this.name+") currentUid:"+l+" len:"+this._set.length+" "+n.inspect(t)),this.exit(t),e}))},u.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());let r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[s]=t),e}finally{r.exit(t)}}},u.prototype.enter=function(e){if(o.ok(e,"context must be provided for entering"),c){const t=a.executionAsyncId(),r=a.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-ENTER: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}this._set.push(this.active),this.active=e},u.prototype.exit=function(e){if(o.ok(e,"context must be provided for exiting"),c){const t=a.executionAsyncId(),r=a.triggerAsyncId();h(`${" ".repeat(this._indent<0?0:this._indent)}CONTEXT-EXIT: (${this.name}) currentUid:${l} triggerId:${r} asyncHooksCurrentId:${t} len:${this._set.length} ${n.inspect(e)}`)}if(this.active===e)return o.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());let t=this._set.lastIndexOf(e);t<0?(c&&h("??ERROR?? context exiting but not entered - ignoring: "+n.inspect(e)),o.ok(t>=0,"context not currently entered; can't exit. \n"+n.inspect(this)+"\n"+n.inspect(e))):(o.ok(t,"can't remove top context"),this._set.splice(t,1))},u.prototype.bindEmitter=function(e){o.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");let t=this,r="context@"+this.name;i(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;let t=e,r=e["cls@contexts"];return Object.keys(r).forEach((function(e){let n=r[e];t=n.namespace.bind(t,n.context)})),t}))},u.prototype.fromException=function(e){return e[s]},process.namespaces={}},9562:(e,t,r)=>{"use strict";const n=r(9012);process&&n.gte(process.versions.node,"8.0.0")?e.exports=r(3964):e.exports=r(4046)},9012:(e,t)=>{var r;t=e.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=0,s=a++;i[s]="0|[1-9]\\d*";var c=a++;i[c]="[0-9]+";var l=a++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=a++;i[u]="("+i[s]+")\\.("+i[s]+")\\.("+i[s]+")";var p=a++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var d=a++;i[d]="(?:"+i[s]+"|"+i[l]+")";var h=a++;i[h]="(?:"+i[c]+"|"+i[l]+")";var m=a++;i[m]="(?:-("+i[d]+"(?:\\."+i[d]+")*))";var f=a++;i[f]="(?:-?("+i[h]+"(?:\\."+i[h]+")*))";var g=a++;i[g]="[0-9A-Za-z-]+";var y=a++;i[y]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var v=a++,b="v?"+i[u]+i[m]+"?"+i[y]+"?";i[v]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[f]+"?"+i[y]+"?",S=a++;i[S]="^"+w+"$";var P=a++;i[P]="((?:<|>)?=?)";var E=a++;i[E]=i[c]+"|x|X|\\*";var D=a++;i[D]=i[s]+"|x|X|\\*";var T=a++;i[T]="[v=\\s]*("+i[D]+")(?:\\.("+i[D]+")(?:\\.("+i[D]+")(?:"+i[m]+")?"+i[y]+"?)?)?";var x=a++;i[x]="[v=\\s]*("+i[E]+")(?:\\.("+i[E]+")(?:\\.("+i[E]+")(?:"+i[f]+")?"+i[y]+"?)?)?";var _=a++;i[_]="^"+i[P]+"\\s*"+i[T]+"$";var C=a++;i[C]="^"+i[P]+"\\s*"+i[x]+"$";var j=a++;i[j]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=a++;i[I]="(?:~>?)";var N=a++;i[N]="(\\s*)"+i[I]+"\\s+",o[N]=new RegExp(i[N],"g");var A=a++;i[A]="^"+i[I]+i[T]+"$";var R=a++;i[R]="^"+i[I]+i[x]+"$";var F=a++;i[F]="(?:\\^)";var k=a++;i[k]="(\\s*)"+i[F]+"\\s+",o[k]=new RegExp(i[k],"g");var O=a++;i[O]="^"+i[F]+i[T]+"$";var L=a++;i[L]="^"+i[F]+i[x]+"$";var q=a++;i[q]="^"+i[P]+"\\s*("+w+")$|^$";var M=a++;i[M]="^"+i[P]+"\\s*("+b+")$|^$";var B=a++;i[B]="(\\s*)"+i[P]+"\\s*("+w+"|"+i[T]+")",o[B]=new RegExp(i[B],"g");var V=a++;i[V]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=a++;i[$]="^\\s*("+i[x]+")\\s+-\\s+("+i[x]+")\\s*$";var U=a++;i[U]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)r(H,i[H]),o[H]||(o[H]=new RegExp(i[H]));function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[v]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[v]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=G,t.valid=function(e,t){var r=G(e,t);return r?r.version:null},t.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=X;var W=/^[0-9]+$/;function X(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Q(e,t,r){return new z(e,r).compare(new z(t,r))}function K(e,t,r){return Q(e,t,r)>0}function Y(e,t,r){return Q(e,t,r)<0}function J(e,t,r){return 0===Q(e,t,r)}function Z(e,t,r){return 0!==Q(e,t,r)}function ee(e,t,r){return Q(e,t,r)>=0}function te(e,t,r){return Q(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return J(e,r,n);case"!=":return Z(e,r,n);case">":return K(e,r,n);case">=":return ee(e,r,n);case"<":return Y(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,r){return Q(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=K,t.lt=Y,t.eq=J,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,o,i,a,s,c,l,u,p,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(c)?"":ae(l)?"<"+(+c+1)+".0.0":ae(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+s)).trim()}function ce(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function ue(e,t,r,n){var o,i,a,s,c;switch(e=new z(e,n),t=new ie(t,n),r){case">":o=K,i=te,a=Y,s=">",c=">=";break;case"<":o=Y,i=ee,a=K,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,d=null;if(u.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),p=p||e,d=d||e,o(e.semver,p.semver,n)?p=e:a(e.semver,d.semver,n)&&(d=e)})),p.operator===s||p.operator===c)return!1;if((!d.operator||d.operator===s)&&i(e,d.semver))return!1;if(d.operator===c&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[q]:o[M],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new z(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||c},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[$]:o[V];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[N],"$1~")).replace(o[k],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[M],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[L]:o[O];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[R]:o[A];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[C]:o[_];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var c=ae(o),l=c||ae(i),u=l||ae(a);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(i=0),a=0,">"===n?(n=">=",l?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",l?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):l?t=">="+o+".0.0 <"+(+o+1)+".0.0":u&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[U],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new z("0.0.0");if(e.test(r))return r;if(r=new z("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!K(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return ue(e,t,"<",r)},t.gtr=function(e,t,r){return ue(e,t,">",r)},t.outside=ue,t.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(o[j]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},3057:(e,t,r)=>{"use strict";var n=r(2357),o=r(9867),i="error@context";function a(e){this.name=e,this.active=null,this._set=[],this.id=null}function s(e){return process.namespaces[e]}function c(e){var t=s(e);n.ok(t,"can't delete nonexistent namespace!"),n.ok(t.id,"don't assign to process.namespaces directly!"),process.removeAsyncListener(t.id),process.namespaces[e]=null}function l(){process.namespaces&&Object.keys(process.namespaces).forEach((function(e){c(e)})),process.namespaces=Object.create(null)}process.addAsyncListener||r(7645),a.prototype.set=function(e,t){if(!this.active)throw new Error("No context available. ns.run() or ns.bind() must be called first.");return this.active[e]=t,t},a.prototype.get=function(e){if(this.active)return this.active[e]},a.prototype.createContext=function(){return Object.create(this.active)},a.prototype.run=function(e){var t=this.createContext();this.enter(t);try{return e(t),t}catch(e){throw e&&(e[i]=t),e}finally{this.exit(t)}},a.prototype.runAndReturn=function(e){var t;return this.run((function(r){t=e(r)})),t},a.prototype.bind=function(e,t){t||(t=this.active?this.active:this.createContext());var r=this;return function(){r.enter(t);try{return e.apply(this,arguments)}catch(e){throw e&&(e[i]=t),e}finally{r.exit(t)}}},a.prototype.enter=function(e){n.ok(e,"context must be provided for entering"),this._set.push(this.active),this.active=e},a.prototype.exit=function(e){if(n.ok(e,"context must be provided for exiting"),this.active===e)return n.ok(this._set.length,"can't remove top context"),void(this.active=this._set.pop());var t=this._set.lastIndexOf(e);n.ok(t>=0,"context not currently entered; can't exit"),n.ok(t,"can't remove top context"),this._set.splice(t,1)},a.prototype.bindEmitter=function(e){n.ok(e.on&&e.addListener&&e.emit,"can only bind real EEs");var t=this,r="context@"+this.name;o(e,(function(e){e&&(e["cls@contexts"]||(e["cls@contexts"]=Object.create(null)),e["cls@contexts"][r]={namespace:t,context:t.active})}),(function(e){if(!e||!e["cls@contexts"])return e;var t=e,r=e["cls@contexts"];return Object.keys(r).forEach((function(e){var n=r[e];t=n.namespace.bind(t,n.context)})),t}))},a.prototype.fromException=function(e){return e[i]},process.namespaces||l(),e.exports={getNamespace:s,createNamespace:function(e){n.ok(e,"namespace must be given a name!");var t=new a(e);return t.id=process.addAsyncListener({create:function(){return t.active},before:function(e,r){r&&t.enter(r)},after:function(e,r){r&&t.exit(r)},error:function(e){e&&t.exit(e)}}),process.namespaces[e]=t,t},destroyNamespace:c,reset:l}},8604:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(4953);t.AzureMonitorSymbol="Azure_Monitor_Tracer";var i=function(){function e(){}return e.prototype.onStart=function(e){},e.prototype.onEnd=function(e){o.channel.publish("azure-coretracing",e)},e.prototype.shutdown=function(){},e}();t.azureCoreTracing={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){try{var a=new(0,r(8921).BasicTracer)(o.channel.spanContextPropagator?{scopeManager:o.channel.spanContextPropagator}:void 0),s=a.startSpan;a.startSpan=function(e,t){if(!t||!t.parent){var r=a.getCurrentSpan();r&&r.operation&&r.operation.traceparent&&(t=n({},t,{parent:{traceId:r.operation.traceparent.traceId,spanId:r.operation.traceparent.spanId}}))}var o=s.call(this,e,t);return o.addEvent("Application Insights Integration enabled"),o},a.addSpanProcessor(new i),a[t.AzureMonitorSymbol]=!0,e.setTracer(a)}catch(e){}return e}},t.enable=function(){o.channel.registerMonkeyPatch("@azure/core-tracing",t.azureCoreTracing)}},8859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953);t.bunyan={versionSpecifier:">= 1.0.0 < 2.0.0",patch:function(e){var t=e.prototype._emit;return e.prototype._emit=function(e,r){var o=t.apply(this,arguments);if(!r){var i=o;i||(i=t.call(this,e,!0)),n.channel.publish("bunyan",{level:e.level,result:i})}return o},e}},t.enable=function(){n.channel.registerMonkeyPatch("bunyan",t.bunyan)}},2495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953),o=r(2413);t.console={versionSpecifier:">= 4.0.0",patch:function(e){var t=new o.Writable,r=new o.Writable;t.write=function(e){if(!e)return!0;var t=e.toString();return n.channel.publish("console",{message:t}),!0},r.write=function(e){if(!e)return!0;var t=e.toString();return n.channel.publish("console",{message:t,stderr:!0}),!0};for(var i=new e.Console(t,r),a=function(t){var r=e[t];r&&(e[t]=function(){if(i[t])try{i[t].apply(i,arguments)}catch(e){}return r.apply(e,arguments)})},s=0,c=["log","info","warn","error","dir","time","timeEnd","trace","assert"];s<c.length;s++)a(c[s]);return e}},t.enable=function(){n.channel.registerMonkeyPatch("console",t.console),r(7082)}},4106:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8604);t.azuresdk=n;var o=r(8859);t.bunyan=o;var i=r(2495);t.console=i;var a=r(2028);t.mongodbCore=a;var s=r(8436);t.mongodb=s;var c=r(8002);t.mysql=c;var l=r(9024);t.pgPool=l;var u=r(8060);t.pg=u;var p=r(4487);t.redis=p;var d=r(6661);t.tedious=d;var h=r(4650);t.winston=h,t.enable=function(){o.enable(),i.enable(),a.enable(),s.enable(),c.enable(),u.enable(),l.enable(),p.enable(),h.enable(),n.enable(),d.enable()}},2028:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953);t.mongoCore={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.Server.prototype.connect;return e.Server.prototype.connect=function(){var e=t.apply(this,arguments),r=this.s.pool.write;this.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=n.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var o=this.s.pool.logout;return this.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=n.channel.bindToContext(arguments[1])),o.apply(this,arguments)},e},e}},t.enable=function(){n.channel.registerMonkeyPatch("mongodb-core",t.mongoCore)}},8436:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(4953);t.mongo2={versionSpecifier:">= 2.0.0 <= 3.0.5",patch:function(e){var t=e.instrument({operationIdGenerator:{next:function(){return o.channel.bindToContext((function(e){return e()}))}}}),r={};return t.on("started",(function(e){r[e.requestId]||(r[e.requestId]=n({},e,{time:new Date}))})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})):o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"function"==typeof e.operationId?e.operationId((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})):o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),e}},t.mongo3={versionSpecifier:"> 3.0.5 < 3.3.0",patch:function(e){var t=e.instrument(),r={},i={};return t.on("started",(function(e){r[e.requestId]||(i[e.requestId]=o.channel.bindToContext((function(e){return e()})),r[e.requestId]=n({},e,{time:new Date}))})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete i[e.requestId])})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof i[e.requestId]&&(i[e.requestId]((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete i[e.requestId])})),e}},t.mongo330={versionSpecifier:">= 3.3.0 < 4.0.0",patch:function(e){!function(e){var t=e.Server.prototype.connect;e.Server.prototype.connect=function(){var e=t.apply(this,arguments),r=this.s.coreTopology.s.pool.write;this.s.coreTopology.s.pool.write=function(){var e="function"==typeof arguments[1]?1:2;return"function"==typeof arguments[e]&&(arguments[e]=o.channel.bindToContext(arguments[e])),r.apply(this,arguments)};var n=this.s.coreTopology.s.pool.logout;return this.s.coreTopology.s.pool.logout=function(){return"function"==typeof arguments[1]&&(arguments[1]=o.channel.bindToContext(arguments[1])),n.apply(this,arguments)},e}}(e);var t=e.instrument(),r={},n={};return t.on("started",(function(e){r[e.requestId]||(n[e.requestId]=o.channel.bindToContext((function(e){return e()})),r[e.requestId]=e)})),t.on("succeeded",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof n[e.requestId]&&(n[e.requestId]((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!0})})),delete n[e.requestId])})),t.on("failed",(function(e){var t=r[e.requestId];t&&delete r[e.requestId],"object"==typeof e&&"function"==typeof n[e.requestId]&&(n[e.requestId]((function(){return o.channel.publish("mongodb",{startedData:t,event:e,succeeded:!1})})),delete n[e.requestId])})),e}},t.enable=function(){o.channel.registerMonkeyPatch("mongodb",t.mongo2),o.channel.registerMonkeyPatch("mongodb",t.mongo3),o.channel.registerMonkeyPatch("mongodb",t.mongo330)}},8002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953),o=r(5622);t.mysql={versionSpecifier:">= 2.0.0 < 3.0.0",patch:function(e,t){var i=function(e,t){return function(t,r){var o=e[t];o&&(e[t]=function(){for(var e=arguments.length-1,t=arguments.length-1;t>=0;--t){if("function"==typeof arguments[t]){e=t;break}if(void 0!==arguments[t])break}var i=arguments[e],a={result:null,startTime:null,startDate:null};"function"==typeof i&&(r?(a.startTime=process.hrtime(),a.startDate=new Date,arguments[e]=n.channel.bindToContext(r(a,i))):arguments[e]=n.channel.bindToContext(i));var s=o.apply(this,arguments);return a.result=s,s})}},a=function(e,t){return i(e.prototype)},s=r(4694)(o.dirname(t)+"/lib/Connection");["connect","changeUser","ping","statistics","end"].forEach((function(e){return a(s)(e)})),i(s)("createQuery",(function(e,t){return function(r){var o=process.hrtime(e.startTime),i=1e3*o[0]+o[1]/1e6|0;n.channel.publish("mysql",{query:e.result,callbackArgs:arguments,err:r,duration:i,time:e.startDate}),t.apply(this,arguments)}}));var c=r(420)(o.dirname(t)+"/lib/Pool");return["_enqueueCallback"].forEach((function(e){return a(c)(e)})),e}},t.enable=function(){n.channel.registerMonkeyPatch("mysql",t.mysql)}},9024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953);t.postgresPool1={versionSpecifier:">= 1.0.0 < 3.0.0",patch:function(e){var t=e.prototype.connect;return e.prototype.connect=function(e){return e&&(arguments[0]=n.channel.bindToContext(e)),t.apply(this,arguments)},e}},t.enable=function(){n.channel.registerMonkeyPatch("pg-pool",t.postgresPool1)}},8060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953),o=r(8614);t.postgres6={versionSpecifier:"6.*",patch:function(e,t){var r=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,a){var s,c={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},l=process.hrtime();function u(e){e&&e[i]&&(e=e[i]);var t=n.channel.bindToContext((function(t,r){var i=process.hrtime(l);if(c.result=r&&{rowCount:r.rowCount,command:r.command},c.error=t,c.duration=Math.ceil(1e3*i[0]+i[1]/1e6),n.channel.publish("postgres",c),t){if(e)return e.apply(this,arguments);s&&s instanceof o.EventEmitter&&s.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,i,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(c.query.preparable={text:e,args:t},a=u(a)):(c.query.text=e,a?a=u(a):t=u(t)):("string"==typeof e.name?c.query.plan=e.name:e.values instanceof Array?c.query.preparable={text:e.text,args:e.values}:c.query.text=e.text,a?a=u(a):t?t=u(t):e.callback=u(e.callback))}catch(e){return r.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,s=r.apply(this,arguments)},e}},t.postgres7={versionSpecifier:">=7.* <=8.*",patch:function(e,t){var r=e.Client.prototype.query,i="__diagnosticOriginalFunc";return e.Client.prototype.query=function(e,t,a){var s,c=this,l=!!a,u={query:{},database:{host:this.connectionParameters.host,port:this.connectionParameters.port},result:null,error:null,duration:0,time:new Date},p=process.hrtime();function d(e){e&&e[i]&&(e=e[i]);var t=n.channel.bindToContext((function(t,r){var i=process.hrtime(p);if(u.result=r&&{rowCount:r.rowCount,command:r.command},u.error=t,u.duration=Math.ceil(1e3*i[0]+i[1]/1e6),n.channel.publish("postgres",u),t){if(e)return e.apply(this,arguments);s&&s instanceof o.EventEmitter&&s.emit("error",t)}else e&&e.apply(this,arguments)}));try{return Object.defineProperty(t,i,{value:e}),t}catch(t){return e}}try{"string"==typeof e?t instanceof Array?(u.query.preparable={text:e,args:t},a=(l="function"==typeof a)?d(a):a):(u.query.text=e,a?a=(l="function"==typeof a)?d(a):a:t=(l="function"==typeof t)?d(t):t):("string"==typeof e.name?u.query.plan=e.name:e.values instanceof Array?u.query.preparable={text:e.text,args:e.values}:u.query.text=e.text,a?(l="function"==typeof a,a=d(a)):t?t=(l="function"==typeof t)?d(t):t:(l="function"==typeof e.callback,e.callback=l?d(e.callback):e.callback))}catch(e){return r.apply(this,arguments)}return arguments[0]=e,arguments[1]=t,arguments[2]=a,arguments.length=arguments.length>3?arguments.length:3,s=r.apply(this,arguments),l?s:s.then((function(e){return d()(void 0,e),new c._Promise((function(t,r){t(e)}))})).catch((function(e){return d()(e,void 0),new c._Promise((function(t,r){r(e)}))}))},e}},t.enable=function(){n.channel.registerMonkeyPatch("pg",t.postgres6),n.channel.registerMonkeyPatch("pg",t.postgres7)}},4487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4953);t.redis={versionSpecifier:">= 2.0.0 < 4.0.0",patch:function(e){var t=e.RedisClient.prototype.internal_send_command;return e.RedisClient.prototype.internal_send_command=function(e){if(e){var r=e.callback;if(!r||!r.pubsubBound){var o=this.address,i=process.hrtime(),a=new Date;e.callback=n.channel.bindToContext((function(t,s){var c=process.hrtime(i),l=1e3*c[0]+c[1]/1e6|0;n.channel.publish("redis",{duration:l,address:o,commandObj:e,err:t,result:s,time:a}),"function"==typeof r&&r.apply(this,arguments)})),e.callback.pubsubBound=!0}}return t.call(this,e)},e}},t.enable=function(){n.channel.registerMonkeyPatch("redis",t.redis)}},6661:function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(4953);t.tedious={versionSpecifier:">= 6.0.0 < 9.0.0",patch:function(e){var t=e.Connection.prototype.makeRequest;return e.Connection.prototype.makeRequest=function(){function e(e){var t=process.hrtime(),r={query:{},database:{host:null,port:null},result:null,error:null,duration:0};return o.channel.bindToContext((function(i,a,s){var c=process.hrtime(t);r=n({},r,{database:{host:this.connection.config.server,port:this.connection.config.options.port},result:!i&&{rowCount:a,rows:s},query:{text:this.parametersByName.statement.value},error:i,duration:Math.ceil(1e3*c[0]+c[1]/1e6)}),o.channel.publish("tedious",r),e.call(this,i,a,s)}))}var r=arguments[0];arguments[0].callback=e(r.callback),t.apply(this,arguments)},e}},t.enable=function(){o.channel.registerMonkeyPatch("tedious",t.tedious)}},4650:function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),i=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0});var a=r(4953);t.winston3={versionSpecifier:"3.x",patch:function(e){var t=function(e){function t(t,r){var n=e.call(this,r)||this;return n.winston=t,n}return o(t,e),t.prototype.log=function(e,t){var r=e.message,n=e.level,o=e.meta,s=i(e,["message","level","meta"]);n="function"==typeof Symbol.for?e[Symbol.for("level")]:n,r=e instanceof Error?e:r;var c=function(e,t){return null!=e.config.npm.levels[t]?"npm":null!=e.config.syslog.levels[t]?"syslog":"unknown"}(this.winston,n);for(var l in o=o||{},s)s.hasOwnProperty(l)&&(o[l]=s[l]);a.channel.publish("winston",{message:r,level:n,levelKind:c,meta:o}),t()},t}(e.Transport);function r(){var r,n=arguments[0].levels||e.config.npm.levels;for(var o in n)n.hasOwnProperty(o)&&(r=void 0===r||n[o]>n[r]?o:r);this.add(new t(e,{level:r}))}var n=e.createLogger;e.createLogger=function(){var o,i=arguments[0].levels||e.config.npm.levels;for(var a in i)i.hasOwnProperty(a)&&(o=void 0===o||i[a]>i[o]?a:o);var s=n.apply(this,arguments);s.add(new t(e,{level:o}));var c=s.configure;return s.configure=function(){c.apply(this,arguments),r.apply(this,arguments)},s};var s=e.createLogger;return e.configure=function(){s.apply(this,arguments),r.apply(this,arguments)},e.add(new t(e)),e}},t.winston2={versionSpecifier:"2.x",patch:function(e){var t,r=e.Logger.prototype.log,n=function(r,n,o){var i;return i=t===e.config.npm.levels?"npm":t===e.config.syslog.levels?"syslog":"unknown",a.channel.publish("winston",{level:r,message:n,meta:o,levelKind:i}),n};return e.Logger.prototype.log=function(){return t=this.levels,this.filters&&0!==this.filters.length?this.filters[this.filters.length-1]!==n&&(this.filters=this.filters.filter((function(e){return e!==n})),this.filters.push(n)):this.filters=[n],r.apply(this,arguments)},e}},t.enable=function(){a.channel.registerMonkeyPatch("winston",t.winston2),a.channel.registerMonkeyPatch("winston",t.winston3)}},4694:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=4694,e.exports=t},420:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=420,e.exports=t},4953:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7424),o=r(7424);t.makePatchingRequire=o.makePatchingRequire;var i=function(e){return!0},a=function(){function e(){this.version=r(5236).i8,this.subscribers={},this.contextPreservationFunction=function(e){return e},this.knownPatches={},this.currentlyPublishing=!1}return e.prototype.shouldPublish=function(e){var t=this.subscribers[e];return!!t&&t.some((function(e){var t=e.filter;return!t||t(!1)}))},e.prototype.publish=function(e,t){if(!this.currentlyPublishing){var r=this.subscribers[e];if(r){var n={timestamp:Date.now(),data:t};this.currentlyPublishing=!0,r.forEach((function(e){var t=e.listener,r=e.filter;try{r&&r(!0)&&t(n)}catch(e){}})),this.currentlyPublishing=!1}}},e.prototype.subscribe=function(e,t,r){void 0===r&&(r=i),this.subscribers[e]||(this.subscribers[e]=[]),this.subscribers[e].push({listener:t,filter:r})},e.prototype.unsubscribe=function(e,t,r){void 0===r&&(r=i);var n=this.subscribers[e];if(n)for(var o=0;o<n.length;++o)if(n[o].listener===t&&n[o].filter===r)return n.splice(o,1),!0;return!1},e.prototype.reset=function(){var e=this;this.subscribers={},this.contextPreservationFunction=function(e){return e},Object.getOwnPropertyNames(this.knownPatches).forEach((function(t){return delete e.knownPatches[t]}))},e.prototype.bindToContext=function(e){return this.contextPreservationFunction(e)},e.prototype.addContextPreservation=function(e){var t=this.contextPreservationFunction;this.contextPreservationFunction=function(r){return e(t(r))}},e.prototype.registerMonkeyPatch=function(e,t){this.knownPatches[e]||(this.knownPatches[e]=[]),this.knownPatches[e].push(t)},e.prototype.getPatchesObject=function(){return this.knownPatches},e}();global.diagnosticsSource||(global.diagnosticsSource=new a,r(2282).prototype.require=n.makePatchingRequire(global.diagnosticsSource.getPatchesObject())),t.channel=global.diagnosticsSource},7424:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5622),o=r(4014),i=r(2282),a=Object.keys(process.binding("natives")),s=i.prototype.require;t.makePatchingRequire=function(e){var t={};return function(r){var c=s.apply(this,arguments);if(e[r]){var l=i._resolveFilename(r,this);if(t.hasOwnProperty(l))return t[l];var u=void 0;if(a.indexOf(r)<0)try{u=s.call(this,n.join(r,"package.json")).version}catch(e){return c}else u=process.version.substring(1);var p=u.indexOf("-");p>=0&&(u=u.substring(0,p));for(var d=c,h=0,m=e[r];h<m.length;h++){var f=m[h];o.satisfies(u,f.versionSpecifier)&&(d=f.patch(d,l))}return t[l]=d}return c}}},4014:(e,t)=>{var r;t=e.exports=z,r="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?function(){var e=Array.prototype.slice.call(arguments,0);e.unshift("SEMVER"),console.log.apply(console,e)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=Number.MAX_SAFE_INTEGER||9007199254740991,o=t.re=[],i=t.src=[],a=0,s=a++;i[s]="0|[1-9]\\d*";var c=a++;i[c]="[0-9]+";var l=a++;i[l]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var u=a++;i[u]="("+i[s]+")\\.("+i[s]+")\\.("+i[s]+")";var p=a++;i[p]="("+i[c]+")\\.("+i[c]+")\\.("+i[c]+")";var d=a++;i[d]="(?:"+i[s]+"|"+i[l]+")";var h=a++;i[h]="(?:"+i[c]+"|"+i[l]+")";var m=a++;i[m]="(?:-("+i[d]+"(?:\\."+i[d]+")*))";var f=a++;i[f]="(?:-?("+i[h]+"(?:\\."+i[h]+")*))";var g=a++;i[g]="[0-9A-Za-z-]+";var y=a++;i[y]="(?:\\+("+i[g]+"(?:\\."+i[g]+")*))";var v=a++,b="v?"+i[u]+i[m]+"?"+i[y]+"?";i[v]="^"+b+"$";var w="[v=\\s]*"+i[p]+i[f]+"?"+i[y]+"?",S=a++;i[S]="^"+w+"$";var P=a++;i[P]="((?:<|>)?=?)";var E=a++;i[E]=i[c]+"|x|X|\\*";var D=a++;i[D]=i[s]+"|x|X|\\*";var T=a++;i[T]="[v=\\s]*("+i[D]+")(?:\\.("+i[D]+")(?:\\.("+i[D]+")(?:"+i[m]+")?"+i[y]+"?)?)?";var x=a++;i[x]="[v=\\s]*("+i[E]+")(?:\\.("+i[E]+")(?:\\.("+i[E]+")(?:"+i[f]+")?"+i[y]+"?)?)?";var _=a++;i[_]="^"+i[P]+"\\s*"+i[T]+"$";var C=a++;i[C]="^"+i[P]+"\\s*"+i[x]+"$";var j=a++;i[j]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var I=a++;i[I]="(?:~>?)";var N=a++;i[N]="(\\s*)"+i[I]+"\\s+",o[N]=new RegExp(i[N],"g");var A=a++;i[A]="^"+i[I]+i[T]+"$";var R=a++;i[R]="^"+i[I]+i[x]+"$";var F=a++;i[F]="(?:\\^)";var k=a++;i[k]="(\\s*)"+i[F]+"\\s+",o[k]=new RegExp(i[k],"g");var O=a++;i[O]="^"+i[F]+i[T]+"$";var L=a++;i[L]="^"+i[F]+i[x]+"$";var q=a++;i[q]="^"+i[P]+"\\s*("+w+")$|^$";var M=a++;i[M]="^"+i[P]+"\\s*("+b+")$|^$";var B=a++;i[B]="(\\s*)"+i[P]+"\\s*("+w+"|"+i[T]+")",o[B]=new RegExp(i[B],"g");var V=a++;i[V]="^\\s*("+i[T]+")\\s+-\\s+("+i[T]+")\\s*$";var $=a++;i[$]="^\\s*("+i[x]+")\\s+-\\s+("+i[x]+")\\s*$";var U=a++;i[U]="(<|>)?=?\\s*\\*";for(var H=0;H<35;H++)r(H,i[H]),o[H]||(o[H]=new RegExp(i[H]));function G(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z)return e;if("string"!=typeof e)return null;if(e.length>256)return null;if(!(t.loose?o[S]:o[v]).test(e))return null;try{return new z(e,t)}catch(e){return null}}function z(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof z){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>256)throw new TypeError("version is longer than 256 characters");if(!(this instanceof z))return new z(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var i=e.trim().match(t.loose?o[S]:o[v]);if(!i)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}t.parse=G,t.valid=function(e,t){var r=G(e,t);return r?r.version:null},t.clean=function(e,t){var r=G(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=z,z.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},z.prototype.toString=function(){return this.version},z.prototype.compare=function(e){return r("SemVer.compare",this.version,this.options,e),e instanceof z||(e=new z(e,this.options)),this.compareMain(e)||this.comparePre(e)},z.prototype.compareMain=function(e){return e instanceof z||(e=new z(e,this.options)),X(this.major,e.major)||X(this.minor,e.minor)||X(this.patch,e.patch)},z.prototype.comparePre=function(e){if(e instanceof z||(e=new z(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var n=this.prerelease[t],o=e.prerelease[t];if(r("prerelease compare",t,n,o),void 0===n&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===n)return-1;if(n!==o)return X(n,o)}while(++t)},z.prototype.inc=function(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,n){"string"==typeof r&&(n=r,r=void 0);try{return new z(e,r).inc(t,n).version}catch(e){return null}},t.diff=function(e,t){if(J(e,t))return null;var r=G(e),n=G(t),o="";if(r.prerelease.length||n.prerelease.length){o="pre";var i="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==n[a])return o+a;return i},t.compareIdentifiers=X;var W=/^[0-9]+$/;function X(e,t){var r=W.test(e),n=W.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1}function Q(e,t,r){return new z(e,r).compare(new z(t,r))}function K(e,t,r){return Q(e,t,r)>0}function Y(e,t,r){return Q(e,t,r)<0}function J(e,t,r){return 0===Q(e,t,r)}function Z(e,t,r){return 0!==Q(e,t,r)}function ee(e,t,r){return Q(e,t,r)>=0}function te(e,t,r){return Q(e,t,r)<=0}function re(e,t,r,n){switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return J(e,r,n);case"!=":return Z(e,r,n);case">":return K(e,r,n);case">=":return ee(e,r,n);case"<":return Y(e,r,n);case"<=":return te(e,r,n);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===oe?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){return X(t,e)},t.major=function(e,t){return new z(e,t).major},t.minor=function(e,t){return new z(e,t).minor},t.patch=function(e,t){return new z(e,t).patch},t.compare=Q,t.compareLoose=function(e,t){return Q(e,t,!0)},t.rcompare=function(e,t,r){return Q(t,e,r)},t.sort=function(e,r){return e.sort((function(e,n){return t.compare(e,n,r)}))},t.rsort=function(e,r){return e.sort((function(e,n){return t.rcompare(e,n,r)}))},t.gt=K,t.lt=Y,t.eq=J,t.neq=Z,t.gte=ee,t.lte=te,t.cmp=re,t.Comparator=ne;var oe={};function ie(e,t){if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ie)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ie(e.raw,t);if(e instanceof ne)return new ie(e.value,t);if(!(this instanceof ie))return new ie(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function ae(e){return!e||"x"===e.toLowerCase()||"*"===e}function se(e,t,r,n,o,i,a,s,c,l,u,p,d){return((t=ae(r)?"":ae(n)?">="+r+".0.0":ae(o)?">="+r+"."+n+".0":">="+t)+" "+(s=ae(c)?"":ae(l)?"<"+(+c+1)+".0.0":ae(u)?"<"+c+"."+(+l+1)+".0":p?"<="+c+"."+l+"."+u+"-"+p:"<="+s)).trim()}function ce(e,t,n){for(var o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(o=0;o<e.length;o++)if(r(e[o].semver),e[o].semver!==oe&&e[o].semver.prerelease.length>0){var i=e[o].semver;if(i.major===t.major&&i.minor===t.minor&&i.patch===t.patch)return!0}return!1}return!0}function le(e,t,r){try{t=new ie(t,r)}catch(e){return!1}return t.test(e)}function ue(e,t,r,n){var o,i,a,s,c;switch(e=new z(e,n),t=new ie(t,n),r){case">":o=K,i=te,a=Y,s=">",c=">=";break;case"<":o=Y,i=ee,a=K,s="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(le(e,t,n))return!1;for(var l=0;l<t.set.length;++l){var u=t.set[l],p=null,d=null;if(u.forEach((function(e){e.semver===oe&&(e=new ne(">=0.0.0")),p=p||e,d=d||e,o(e.semver,p.semver,n)?p=e:a(e.semver,d.semver,n)&&(d=e)})),p.operator===s||p.operator===c)return!1;if((!d.operator||d.operator===s)&&i(e,d.semver))return!1;if(d.operator===c&&a(e,d.semver))return!1}return!0}ne.prototype.parse=function(e){var t=this.options.loose?o[q]:o[M],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),r[2]?this.semver=new z(r[2],this.options.loose):this.semver=oe},ne.prototype.toString=function(){return this.value},ne.prototype.test=function(e){return r("Comparator.test",e,this.options.loose),this.semver===oe||("string"==typeof e&&(e=new z(e,this.options)),re(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ie(e.value,t),le(this.value,r,t);if(""===e.operator)return r=new ie(this.value,t),le(e.semver,r,t);var n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),o=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=re(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),c=re(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||o||i&&a||s||c},t.Range=ie,ie.prototype.format=function(){return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ie.prototype.toString=function(){return this.range},ie.prototype.parseRange=function(e){var t=this.options.loose;e=e.trim();var n=t?o[$]:o[V];e=e.replace(n,se),r("hyphen replace",e),e=e.replace(o[B],"$1$2$3"),r("comparator trim",e,o[B]),e=(e=(e=e.replace(o[N],"$1~")).replace(o[k],"$1^")).split(/\s+/).join(" ");var i=t?o[q]:o[M],a=e.split(" ").map((function(e){return function(e,t){return r("comp",e,t),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){r("caret",e,t);var n=t.loose?o[L]:o[O];return e.replace(n,(function(t,n,o,i,a){var s;return r("caret",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s="0"===n?">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":">="+n+"."+o+".0 <"+(+n+1)+".0.0":a?(r("replaceCaret pr",a),s="0"===n?"0"===o?">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+"-"+a+" <"+(+n+1)+".0.0"):(r("no pr"),s="0"===n?"0"===o?">="+n+"."+o+"."+i+" <"+n+"."+o+"."+(+i+1):">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0":">="+n+"."+o+"."+i+" <"+(+n+1)+".0.0"),r("caret return",s),s}))}(e,t)})).join(" ")}(e,t),r("caret",e),e=function(e,t){return e.trim().split(/\s+/).map((function(e){return function(e,t){var n=t.loose?o[R]:o[A];return e.replace(n,(function(t,n,o,i,a){var s;return r("tilde",e,t,n,o,i,a),ae(n)?s="":ae(o)?s=">="+n+".0.0 <"+(+n+1)+".0.0":ae(i)?s=">="+n+"."+o+".0 <"+n+"."+(+o+1)+".0":a?(r("replaceTilde pr",a),s=">="+n+"."+o+"."+i+"-"+a+" <"+n+"."+(+o+1)+".0"):s=">="+n+"."+o+"."+i+" <"+n+"."+(+o+1)+".0",r("tilde return",s),s}))}(e,t)})).join(" ")}(e,t),r("tildes",e),e=function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return function(e,t){e=e.trim();var n=t.loose?o[C]:o[_];return e.replace(n,(function(t,n,o,i,a,s){r("xRange",e,t,n,o,i,a,s);var c=ae(o),l=c||ae(i),u=l||ae(a);return"="===n&&u&&(n=""),c?t=">"===n||"<"===n?"<0.0.0":"*":n&&u?(l&&(i=0),a=0,">"===n?(n=">=",l?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",l?o=+o+1:i=+i+1),t=n+o+"."+i+"."+a):l?t=">="+o+".0.0 <"+(+o+1)+".0.0":u&&(t=">="+o+"."+i+".0 <"+o+"."+(+i+1)+".0"),r("xRange return",t),t}))}(e,t)})).join(" ")}(e,t),r("xrange",e),e=function(e,t){return r("replaceStars",e,t),e.trim().replace(o[U],"")}(e,t),r("stars",e),e}(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(i)}))),a.map((function(e){return new ne(e,this.options)}),this)},ie.prototype.intersects=function(e,t){if(!(e instanceof ie))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){return new ie(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ie.prototype.test=function(e){if(!e)return!1;"string"==typeof e&&(e=new z(e,this.options));for(var t=0;t<this.set.length;t++)if(ce(this.set[t],e,this.options))return!0;return!1},t.satisfies=le,t.maxSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&-1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minSatisfying=function(e,t,r){var n=null,o=null;try{var i=new ie(t,r)}catch(e){return null}return e.forEach((function(e){i.test(e)&&(n&&1!==o.compare(e)||(o=new z(n=e,r)))})),n},t.minVersion=function(e,t){e=new ie(e,t);var r=new z("0.0.0");if(e.test(r))return r;if(r=new z("0.0.0-0"),e.test(r))return r;r=null;for(var n=0;n<e.set.length;++n)e.set[n].forEach((function(e){var t=new z(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!K(r,t)||(r=t);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+e.operator)}}));return r&&e.test(r)?r:null},t.validRange=function(e,t){try{return new ie(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){return ue(e,t,"<",r)},t.gtr=function(e,t,r){return ue(e,t,">",r)},t.outside=ue,t.prerelease=function(e,t){var r=G(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){return e=new ie(e,r),t=new ie(t,r),e.intersects(t)},t.coerce=function(e){if(e instanceof z)return e;if("string"!=typeof e)return null;var t=e.match(o[j]);return null==t?null:G(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}},5236:e=>{"use strict";e.exports={i8:"0.2.0"}},9867:(e,t,r)=>{"use strict";var n=r(6372),o=n.wrap,i=n.unwrap,a="wrap@before";function s(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function c(e,t){var r;return r=e._events&&e._events[t],Array.isArray(r)||(r=r?[r]:[]),r}function l(e,t){if(e){var r=e;if("function"==typeof e)r=t(e);else if(Array.isArray(e)){r=[];for(var n=0;n<e.length;n++)r[n]=t(e[n])}return r}}e.exports=function(e,t,r){if(!(e&&e.on&&e.addListener&&e.removeListener&&e.emit))throw new Error("can only wrap real EEs");if(!t)throw new Error("must have function to run on listener addition");if(!r)throw new Error("must have function to wrap listeners when emitting");function n(e){return function(t,r){var i=c(this,t).slice();try{var s=e.call(this,t,r);return function(e,t,r){var n=c(e,t).filter((function(e){return-1===r.indexOf(e)}));n.length>0&&function(e,t){for(var r=t.length,n=0;n<r;n++){var o=t[n],i=e[a];if("function"==typeof i)i(o);else if(Array.isArray(i))for(var s=i.length,c=0;c<s;c++)i[c](o)}}(e,n)}(this,t,i),s}finally{this.on.__wrapped||o(this,"on",n),this.addListener.__wrapped||o(this,"addListener",n)}}}e[a]?"function"==typeof e[a]?s(e,a,[e[a],t]):Array.isArray(e[a])&&e[a].push(t):s(e,a,t),e.__wrapped||(o(e,"addListener",n),o(e,"on",n),o(e,"emit",(function(e){return function(t){if(!this._events||!this._events[t])return e.apply(this,arguments);var n=this._events[t];function a(e){return function(){this._events[t]=n;try{return e.apply(this,arguments)}finally{n=this._events[t],this._events[t]=l(n,r)}}}o(this,"removeListener",a);try{return this._events[t]=l(n,r),e.apply(this,arguments)}finally{i(this,"removeListener"),this._events[t]=n}}})),s(e,"__unwrap",(function(){i(e,"addListener"),i(e,"on"),i(e,"emit"),delete e[a],delete e.__wrapped})),s(e,"__wrapped",!0))}},3294:(e,t,r)=>{"use strict";const n=r(5135),o=r(3456),i=r(4954),a=r(4113),s=r(3862),c=r(4426);async function l(e,t){p(e);const r=u(e,o.default,t),n=await Promise.all(r);return c.array.flatten(n)}function u(e,t,r){const o=[].concat(e),i=new s.default(r),a=n.generate(o,i),c=new t(i);return a.map(c.read,c)}function p(e){if(![].concat(e).every((e=>c.string.isString(e)&&!c.string.isEmpty(e))))throw new TypeError("Patterns must be a string (non empty) or an array of strings")}!function(e){e.sync=function(e,t){p(e);const r=u(e,a.default,t);return c.array.flatten(r)},e.stream=function(e,t){p(e);const r=u(e,i.default,t);return c.stream.merge(r)},e.generateTasks=function(e,t){p(e);const r=[].concat(e),o=new s.default(t);return n.generate(r,o)},e.isDynamicPattern=function(e,t){p(e);const r=new s.default(t);return c.pattern.isDynamicPattern(e,r)},e.escapePath=function(e){return p(e),c.path.escape(e)}}(l||(l={})),e.exports=l},5135:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertPatternGroupToTask=t.convertPatternGroupsToTasks=t.groupPatternsByBaseDirectory=t.getNegativePatternsAsPositive=t.getPositivePatterns=t.convertPatternsToTasks=t.generate=void 0;const n=r(4426);function o(e,t,r){const o=[],i=n.pattern.getPatternsOutsideCurrentDirectory(e),a=n.pattern.getPatternsInsideCurrentDirectory(e),u=s(i),p=s(a);return o.push(...c(u,t,r)),"."in p?o.push(l(".",a,t,r)):o.push(...c(p,t,r)),o}function i(e){return n.pattern.getPositivePatterns(e)}function a(e,t){return n.pattern.getNegativePatterns(e).concat(t).map(n.pattern.convertToPositivePattern)}function s(e){return e.reduce(((e,t)=>{const r=n.pattern.getBaseDirectory(t);return r in e?e[r].push(t):e[r]=[t],e}),{})}function c(e,t,r){return Object.keys(e).map((n=>l(n,e[n],t,r)))}function l(e,t,r,o){return{dynamic:o,positive:t,negative:r,base:e,patterns:[].concat(t,r.map(n.pattern.convertToNegativePattern))}}t.generate=function(e,t){const r=i(e),s=a(e,t.ignore),c=r.filter((e=>n.pattern.isStaticPattern(e,t))),l=r.filter((e=>n.pattern.isDynamicPattern(e,t))),u=o(c,s,!1),p=o(l,s,!0);return u.concat(p)},t.convertPatternsToTasks=o,t.getPositivePatterns=i,t.getNegativePatternsAsPositive=a,t.groupPatternsByBaseDirectory=s,t.convertPatternGroupsToTasks=c,t.convertPatternGroupToTask=l},3456:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(9086),o=r(466);class i extends o.default{constructor(){super(...arguments),this._reader=new n.default(this._settings)}read(e){const t=this._getRootDirectory(e),r=this._getReaderOptions(e),n=[];return new Promise(((o,i)=>{const a=this.api(t,e,r);a.once("error",i),a.on("data",(e=>n.push(r.transform(e)))),a.once("end",(()=>o(n)))}))}api(e,t,r){return t.dynamic?this._reader.dynamic(e,r):this._reader.static(t.patterns,r)}}t.default=i},346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4426),o=r(7769);t.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t}getFilter(e,t,r){const n=this._getMatcher(t),o=this._getNegativePatternsRe(r);return t=>this._filter(e,t,n,o)}_getMatcher(e){return new o.default(e,this._settings,this._micromatchOptions)}_getNegativePatternsRe(e){const t=e.filter(n.pattern.isAffectDepthOfReadingPattern);return n.pattern.convertPatternsToRe(t,this._micromatchOptions)}_filter(e,t,r,o){if(this._isSkippedByDeep(e,t.path))return!1;if(this._isSkippedSymbolicLink(t))return!1;const i=n.path.removeLeadingDotSegment(t.path);return!this._isSkippedByPositivePatterns(i,r)&&this._isSkippedByNegativePatterns(i,o)}_isSkippedByDeep(e,t){return this._settings.deep!==1/0&&this._getEntryLevel(e,t)>=this._settings.deep}_getEntryLevel(e,t){const r=t.split("/").length;return""===e?r:r-e.split("/").length}_isSkippedSymbolicLink(e){return!this._settings.followSymbolicLinks&&e.dirent.isSymbolicLink()}_isSkippedByPositivePatterns(e,t){return!this._settings.baseNameMatch&&!t.match(e)}_isSkippedByNegativePatterns(e,t){return!n.pattern.matchAny(e,t)}}},7026:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4426);t.default=class{constructor(e,t){this._settings=e,this._micromatchOptions=t,this.index=new Map}getFilter(e,t){const r=n.pattern.convertPatternsToRe(e,this._micromatchOptions),o=n.pattern.convertPatternsToRe(t,this._micromatchOptions);return e=>this._filter(e,r,o)}_filter(e,t,r){if(this._settings.unique&&this._isDuplicateEntry(e))return!1;if(this._onlyFileFilter(e)||this._onlyDirectoryFilter(e))return!1;if(this._isSkippedByAbsoluteNegativePatterns(e.path,r))return!1;const n=this._settings.baseNameMatch?e.name:e.path,o=this._isMatchToPatterns(n,t)&&!this._isMatchToPatterns(e.path,r);return this._settings.unique&&o&&this._createIndexRecord(e),o}_isDuplicateEntry(e){return this.index.has(e.path)}_createIndexRecord(e){this.index.set(e.path,void 0)}_onlyFileFilter(e){return this._settings.onlyFiles&&!e.dirent.isFile()}_onlyDirectoryFilter(e){return this._settings.onlyDirectories&&!e.dirent.isDirectory()}_isSkippedByAbsoluteNegativePatterns(e,t){if(!this._settings.absolute)return!1;const r=n.path.makeAbsolute(this._settings.cwd,e);return n.pattern.matchAny(r,t)}_isMatchToPatterns(e,t){const r=n.path.removeLeadingDotSegment(e);return n.pattern.matchAny(r,t)}}},3046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4426);t.default=class{constructor(e){this._settings=e}getFilter(){return e=>this._isNonFatalError(e)}_isNonFatalError(e){return n.errno.isEnoentCodeError(e)||this._settings.suppressErrors}}},92:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4426);t.default=class{constructor(e,t,r){this._patterns=e,this._settings=t,this._micromatchOptions=r,this._storage=[],this._fillStorage()}_fillStorage(){const e=n.pattern.expandPatternsWithBraceExpansion(this._patterns);for(const t of e){const e=this._getPatternSegments(t),r=this._splitSegmentsIntoSections(e);this._storage.push({complete:r.length<=1,pattern:t,segments:e,sections:r})}}_getPatternSegments(e){return n.pattern.getPatternParts(e,this._micromatchOptions).map((e=>n.pattern.isDynamicPattern(e,this._settings)?{dynamic:!0,pattern:e,patternRe:n.pattern.makeRe(e,this._micromatchOptions)}:{dynamic:!1,pattern:e}))}_splitSegmentsIntoSections(e){return n.array.splitWhen(e,(e=>e.dynamic&&n.pattern.hasGlobStar(e.pattern)))}}},7769:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(92);class o extends n.default{match(e){const t=e.split("/"),r=t.length,n=this._storage.filter((e=>!e.complete||e.segments.length>r));for(const e of n){const n=e.sections[0];if(!e.complete&&r>n.length)return!0;if(t.every(((t,r)=>{const n=e.segments[r];return!(!n.dynamic||!n.patternRe.test(t))||!n.dynamic&&n.pattern===t})))return!0}return!1}}t.default=o},466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5622),o=r(346),i=r(7026),a=r(3046),s=r(218);t.default=class{constructor(e){this._settings=e,this.errorFilter=new a.default(this._settings),this.entryFilter=new i.default(this._settings,this._getMicromatchOptions()),this.deepFilter=new o.default(this._settings,this._getMicromatchOptions()),this.entryTransformer=new s.default(this._settings)}_getRootDirectory(e){return n.resolve(this._settings.cwd,e.base)}_getReaderOptions(e){const t="."===e.base?"":e.base;return{basePath:t,pathSegmentSeparator:"/",concurrency:this._settings.concurrency,deepFilter:this.deepFilter.getFilter(t,e.positive,e.negative),entryFilter:this.entryFilter.getFilter(e.positive,e.negative),errorFilter:this.errorFilter.getFilter(),followSymbolicLinks:this._settings.followSymbolicLinks,fs:this._settings.fs,stats:this._settings.stats,throwErrorOnBrokenSymbolicLink:this._settings.throwErrorOnBrokenSymbolicLink,transform:this.entryTransformer.getTransformer()}}_getMicromatchOptions(){return{dot:this._settings.dot,matchBase:this._settings.baseNameMatch,nobrace:!this._settings.braceExpansion,nocase:!this._settings.caseSensitiveMatch,noext:!this._settings.extglob,noglobstar:!this._settings.globstar,posix:!0,strictSlashes:!1}}}},4954:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2413),o=r(9086),i=r(466);class a extends i.default{constructor(){super(...arguments),this._reader=new o.default(this._settings)}read(e){const t=this._getRootDirectory(e),r=this._getReaderOptions(e),o=this.api(t,e,r),i=new n.Readable({objectMode:!0,read:()=>{}});return o.once("error",(e=>i.emit("error",e))).on("data",(e=>i.emit("data",r.transform(e)))).once("end",(()=>i.emit("end"))),i.once("close",(()=>o.destroy())),i}api(e,t,r){return t.dynamic?this._reader.dynamic(e,r):this._reader.static(t.patterns,r)}}t.default=a},4113:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(112),o=r(466);class i extends o.default{constructor(){super(...arguments),this._reader=new n.default(this._settings)}read(e){const t=this._getRootDirectory(e),r=this._getReaderOptions(e);return this.api(t,e,r).map(r.transform)}api(e,t,r){return t.dynamic?this._reader.dynamic(e,r):this._reader.static(t.patterns,r)}}t.default=i},218:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(4426);t.default=class{constructor(e){this._settings=e}getTransformer(){return e=>this._transform(e)}_transform(e){let t=e.path;return this._settings.absolute&&(t=n.path.makeAbsolute(this._settings.cwd,t),t=n.path.unixify(t)),this._settings.markDirectories&&e.dirent.isDirectory()&&(t+="/"),this._settings.objectMode?Object.assign(Object.assign({},e),{path:t}):t}}},2117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(5622),o=r(6203),i=r(4426);t.default=class{constructor(e){this._settings=e,this._fsStatSettings=new o.Settings({followSymbolicLink:this._settings.followSymbolicLinks,fs:this._settings.fs,throwErrorOnBrokenSymbolicLink:this._settings.followSymbolicLinks})}_getFullEntryPath(e){return n.resolve(this._settings.cwd,e)}_makeEntry(e,t){const r={name:t,path:t,dirent:i.fs.createDirentFromStats(t,e)};return this._settings.stats&&(r.stats=e),r}_isFatalError(e){return!i.errno.isEnoentCodeError(e)&&!this._settings.suppressErrors}}},9086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(2413),o=r(6203),i=r(5439),a=r(2117);class s extends a.default{constructor(){super(...arguments),this._walkStream=i.walkStream,this._stat=o.stat}dynamic(e,t){return this._walkStream(e,t)}static(e,t){const r=e.map(this._getFullEntryPath,this),o=new n.PassThrough({objectMode:!0});o._write=(n,i,a)=>this._getEntry(r[n],e[n],t).then((e=>{null!==e&&t.entryFilter(e)&&o.push(e),n===r.length-1&&o.end(),a()})).catch(a);for(let e=0;e<r.length;e++)o.write(e);return o}_getEntry(e,t,r){return this._getStat(e).then((e=>this._makeEntry(e,t))).catch((e=>{if(r.errorFilter(e))return null;throw e}))}_getStat(e){return new Promise(((t,r)=>{this._stat(e,this._fsStatSettings,((e,n)=>null===e?t(n):r(e)))}))}}t.default=s},112:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(6203),o=r(5439),i=r(2117);class a extends i.default{constructor(){super(...arguments),this._walkSync=o.walkSync,this._statSync=n.statSync}dynamic(e,t){return this._walkSync(e,t)}static(e,t){const r=[];for(const n of e){const e=this._getFullEntryPath(n),o=this._getEntry(e,n,t);null!==o&&t.entryFilter(o)&&r.push(o)}return r}_getEntry(e,t,r){try{const r=this._getStat(e);return this._makeEntry(r,t)}catch(e){if(r.errorFilter(e))return null;throw e}}_getStat(e){return this._statSync(e,this._fsStatSettings)}}t.default=a},3862:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_FILE_SYSTEM_ADAPTER=void 0;const n=r(5747),o=r(2087),i=Math.max(o.cpus().length,1);t.DEFAULT_FILE_SYSTEM_ADAPTER={lstat:n.lstat,lstatSync:n.lstatSync,stat:n.stat,statSync:n.statSync,readdir:n.readdir,readdirSync:n.readdirSync},t.default=class{constructor(e={}){this._options=e,this.absolute=this._getValue(this._options.absolute,!1),this.baseNameMatch=this._getValue(this._options.baseNameMatch,!1),this.braceExpansion=this._getValue(this._options.braceExpansion,!0),this.caseSensitiveMatch=this._getValue(this._options.caseSensitiveMatch,!0),this.concurrency=this._getValue(this._options.concurrency,i),this.cwd=this._getValue(this._options.cwd,process.cwd()),this.deep=this._getValue(this._options.deep,1/0),this.dot=this._getValue(this._options.dot,!1),this.extglob=this._getValue(this._options.extglob,!0),this.followSymbolicLinks=this._getValue(this._options.followSymbolicLinks,!0),this.fs=this._getFileSystemMethods(this._options.fs),this.globstar=this._getValue(this._options.globstar,!0),this.ignore=this._getValue(this._options.ignore,[]),this.markDirectories=this._getValue(this._options.markDirectories,!1),this.objectMode=this._getValue(this._options.objectMode,!1),this.onlyDirectories=this._getValue(this._options.onlyDirectories,!1),this.onlyFiles=this._getValue(this._options.onlyFiles,!0),this.stats=this._getValue(this._options.stats,!1),this.suppressErrors=this._getValue(this._options.suppressErrors,!1),this.throwErrorOnBrokenSymbolicLink=this._getValue(this._options.throwErrorOnBrokenSymbolicLink,!1),this.unique=this._getValue(this._options.unique,!0),this.onlyDirectories&&(this.onlyFiles=!1),this.stats&&(this.objectMode=!0)}_getValue(e,t){return void 0===e?t:e}_getFileSystemMethods(e={}){return Object.assign(Object.assign({},t.DEFAULT_FILE_SYSTEM_ADAPTER),e)}}},4825:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitWhen=t.flatten=void 0,t.flatten=function(e){return e.reduce(((e,t)=>[].concat(e,t)),[])},t.splitWhen=function(e,t){const r=[[]];let n=0;for(const o of e)t(o)?(n++,r[n]=[]):r[n].push(o);return r}},7843:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEnoentCodeError=void 0,t.isEnoentCodeError=function(e){return"ENOENT"===e.code}},6334:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDirentFromStats=void 0;class r{constructor(e,t){this.name=e,this.isBlockDevice=t.isBlockDevice.bind(t),this.isCharacterDevice=t.isCharacterDevice.bind(t),this.isDirectory=t.isDirectory.bind(t),this.isFIFO=t.isFIFO.bind(t),this.isFile=t.isFile.bind(t),this.isSocket=t.isSocket.bind(t),this.isSymbolicLink=t.isSymbolicLink.bind(t)}}t.createDirentFromStats=function(e,t){return new r(e,t)}},4426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.string=t.stream=t.pattern=t.path=t.fs=t.errno=t.array=void 0;const n=r(4825);t.array=n;const o=r(7843);t.errno=o;const i=r(6334);t.fs=i;const a=r(2003);t.path=a;const s=r(57);t.pattern=s;const c=r(6242);t.stream=c;const l=r(3021);t.string=l},2003:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.removeLeadingDotSegment=t.escape=t.makeAbsolute=t.unixify=void 0;const n=r(5622),o=/(\\?)([()*?[\]{|}]|^!|[!+@](?=\())/g;t.unixify=function(e){return e.replace(/\\/g,"/")},t.makeAbsolute=function(e,t){return n.resolve(e,t)},t.escape=function(e){return e.replace(o,"\\$2")},t.removeLeadingDotSegment=function(e){if("."===e.charAt(0)){const t=e.charAt(1);if("/"===t||"\\"===t)return e.slice(2)}return e}},57:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.matchAny=t.convertPatternsToRe=t.makeRe=t.getPatternParts=t.expandBraceExpansion=t.expandPatternsWithBraceExpansion=t.isAffectDepthOfReadingPattern=t.endsWithSlashGlobStar=t.hasGlobStar=t.getBaseDirectory=t.isPatternRelatedToParentDirectory=t.getPatternsOutsideCurrentDirectory=t.getPatternsInsideCurrentDirectory=t.getPositivePatterns=t.getNegativePatterns=t.isPositivePattern=t.isNegativePattern=t.convertToNegativePattern=t.convertToPositivePattern=t.isDynamicPattern=t.isStaticPattern=void 0;const n=r(5622),o=r(7647),i=r(850),a=/[*?]|^!/,s=/\[.*]/,c=/(?:^|[^!*+?@])\(.*\|.*\)/,l=/[!*+?@]\(.*\)/,u=/{.*(?:,|\.\.).*}/;function p(e,t={}){return!d(e,t)}function d(e,t={}){return!!(""!==e&&(!1===t.caseSensitiveMatch||e.includes("\\")||a.test(e)||s.test(e)||c.test(e)||!1!==t.extglob&&l.test(e)||!1!==t.braceExpansion&&u.test(e)))}function h(e){return e.startsWith("!")&&"("!==e[1]}function m(e){return!h(e)}function f(e){return e.startsWith("..")||e.startsWith("./..")}function g(e){return e.endsWith("/**")}function y(e){return i.braces(e,{expand:!0,nodupes:!0})}function v(e,t){return i.makeRe(e,t)}t.isStaticPattern=p,t.isDynamicPattern=d,t.convertToPositivePattern=function(e){return h(e)?e.slice(1):e},t.convertToNegativePattern=function(e){return"!"+e},t.isNegativePattern=h,t.isPositivePattern=m,t.getNegativePatterns=function(e){return e.filter(h)},t.getPositivePatterns=function(e){return e.filter(m)},t.getPatternsInsideCurrentDirectory=function(e){return e.filter((e=>!f(e)))},t.getPatternsOutsideCurrentDirectory=function(e){return e.filter(f)},t.isPatternRelatedToParentDirectory=f,t.getBaseDirectory=function(e){return o(e,{flipBackslashes:!1})},t.hasGlobStar=function(e){return e.includes("**")},t.endsWithSlashGlobStar=g,t.isAffectDepthOfReadingPattern=function(e){const t=n.basename(e);return g(e)||p(t)},t.expandPatternsWithBraceExpansion=function(e){return e.reduce(((e,t)=>e.concat(y(t))),[])},t.expandBraceExpansion=y,t.getPatternParts=function(e,t){let{parts:r}=i.scan(e,Object.assign(Object.assign({},t),{parts:!0}));return 0===r.length&&(r=[e]),r[0].startsWith("/")&&(r[0]=r[0].slice(1),r.unshift("")),r},t.makeRe=v,t.convertPatternsToRe=function(e,t){return e.map((e=>v(e,t)))},t.matchAny=function(e,t){return t.some((t=>t.test(e)))}},6242:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merge=void 0;const n=r(155);function o(e){e.forEach((e=>e.emit("close")))}t.merge=function(e){const t=n(e);return e.forEach((e=>{e.once("error",(e=>t.emit("error",e)))})),t.once("close",(()=>o(e))),t.once("end",(()=>o(e))),t}},3021:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isEmpty=t.isString=void 0,t.isString=function(e){return"string"==typeof e},t.isEmpty=function(e){return""===e}},373:(e,t,r)=>{"use strict";var n=r(3650);function o(){}function i(){this.value=null,this.callback=o,this.next=null,this.release=o,this.context=null;var e=this;this.worked=function(t,r){var n=e.callback;e.value=null,e.callback=o,n.call(e.context,t,r),e.release(e)}}e.exports=function(e,t,r){"function"==typeof e&&(r=t,t=e,e=null);var a=n(i),s=null,c=null,l=0,u={push:function(r,n){var i=a.get();i.context=e,i.release=p,i.value=r,i.callback=n||o,l===u.concurrency||u.paused?c?(c.next=i,c=i):(s=i,c=i,u.saturated()):(l++,t.call(e,i.value,i.worked))},drain:o,saturated:o,pause:function(){u.paused=!0},paused:!1,concurrency:r,running:function(){return l},resume:function(){if(u.paused){u.paused=!1;for(var e=0;e<u.concurrency;e++)l++,p()}},idle:function(){return 0===l&&0===u.length()},length:function(){for(var e=s,t=0;e;)e=e.next,t++;return t},getQueue:function(){for(var e=s,t=[];e;)t.push(e.value),e=e.next;return t},unshift:function(r,n){var i=a.get();i.context=e,i.release=p,i.value=r,i.callback=n||o,l===u.concurrency||u.paused?s?(i.next=s,s=i):(s=i,c=i,u.saturated()):(l++,t.call(e,i.value,i.worked))},empty:o,kill:function(){s=null,c=null,u.drain=o},killAndDrain:function(){s=null,c=null,u.drain(),u.drain=o}};return u;function p(r){r&&a.release(r);var n=s;n?u.paused?l--:(c===s&&(c=null),s=n.next,n.next=null,t.call(e,n.value,n.worked),null===c&&u.empty()):0==--l&&u.drain()}}},2664:(e,t,r)=>{"use strict";const n=r(1669),o=r(5702),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),a=e=>"number"==typeof e||"string"==typeof e&&""!==e,s=e=>Number.isInteger(+e),c=e=>{let t=`${e}`,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},l=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},u=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},p=(e,t,r,n)=>{if(r)return o(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);return e===t?i:`[${i}-${String.fromCharCode(t)}]`},d=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return o(e,t,r)},h=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),m=(e,t,r)=>{if(!0===r.strictRanges)throw h([e,t]);return[]},f=(e,t,r,n={})=>{if(null==t&&a(e))return[e];if(!a(e)||!a(t))return m(e,t,n);if("function"==typeof r)return f(e,t,1,{transform:r});if(i(r))return f(e,t,0,r);let o={...n};return!0===o.capture&&(o.wrap=!0),r=r||o.step||1,s(r)?s(e)&&s(t)?((e,t,r=1,n={})=>{let o=Number(e),i=Number(t);if(!Number.isInteger(o)||!Number.isInteger(i)){if(!0===n.strictRanges)throw h([e,t]);return[]}0===o&&(o=0),0===i&&(i=0);let a=o>i,s=String(e),m=String(t),f=String(r);r=Math.max(Math.abs(r),1);let g=c(s)||c(m)||c(f),y=g?Math.max(s.length,m.length,f.length):0,v=!1===g&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(v);if(n.toRegex&&1===r)return p(u(e,y),u(t,y),!0,n);let w={negatives:[],positives:[]},S=[],P=0;for(;a?o>=i:o<=i;)!0===n.toRegex&&r>1?w[(E=o)<0?"negatives":"positives"].push(Math.abs(E)):S.push(l(b(o,P),y,v)),o=a?o-r:o+r,P++;var E;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort(((e,t)=>e<t?-1:e>t?1:0)),e.positives.sort(((e,t)=>e<t?-1:e>t?1:0));let r,n=t.capture?"":"?:",o="",i="";return e.positives.length&&(o=e.positives.join("|")),e.negatives.length&&(i=`-(${n}${e.negatives.join("|")})`),r=o&&i?`${o}|${i}`:o||i,t.wrap?`(${n}${r})`:r})(w,n):d(S,null,{wrap:!1,...n}):S})(e,t,r,o):((e,t,r=1,n={})=>{if(!s(e)&&e.length>1||!s(t)&&t.length>1)return m(e,t,n);let o=n.transform||(e=>String.fromCharCode(e)),i=`${e}`.charCodeAt(0),a=`${t}`.charCodeAt(0),c=i>a,l=Math.min(i,a),u=Math.max(i,a);if(n.toRegex&&1===r)return p(l,u,!1,n);let h=[],f=0;for(;c?i>=a:i<=a;)h.push(o(i,f)),i=c?i-r:i+r,f++;return!0===n.toRegex?d(h,null,{wrap:!1,options:n}):h})(e,t,Math.max(Math.abs(r),1),o):null==r||i(r)?f(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,o)};e.exports=f},5302:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(1381).mkdirsSync,a=r(318).utimesMillisSync,s=Symbol("notExist"),c=Symbol("existsReg");function l(e,t,r){if(!r.filter||r.filter(e,t))return function(e,t,r){const i=(r.dereference?n.statSync:n.lstatSync)(e);return i.isDirectory()?function(e,t,r,o){const i=h(r);if(i===s){if(m(t,r))throw new Error(`Cannot copy '${t}' to a subdirectory of itself, '${r}'.`);return function(e,t,r,o){return n.mkdirSync(r,e.mode),n.chmodSync(r,e.mode),d(t,r,o)}(e,t,r,o)}if(i===c){if(m(t,r))throw new Error(`Cannot copy '${t}' to a subdirectory of itself, '${r}'.`);return function(e,t,r){if(!n.statSync(t).isDirectory())throw new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`);return d(e,t,r)}(t,r,o)}if(t!==i)return d(t,r,o)}(i,e,t,r):i.isFile()||i.isCharacterDevice()||i.isBlockDevice()?function(e,t,r,n){const o=h(r);return o===s?p(e,t,r,n):o===c||t!==o?u(e,t,r,n):void 0}(i,e,t,r):i.isSymbolicLink()?function(e,t,r){let i=n.readlinkSync(e);r.dereference&&(i=o.resolve(process.cwd(),i));let a=h(t);if(a===s||a===c)return n.symlinkSync(i,t);if(r.dereference&&(a=o.resolve(process.cwd(),a)),a!==i){if(n.statSync(t).isDirectory()&&m(a,i))throw new Error(`Cannot overwrite '${a}' with '${i}'.`);return function(e,t){return n.unlinkSync(t),n.symlinkSync(e,t)}(i,t)}}(e,t,r):void 0}(e,t,r)}function u(e,t,r,o){if(o.overwrite)return n.unlinkSync(r),p(e,t,r,o);if(o.errorOnExist)throw new Error(`'${r}' already exists`)}function p(e,t,o,i){return"function"==typeof n.copyFileSync?(n.copyFileSync(t,o),n.chmodSync(o,e.mode),i.preserveTimestamps?a(o,e.atime,e.mtime):void 0):function(e,t,o,i){const a=r(7065)(65536),s=n.openSync(t,"r"),c=n.openSync(o,"w",e.mode);let l=1,u=0;for(;l>0;)l=n.readSync(s,a,0,65536,u),n.writeSync(c,a,0,l),u+=l;i.preserveTimestamps&&n.futimesSync(c,e.atime,e.mtime),n.closeSync(s),n.closeSync(c)}(e,t,o,i)}function d(e,t,r){n.readdirSync(e).forEach((n=>{l(o.join(e,n),o.join(t,n),r)}))}function h(e){let t;try{t=n.readlinkSync(e)}catch(e){if("ENOENT"===e.code)return s;if("EINVAL"===e.code||"UNKNOWN"===e.code)return c;throw e}return t}function m(e,t){const r=t.split(o.dirname(e)+o.sep)[1];if(r){const n=r.split(o.sep)[0];return!!n&&e!==t&&t.indexOf(e)>-1&&n===o.basename(e)}return!1}e.exports=function(e,t,r){if("function"==typeof r&&(r={filter:r}),(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),(e=o.resolve(e))===(t=o.resolve(t)))throw new Error("Source and destination must not be the same.");if(r.filter&&!r.filter(e,t))return;const a=o.dirname(t);return n.existsSync(a)||i(a),l(e,t,r)}},2536:(e,t,r)=>{e.exports={copySync:r(5302)}},7189:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(1381).mkdirs,a=r(9257).pathExists,s=r(318).utimesMillis,c=Symbol("notExist"),l=Symbol("existsReg");function u(e,t,r,n){const s=o.dirname(t);a(s,((o,a)=>o?n(o):a?p(e,t,r,n):void i(s,(o=>o?n(o):p(e,t,r,n)))))}function p(e,t,r,n){return r.filter?d(h,e,t,r,n):h(e,t,r,n)}function d(e,t,r,n,o){Promise.resolve(n.filter(t,r)).then((i=>i?e(t,r,n,o):o()),(e=>o(e)))}function h(e,t,r,i){(r.dereference?n.stat:n.lstat)(e,((a,s)=>a?i(a):s.isDirectory()?function(e,t,r,o,i){b(r,((a,s)=>a?i(a):s===c?w(t,r)?i(new Error(`Cannot copy '${t}' to a subdirectory of itself, '${r}'.`)):function(e,t,r,o,i){n.mkdir(r,e.mode,(a=>{if(a)return i(a);n.chmod(r,e.mode,(e=>e?i(e):y(t,r,o,i)))}))}(e,t,r,o,i):s===l?w(t,r)?i(new Error(`Cannot copy '${t}' to a subdirectory of itself, '${r}'.`)):function(e,t,r,o){n.stat(t,((n,i)=>n?o(n):i.isDirectory()?y(e,t,r,o):o(new Error(`Cannot overwrite non-directory '${t}' with directory '${e}'.`))))}(t,r,o,i):t===s?i():y(t,r,o,i)))}(s,e,t,r,i):s.isFile()||s.isCharacterDevice()||s.isBlockDevice()?function(e,t,r,n,o){b(r,((i,a)=>i?o(i):a===c?f(e,t,r,n,o):a===l?m(e,t,r,n,o):t===a?o():m(e,t,r,n,o)))}(s,e,t,r,i):s.isSymbolicLink()?function(e,t,r,i){n.readlink(e,((e,a)=>{if(e)return i(e);r.dereference&&(a=o.resolve(process.cwd(),a)),b(t,((e,s)=>e?i(e):s===c||s===l?n.symlink(a,t,i):(r.dereference&&(s=o.resolve(process.cwd(),s)),s===a?i():void n.stat(t,((e,r)=>e?i(e):r.isDirectory()&&w(s,a)?i(new Error(`Cannot overwrite '${s}' with '${a}'.`)):function(e,t,r){n.unlink(t,(o=>o?r(o):n.symlink(e,t,r)))}(a,t,i))))))}))}(e,t,r,i):void 0))}function m(e,t,r,o,i){if(!o.overwrite)return o.errorOnExist?i(new Error(`'${r}' already exists`)):i();n.unlink(r,(n=>n?i(n):f(e,t,r,o,i)))}function f(e,t,r,o,i){return"function"==typeof n.copyFile?n.copyFile(t,r,(t=>t?i(t):g(e,r,o,i))):function(e,t,r,o,i){const a=n.createReadStream(t);a.on("error",(e=>i(e))).once("open",(()=>{const t=n.createWriteStream(r,{mode:e.mode});t.on("error",(e=>i(e))).on("open",(()=>a.pipe(t))).once("close",(()=>g(e,r,o,i)))}))}(e,t,r,o,i)}function g(e,t,r,o){n.chmod(t,e.mode,(n=>n?o(n):r.preserveTimestamps?s(t,e.atime,e.mtime,o):o()))}function y(e,t,r,o){n.readdir(e,((n,i)=>n?o(n):v(i,e,t,r,o)))}function v(e,t,r,n,i){const a=e.pop();if(!a)return i();p(o.join(t,a),o.join(r,a),n,(o=>o?i(o):v(e,t,r,n,i)))}function b(e,t){n.readlink(e,((e,r)=>e?"ENOENT"===e.code?t(null,c):"EINVAL"===e.code||"UNKNOWN"===e.code?t(null,l):t(e):t(null,r)))}function w(e,t){const r=t.split(o.dirname(e)+o.sep)[1];if(r){const n=r.split(o.sep)[0];return!!n&&e!==t&&t.indexOf(e)>-1&&n===o.basename(e)}return!1}e.exports=function(e,t,r,n){return"function"!=typeof r||n?"function"==typeof r&&(r={filter:r}):(n=r,r={}),n=n||function(){},(r=r||{}).clobber=!("clobber"in r)||!!r.clobber,r.overwrite="overwrite"in r?!!r.overwrite:r.clobber,r.preserveTimestamps&&"ia32"===process.arch&&console.warn("fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269"),(e=o.resolve(e))===(t=o.resolve(t))?n(new Error("Source and destination must not be the same.")):r.filter?d(u,e,t,r,n):u(e,t,r,n)}},6464:(e,t,r)=>{const n=r(8981).E;e.exports={copy:n(r(7189))}},5590:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(5747),i=r(5622),a=r(1381),s=r(4542),c=n((function(e,t){t=t||function(){},o.readdir(e,((r,n)=>{if(r)return a.mkdirs(e,t);n=n.map((t=>i.join(e,t))),function e(){const r=n.pop();if(!r)return t();s.remove(r,(r=>{if(r)return t(r);e()}))}()}))}));function l(e){let t;try{t=o.readdirSync(e)}catch(t){return a.mkdirsSync(e)}t.forEach((t=>{t=i.join(e,t),s.removeSync(t)}))}e.exports={emptyDirSync:l,emptydirSync:l,emptyDir:c,emptydir:c}},6530:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(5622),i=r(77),a=r(1381),s=r(9257).pathExists;e.exports={createFile:n((function(e,t){function r(){i.writeFile(e,"",(e=>{if(e)return t(e);t()}))}i.stat(e,((n,i)=>{if(!n&&i.isFile())return t();const c=o.dirname(e);s(c,((e,n)=>e?t(e):n?r():void a.mkdirs(c,(e=>{if(e)return t(e);r()}))))}))})),createFileSync:function(e){let t;try{t=i.statSync(e)}catch(e){}if(t&&t.isFile())return;const r=o.dirname(e);i.existsSync(r)||a.mkdirsSync(r),i.writeFileSync(e,"")}}},1720:(e,t,r)=>{"use strict";const n=r(6530),o=r(4147),i=r(3635);e.exports={createFile:n.createFile,createFileSync:n.createFileSync,ensureFile:n.createFile,ensureFileSync:n.createFileSync,createLink:o.createLink,createLinkSync:o.createLinkSync,ensureLink:o.createLink,ensureLinkSync:o.createLinkSync,createSymlink:i.createSymlink,createSymlinkSync:i.createSymlinkSync,ensureSymlink:i.createSymlink,ensureSymlinkSync:i.createSymlinkSync}},4147:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(5622),i=r(77),a=r(1381),s=r(9257).pathExists;e.exports={createLink:n((function(e,t,r){function n(e,t){i.link(e,t,(e=>{if(e)return r(e);r(null)}))}s(t,((c,l)=>c?r(c):l?r(null):void i.lstat(e,((i,c)=>{if(i)return i.message=i.message.replace("lstat","ensureLink"),r(i);const l=o.dirname(t);s(l,((o,i)=>o?r(o):i?n(e,t):void a.mkdirs(l,(o=>{if(o)return r(o);n(e,t)}))))}))))})),createLinkSync:function(e,t,r){if(i.existsSync(t))return;try{i.lstatSync(e)}catch(e){throw e.message=e.message.replace("lstat","ensureLink"),e}const n=o.dirname(t);return i.existsSync(n)||a.mkdirsSync(n),i.linkSync(e,t)}}},6072:(e,t,r)=>{"use strict";const n=r(5622),o=r(77),i=r(9257).pathExists;e.exports={symlinkPaths:function(e,t,r){if(n.isAbsolute(e))return o.lstat(e,((t,n)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:e})));{const a=n.dirname(t),s=n.join(a,e);return i(s,((t,i)=>t?r(t):i?r(null,{toCwd:s,toDst:e}):o.lstat(e,((t,o)=>t?(t.message=t.message.replace("lstat","ensureSymlink"),r(t)):r(null,{toCwd:e,toDst:n.relative(a,e)})))))}},symlinkPathsSync:function(e,t){let r;if(n.isAbsolute(e)){if(r=o.existsSync(e),!r)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}{const i=n.dirname(t),a=n.join(i,e);if(r=o.existsSync(a),r)return{toCwd:a,toDst:e};if(r=o.existsSync(e),!r)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:n.relative(i,e)}}}}},9259:(e,t,r)=>{"use strict";const n=r(77);e.exports={symlinkType:function(e,t,r){if(r="function"==typeof t?t:r,t="function"!=typeof t&&t)return r(null,t);n.lstat(e,((e,n)=>{if(e)return r(null,"file");t=n&&n.isDirectory()?"dir":"file",r(null,t)}))},symlinkTypeSync:function(e,t){let r;if(t)return t;try{r=n.lstatSync(e)}catch(e){return"file"}return r&&r.isDirectory()?"dir":"file"}}},3635:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(5622),i=r(77),a=r(1381),s=a.mkdirs,c=a.mkdirsSync,l=r(6072),u=l.symlinkPaths,p=l.symlinkPathsSync,d=r(9259),h=d.symlinkType,m=d.symlinkTypeSync,f=r(9257).pathExists;e.exports={createSymlink:n((function(e,t,r,n){n="function"==typeof r?r:n,r="function"!=typeof r&&r,f(t,((a,c)=>a?n(a):c?n(null):void u(e,t,((a,c)=>{if(a)return n(a);e=c.toDst,h(c.toCwd,r,((r,a)=>{if(r)return n(r);const c=o.dirname(t);f(c,((r,o)=>r?n(r):o?i.symlink(e,t,a,n):void s(c,(r=>{if(r)return n(r);i.symlink(e,t,a,n)}))))}))}))))})),createSymlinkSync:function(e,t,r,n){if(n="function"==typeof r?r:n,r="function"!=typeof r&&r,i.existsSync(t))return;const a=p(e,t);e=a.toDst,r=m(a.toCwd,r);const s=o.dirname(t);return i.existsSync(s)||c(s),i.symlinkSync(e,t,r)}}},7749:(e,t,r)=>{const n=r(8981).E,o=r(77),i=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter((e=>"function"==typeof o[e]));Object.keys(o).forEach((e=>{t[e]=o[e]})),i.forEach((e=>{t[e]=n(o[e])})),t.exists=function(e,t){return"function"==typeof t?o.exists(e,t):new Promise((t=>o.exists(e,t)))},t.read=function(e,t,r,n,i,a){return"function"==typeof a?o.read(e,t,r,n,i,a):new Promise(((a,s)=>{o.read(e,t,r,n,i,((e,t,r)=>{if(e)return s(e);a({bytesRead:t,buffer:r})}))}))},t.write=function(e,t,r,n,i,a){return"function"==typeof arguments[arguments.length-1]?o.write(e,t,r,n,i,a):new Promise("string"==typeof t?(i,a)=>{o.write(e,t,r,n,((e,t,r)=>{if(e)return a(e);i({bytesWritten:t,buffer:r})}))}:(a,s)=>{o.write(e,t,r,n,i,((e,t,r)=>{if(e)return s(e);a({bytesWritten:t,buffer:r})}))})}},5674:(e,t,r)=>{"use strict";const n=r(3678),o={};n(o,r(7749)),n(o,r(6464)),n(o,r(2536)),n(o,r(1381)),n(o,r(4542)),n(o,r(6573)),n(o,r(530)),n(o,r(4026)),n(o,r(5590)),n(o,r(1720)),n(o,r(1315)),n(o,r(9257)),e.exports=o},6573:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(7183);o.outputJson=n(r(3508)),o.outputJsonSync=r(9578),o.outputJSON=o.outputJson,o.outputJSONSync=o.outputJsonSync,o.writeJSON=o.writeJson,o.writeJSONSync=o.writeJsonSync,o.readJSON=o.readJson,o.readJSONSync=o.readJsonSync,e.exports=o},7183:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(6813);e.exports={readJson:n(o.readFile),readJsonSync:o.readFileSync,writeJson:n(o.writeFile),writeJsonSync:o.writeFileSync}},9578:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(1381),a=r(7183);e.exports=function(e,t,r){const s=o.dirname(e);n.existsSync(s)||i.mkdirsSync(s),a.writeJsonSync(e,t,r)}},3508:(e,t,r)=>{"use strict";const n=r(5622),o=r(1381),i=r(9257).pathExists,a=r(7183);e.exports=function(e,t,r,s){"function"==typeof r&&(s=r,r={});const c=n.dirname(e);i(c,((n,i)=>n?s(n):i?a.writeJson(e,t,r,s):void o.mkdirs(c,(n=>{if(n)return s(n);a.writeJson(e,t,r,s)}))))}},1381:(e,t,r)=>{"use strict";const n=(0,r(8981).E)(r(4887)),o=r(1452);e.exports={mkdirs:n,mkdirsSync:o,mkdirp:n,mkdirpSync:o,ensureDir:n,ensureDirSync:o}},1452:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(2660).invalidWin32Path,a=parseInt("0777",8);e.exports=function e(t,r,s){r&&"object"==typeof r||(r={mode:r});let c=r.mode;const l=r.fs||n;if("win32"===process.platform&&i(t)){const e=new Error(t+" contains invalid WIN32 path characters.");throw e.code="EINVAL",e}void 0===c&&(c=a&~process.umask()),s||(s=null),t=o.resolve(t);try{l.mkdirSync(t,c),s=s||t}catch(n){switch(n.code){case"ENOENT":if(o.dirname(t)===t)throw n;s=e(o.dirname(t),r,s),e(t,r,s);break;default:let i;try{i=l.statSync(t)}catch(e){throw n}if(!i.isDirectory())throw n}}return s}},4887:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(2660).invalidWin32Path,a=parseInt("0777",8);e.exports=function e(t,r,s,c){if("function"==typeof r?(s=r,r={}):r&&"object"==typeof r||(r={mode:r}),"win32"===process.platform&&i(t)){const e=new Error(t+" contains invalid WIN32 path characters.");return e.code="EINVAL",s(e)}let l=r.mode;const u=r.fs||n;void 0===l&&(l=a&~process.umask()),c||(c=null),s=s||function(){},t=o.resolve(t),u.mkdir(t,l,(n=>{if(!n)return s(null,c=c||t);switch(n.code){case"ENOENT":if(o.dirname(t)===t)return s(n);e(o.dirname(t),r,((n,o)=>{n?s(n,o):e(t,r,s,o)}));break;default:u.stat(t,((e,t)=>{e||!t.isDirectory()?s(n,c):s(null,c)}))}}))}},2660:(e,t,r)=>{"use strict";const n=r(5622);function o(e){return(e=n.normalize(n.resolve(e)).split(n.sep)).length>0?e[0]:null}const i=/[<>:"|?*]/;e.exports={getRootPath:o,invalidWin32Path:function(e){const t=o(e);return e=e.replace(t,""),i.test(e)}}},4026:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(2536).copySync,a=r(4542).removeSync,s=r(1381).mkdirsSync,c=r(7065);function l(e,t,r){return n.statSync(e).isDirectory()?function(e,t,r){const n={overwrite:!1};function o(){return i(e,t,n),a(e)}r?(a(t),o()):o()}(e,t,r):function(e,t,r){const o=c(65536),i=r?"w":"wx",a=n.openSync(e,"r"),s=n.fstatSync(a),l=n.openSync(t,i,s.mode);let u=1,p=0;for(;u>0;)u=n.readSync(a,o,0,65536,p),n.writeSync(l,o,0,u),p+=u;return n.closeSync(a),n.closeSync(l),n.unlinkSync(e)}(e,t,r)}e.exports={moveSync:function e(t,r,i){const c=(i=i||{}).overwrite||i.clobber||!1;if(t=o.resolve(t),r=o.resolve(r),t===r)return n.accessSync(t);if(function(e,t){try{return n.statSync(e).isDirectory()&&e!==t&&t.indexOf(e)>-1&&t.split(o.dirname(e)+o.sep)[1].split(o.sep)[0]===o.basename(e)}catch(e){return!1}}(t,r))throw new Error(`Cannot move '${t}' into itself '${r}'.`);s(o.dirname(r)),function(){if(c)try{n.renameSync(t,r)}catch(n){if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)return a(r),i.overwrite=!1,e(t,r,i);if("EXDEV"!==n.code)throw n;return l(t,r,c)}else try{n.linkSync(t,r),n.unlinkSync(t)}catch(e){if("EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code)return l(t,r,c);throw e}}()}}},530:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(77),i=r(7189),a=r(5622),s=r(4542).remove,c=r(1381).mkdirs;function l(e,t,r,n){o.stat(e,((i,a)=>{if(i)return n(i);a.isDirectory()?u(e,t,r,n):function(e,t,r,n){const i=r?"w":"wx",a=o.createReadStream(e),s=o.createWriteStream(t,{flags:i});function c(){o.unlink(e,n)}a.on("error",(i=>{a.destroy(),s.destroy(),s.removeListener("close",c),o.unlink(t,(()=>{"EISDIR"===i.code||"EPERM"===i.code?u(e,t,r,n):n(i)}))})),s.on("error",(e=>{a.destroy(),s.destroy(),s.removeListener("close",c),n(e)})),s.once("close",c),a.pipe(s)}(e,t,r,n)}))}function u(e,t,r,n){const o={overwrite:!1};function a(){i(e,t,o,(t=>{if(t)return n(t);s(e,n)}))}r?s(t,(e=>{if(e)return n(e);a()})):a()}e.exports={move:n((function e(t,r,n,i){"function"==typeof n&&(i=n,n={});const u=n.overwrite||n.clobber||!1;!function(e,t,r){o.stat(e,((n,o)=>{if(n)return r(n);if(o.isDirectory()){const n=t.split(a.dirname(e)+a.sep)[1];if(n){const o=n.split(a.sep)[0];return r(null,!!o&&(e!==t&&t.indexOf(e)>-1&&o===a.basename(e)))}return r(null,!1)}return r(null,!1)}))}(t,r,((p,d)=>p?i(p):d?i(new Error(`Cannot move '${t}' to a subdirectory of itself, '${r}'.`)):void c(a.dirname(r),(c=>{if(c)return i(c);a.resolve(t)===a.resolve(r)?o.access(t,i):u?o.rename(t,r,(o=>{if(!o)return i();if("ENOTEMPTY"!==o.code&&"EEXIST"!==o.code){if("EPERM"!==o.code)return"EXDEV"!==o.code?i(o):void l(t,r,u,i);setTimeout((()=>{s(r,(o=>{if(o)return i(o);n.overwrite=!1,e(t,r,n,i)}))}),200)}else s(r,(o=>{if(o)return i(o);n.overwrite=!1,e(t,r,n,i)}))})):o.link(t,r,(e=>e?"EXDEV"===e.code||"EISDIR"===e.code||"EPERM"===e.code||"ENOTSUP"===e.code?l(t,r,u,i):i(e):o.unlink(t,i)))}))))}))}},1315:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(77),i=r(5622),a=r(1381),s=r(9257).pathExists;e.exports={outputFile:n((function(e,t,r,n){"function"==typeof r&&(n=r,r="utf8");const c=i.dirname(e);s(c,((i,s)=>i?n(i):s?o.writeFile(e,t,r,n):void a.mkdirs(c,(i=>{if(i)return n(i);o.writeFile(e,t,r,n)}))))})),outputFileSync:function(e,t,r){const n=i.dirname(e);if(o.existsSync(n))return o.writeFileSync.apply(o,arguments);a.mkdirsSync(n),o.writeFileSync.apply(o,arguments)}}},9257:(e,t,r)=>{"use strict";const n=r(8981).p,o=r(7749);e.exports={pathExists:n((function(e){return o.access(e).then((()=>!0)).catch((()=>!1))})),pathExistsSync:o.existsSync}},4542:(e,t,r)=>{"use strict";const n=r(8981).E,o=r(8157);e.exports={remove:n(o),removeSync:o.sync}},8157:(e,t,r)=>{"use strict";const n=r(77),o=r(5622),i=r(2357),a="win32"===process.platform;function s(e){["unlink","chmod","stat","lstat","rmdir","readdir"].forEach((t=>{e[t]=e[t]||n[t],e[t+="Sync"]=e[t]||n[t]})),e.maxBusyTries=e.maxBusyTries||3}function c(e,t,r){let n=0;"function"==typeof t&&(r=t,t={}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i.equal(typeof r,"function","rimraf: callback function required"),i(t,"rimraf: invalid options argument provided"),i.equal(typeof t,"object","rimraf: options should be object"),s(t),l(e,t,(function o(i){if(i){if(("EBUSY"===i.code||"ENOTEMPTY"===i.code||"EPERM"===i.code)&&n<t.maxBusyTries)return n++,setTimeout((()=>l(e,t,o)),100*n);"ENOENT"===i.code&&(i=null)}r(i)}))}function l(e,t,r){i(e),i(t),i("function"==typeof r),t.lstat(e,((n,o)=>n&&"ENOENT"===n.code?r(null):n&&"EPERM"===n.code&&a?u(e,t,n,r):o&&o.isDirectory()?d(e,t,n,r):void t.unlink(e,(n=>{if(n){if("ENOENT"===n.code)return r(null);if("EPERM"===n.code)return a?u(e,t,n,r):d(e,t,n,r);if("EISDIR"===n.code)return d(e,t,n,r)}return r(n)}))))}function u(e,t,r,n){i(e),i(t),i("function"==typeof n),r&&i(r instanceof Error),t.chmod(e,438,(o=>{o?n("ENOENT"===o.code?null:r):t.stat(e,((o,i)=>{o?n("ENOENT"===o.code?null:r):i.isDirectory()?d(e,t,r,n):t.unlink(e,n)}))}))}function p(e,t,r){let n;i(e),i(t),r&&i(r instanceof Error);try{t.chmodSync(e,438)}catch(e){if("ENOENT"===e.code)return;throw r}try{n=t.statSync(e)}catch(e){if("ENOENT"===e.code)return;throw r}n.isDirectory()?m(e,t,r):t.unlinkSync(e)}function d(e,t,r,n){i(e),i(t),r&&i(r instanceof Error),i("function"==typeof n),t.rmdir(e,(a=>{!a||"ENOTEMPTY"!==a.code&&"EEXIST"!==a.code&&"EPERM"!==a.code?a&&"ENOTDIR"===a.code?n(r):n(a):function(e,t,r){i(e),i(t),i("function"==typeof r),t.readdir(e,((n,i)=>{if(n)return r(n);let a,s=i.length;if(0===s)return t.rmdir(e,r);i.forEach((n=>{c(o.join(e,n),t,(n=>{if(!a)return n?r(a=n):void(0==--s&&t.rmdir(e,r))}))}))}))}(e,t,n)}))}function h(e,t){let r;s(t=t||{}),i(e,"rimraf: missing path"),i.equal(typeof e,"string","rimraf: path should be a string"),i(t,"rimraf: missing options"),i.equal(typeof t,"object","rimraf: options should be object");try{r=t.lstatSync(e)}catch(r){if("ENOENT"===r.code)return;"EPERM"===r.code&&a&&p(e,t,r)}try{r&&r.isDirectory()?m(e,t,null):t.unlinkSync(e)}catch(r){if("ENOENT"===r.code)return;if("EPERM"===r.code)return a?p(e,t,r):m(e,t,r);if("EISDIR"!==r.code)throw r;m(e,t,r)}}function m(e,t,r){i(e),i(t),r&&i(r instanceof Error);try{t.rmdirSync(e)}catch(n){if("ENOTDIR"===n.code)throw r;if("ENOTEMPTY"===n.code||"EEXIST"===n.code||"EPERM"===n.code)!function(e,t){i(e),i(t),t.readdirSync(e).forEach((r=>h(o.join(e,r),t)));const r=a?100:1;let n=0;for(;;){let o=!0;try{const i=t.rmdirSync(e,t);return o=!1,i}finally{if(++n<r&&o)continue}}}(e,t);else if("ENOENT"!==n.code)throw n}}e.exports=c,c.sync=h},3678:e=>{"use strict";e.exports=function(){const e=[].slice.call(arguments).filter((e=>e)),t=e.shift();return e.forEach((e=>{Object.keys(e).forEach((r=>{t[r]=e[r]}))})),t}},7065:e=>{e.exports=function(e){if("function"==typeof Buffer.allocUnsafe)try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}return new Buffer(e)}},318:(e,t,r)=>{"use strict";const n=r(77),o=r(2087),i=r(5622);e.exports={hasMillisRes:function(e){let t=i.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=i.join(o.tmpdir(),t);const r=new Date(1435410243862);n.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",(o=>{if(o)return e(o);n.open(t,"r+",((o,i)=>{if(o)return e(o);n.futimes(i,r,r,(r=>{if(r)return e(r);n.close(i,(r=>{if(r)return e(r);n.stat(t,((t,r)=>{if(t)return e(t);e(null,r.mtime>1435410243e3)}))}))}))}))}))},hasMillisResSync:function(){let e=i.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=i.join(o.tmpdir(),e);const t=new Date(1435410243862);n.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const r=n.openSync(e,"r+");return n.futimesSync(r,t,t),n.closeSync(r),n.statSync(e).mtime>1435410243e3},timeRemoveMillis:function(e){if("number"==typeof e)return 1e3*Math.floor(e/1e3);if(e instanceof Date)return new Date(1e3*Math.floor(e.getTime()/1e3));throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")},utimesMillis:function(e,t,r,o){n.open(e,"r+",((e,i)=>{if(e)return o(e);n.futimes(i,t,r,(e=>{n.close(i,(t=>{o&&o(e||t)}))}))}))},utimesMillisSync:function(e,t,r){const o=n.openSync(e,"r+");return n.futimesSync(o,t,r),n.closeSync(o)}}},7647:(e,t,r)=>{"use strict";var n=r(6830),o=r(5622).posix.dirname,i="win32"===r(2087).platform(),a=/\\/g,s=/[\{\[].*[\}\]]$/,c=/(^|[^\\])([\{\[]|\([^\)]+$)/,l=/\\([\!\*\?\|\[\]\(\)\{\}])/g;e.exports=function(e,t){Object.assign({flipBackslashes:!0},t).flipBackslashes&&i&&e.indexOf("/")<0&&(e=e.replace(a,"/")),s.test(e)&&(e+="/"),e+="a";do{e=o(e)}while(n(e)||c.test(e));return e.replace(l,"$1")}},6458:e=>{"use strict";e.exports=function(e){if(null===e||"object"!=typeof e)return e;if(e instanceof Object)var r={__proto__:t(e)};else r=Object.create(null);return Object.getOwnPropertyNames(e).forEach((function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))})),r};var t=Object.getPrototypeOf||function(e){return e.__proto__}},77:(e,t,r)=>{var n,o,i=r(5747),a=r(2161),s=r(8520),c=r(6458),l=r(1669);function u(e,t){Object.defineProperty(e,n,{get:function(){return t}})}"function"==typeof Symbol&&"function"==typeof Symbol.for?(n=Symbol.for("graceful-fs.queue"),o=Symbol.for("graceful-fs.previous")):(n="___graceful-fs.queue",o="___graceful-fs.previous");var p,d=function(){};if(l.debuglog?d=l.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(d=function(){var e=l.format.apply(l,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: "),console.error(e)}),!i[n]){var h=global[n]||[];u(i,h),i.close=function(e){function t(t,r){return e.call(i,t,(function(e){e||g(),"function"==typeof r&&r.apply(this,arguments)}))}return Object.defineProperty(t,o,{value:e}),t}(i.close),i.closeSync=function(e){function t(t){e.apply(i,arguments),g()}return Object.defineProperty(t,o,{value:e}),t}(i.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",(function(){d(i[n]),r(2357).equal(i[n].length,0)}))}function m(e){a(e),e.gracefulify=m,e.createReadStream=function(t,r){return new e.ReadStream(t,r)},e.createWriteStream=function(t,r){return new e.WriteStream(t,r)};var t=e.readFile;e.readFile=function(e,r,n){return"function"==typeof r&&(n=r,r=null),function e(r,n,o,i){return t(r,n,(function(t){!t||"EMFILE"!==t.code&&"ENFILE"!==t.code?"function"==typeof o&&o.apply(this,arguments):f([e,[r,n,o],t,i||Date.now(),Date.now()])}))}(e,r,n)};var r=e.writeFile;e.writeFile=function(e,t,n,o){return"function"==typeof n&&(o=n,n=null),function e(t,n,o,i,a){return r(t,n,o,(function(r){!r||"EMFILE"!==r.code&&"ENFILE"!==r.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,n,o,i],r,a||Date.now(),Date.now()])}))}(e,t,n,o)};var n=e.appendFile;n&&(e.appendFile=function(e,t,r,o){return"function"==typeof r&&(o=r,r=null),function e(t,r,o,i,a){return n(t,r,o,(function(n){!n||"EMFILE"!==n.code&&"ENFILE"!==n.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,r,o,i],n,a||Date.now(),Date.now()])}))}(e,t,r,o)});var o=e.copyFile;o&&(e.copyFile=function(e,t,r,n){return"function"==typeof r&&(n=r,r=0),function e(t,r,n,i,a){return o(t,r,n,(function(o){!o||"EMFILE"!==o.code&&"ENFILE"!==o.code?"function"==typeof i&&i.apply(this,arguments):f([e,[t,r,n,i],o,a||Date.now(),Date.now()])}))}(e,t,r,n)});var i=e.readdir;if(e.readdir=function(e,t,r){return"function"==typeof t&&(r=t,t=null),function e(t,r,n,o){return i(t,r,(function(i,a){!i||"EMFILE"!==i.code&&"ENFILE"!==i.code?(a&&a.sort&&a.sort(),"function"==typeof n&&n.call(this,i,a)):f([e,[t,r,n],i,o||Date.now(),Date.now()])}))}(e,t,r)},"v0.8"===process.version.substr(0,4)){var c=s(e);h=c.ReadStream,g=c.WriteStream}var l=e.ReadStream;l&&(h.prototype=Object.create(l.prototype),h.prototype.open=function(){var e=this;v(e.path,e.flags,e.mode,(function(t,r){t?(e.autoClose&&e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r),e.read())}))});var u=e.WriteStream;u&&(g.prototype=Object.create(u.prototype),g.prototype.open=function(){var e=this;v(e.path,e.flags,e.mode,(function(t,r){t?(e.destroy(),e.emit("error",t)):(e.fd=r,e.emit("open",r))}))}),Object.defineProperty(e,"ReadStream",{get:function(){return h},set:function(e){h=e},enumerable:!0,configurable:!0}),Object.defineProperty(e,"WriteStream",{get:function(){return g},set:function(e){g=e},enumerable:!0,configurable:!0});var p=h;Object.defineProperty(e,"FileReadStream",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0});var d=g;function h(e,t){return this instanceof h?(l.apply(this,arguments),this):h.apply(Object.create(h.prototype),arguments)}function g(e,t){return this instanceof g?(u.apply(this,arguments),this):g.apply(Object.create(g.prototype),arguments)}Object.defineProperty(e,"FileWriteStream",{get:function(){return d},set:function(e){d=e},enumerable:!0,configurable:!0});var y=e.open;function v(e,t,r,n){return"function"==typeof r&&(n=r,r=null),function e(t,r,n,o,i){return y(t,r,n,(function(a,s){!a||"EMFILE"!==a.code&&"ENFILE"!==a.code?"function"==typeof o&&o.apply(this,arguments):f([e,[t,r,n,o],a,i||Date.now(),Date.now()])}))}(e,t,r,n)}return e.open=v,e}function f(e){d("ENQUEUE",e[0].name,e[1]),i[n].push(e),y()}function g(){for(var e=Date.now(),t=0;t<i[n].length;++t)i[n][t].length>2&&(i[n][t][3]=e,i[n][t][4]=e);y()}function y(){if(clearTimeout(p),p=void 0,0!==i[n].length){var e=i[n].shift(),t=e[0],r=e[1],o=e[2],a=e[3],s=e[4];if(void 0===a)d("RETRY",t.name,r),t.apply(null,r);else if(Date.now()-a>=6e4){d("TIMEOUT",t.name,r);var c=r.pop();"function"==typeof c&&c.call(null,o)}else{var l=Date.now()-s,u=Math.max(s-a,1);l>=Math.min(1.2*u,100)?(d("RETRY",t.name,r),t.apply(null,r.concat([a]))):i[n].push(e)}void 0===p&&(p=setTimeout(y,0))}}global[n]||u(global,i[n]),e.exports=m(c(i)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!i.__patched&&(e.exports=m(i),i.__patched=!0)},8520:(e,t,r)=>{var n=r(2413).Stream;e.exports=function(e){return{ReadStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this);var i=this;this.path=r,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=65536,o=o||{};for(var a=Object.keys(o),s=0,c=a.length;s<c;s++){var l=a[s];this[l]=o[l]}if(this.encoding&&this.setEncoding(this.encoding),void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(void 0===this.end)this.end=1/0;else if("number"!=typeof this.end)throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}null===this.fd?e.open(this.path,this.flags,this.mode,(function(e,t){if(e)return i.emit("error",e),void(i.readable=!1);i.fd=t,i.emit("open",t),i._read()})):process.nextTick((function(){i._read()}))},WriteStream:function t(r,o){if(!(this instanceof t))return new t(r,o);n.call(this),this.path=r,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,o=o||{};for(var i=Object.keys(o),a=0,s=i.length;a<s;a++){var c=i[a];this[c]=o[c]}if(void 0!==this.start){if("number"!=typeof this.start)throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],null===this.fd&&(this._open=e.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}}},2161:(e,t,r)=>{var n=r(7619),o=process.cwd,i=null,a=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return i||(i=o.call(process)),i};try{process.cwd()}catch(e){}if("function"==typeof process.chdir){var s=process.chdir;process.chdir=function(e){i=null,s.call(process,e)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,s)}e.exports=function(e){var t,r;function o(t){return t?function(r,n,o){return t.call(e,r,n,(function(e){p(e)&&(e=null),o&&o.apply(this,arguments)}))}:t}function i(t){return t?function(r,n){try{return t.call(e,r,n)}catch(e){if(!p(e))throw e}}:t}function s(t){return t?function(r,n,o,i){return t.call(e,r,n,o,(function(e){p(e)&&(e=null),i&&i.apply(this,arguments)}))}:t}function c(t){return t?function(r,n,o){try{return t.call(e,r,n,o)}catch(e){if(!p(e))throw e}}:t}function l(t){return t?function(r,n,o){function i(e,t){t&&(t.uid<0&&(t.uid+=4294967296),t.gid<0&&(t.gid+=4294967296)),o&&o.apply(this,arguments)}return"function"==typeof n&&(o=n,n=null),n?t.call(e,r,n,i):t.call(e,r,i)}:t}function u(t){return t?function(r,n){var o=n?t.call(e,r,n):t.call(e,r);return o.uid<0&&(o.uid+=4294967296),o.gid<0&&(o.gid+=4294967296),o}:t}function p(e){return!e||"ENOSYS"===e.code||!(process.getuid&&0===process.getuid()||"EINVAL"!==e.code&&"EPERM"!==e.code)}n.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&function(e){e.lchmod=function(t,r,o){e.open(t,n.O_WRONLY|n.O_SYMLINK,r,(function(t,n){t?o&&o(t):e.fchmod(n,r,(function(t){e.close(n,(function(e){o&&o(t||e)}))}))}))},e.lchmodSync=function(t,r){var o,i=e.openSync(t,n.O_WRONLY|n.O_SYMLINK,r),a=!0;try{o=e.fchmodSync(i,r),a=!1}finally{if(a)try{e.closeSync(i)}catch(e){}else e.closeSync(i)}return o}}(e),e.lutimes||function(e){n.hasOwnProperty("O_SYMLINK")?(e.lutimes=function(t,r,o,i){e.open(t,n.O_SYMLINK,(function(t,n){t?i&&i(t):e.futimes(n,r,o,(function(t){e.close(n,(function(e){i&&i(t||e)}))}))}))},e.lutimesSync=function(t,r,o){var i,a=e.openSync(t,n.O_SYMLINK),s=!0;try{i=e.futimesSync(a,r,o),s=!1}finally{if(s)try{e.closeSync(a)}catch(e){}else e.closeSync(a)}return i}):(e.lutimes=function(e,t,r,n){n&&process.nextTick(n)},e.lutimesSync=function(){})}(e),e.chown=s(e.chown),e.fchown=s(e.fchown),e.lchown=s(e.lchown),e.chmod=o(e.chmod),e.fchmod=o(e.fchmod),e.lchmod=o(e.lchmod),e.chownSync=c(e.chownSync),e.fchownSync=c(e.fchownSync),e.lchownSync=c(e.lchownSync),e.chmodSync=i(e.chmodSync),e.fchmodSync=i(e.fchmodSync),e.lchmodSync=i(e.lchmodSync),e.stat=l(e.stat),e.fstat=l(e.fstat),e.lstat=l(e.lstat),e.statSync=u(e.statSync),e.fstatSync=u(e.fstatSync),e.lstatSync=u(e.lstatSync),e.lchmod||(e.lchmod=function(e,t,r){r&&process.nextTick(r)},e.lchmodSync=function(){}),e.lchown||(e.lchown=function(e,t,r,n){n&&process.nextTick(n)},e.lchownSync=function(){}),"win32"===a&&(e.rename=(t=e.rename,function(r,n,o){var i=Date.now(),a=0;t(r,n,(function s(c){if(c&&("EACCES"===c.code||"EPERM"===c.code)&&Date.now()-i<6e4)return setTimeout((function(){e.stat(n,(function(e,i){e&&"ENOENT"===e.code?t(r,n,s):o(c)}))}),a),void(a<100&&(a+=10));o&&o(c)}))})),e.read=function(t){function r(r,n,o,i,a,s){var c;if(s&&"function"==typeof s){var l=0;c=function(u,p,d){if(u&&"EAGAIN"===u.code&&l<10)return l++,t.call(e,r,n,o,i,a,c);s.apply(this,arguments)}}return t.call(e,r,n,o,i,a,c)}return Object.setPrototypeOf&&Object.setPrototypeOf(r,t),r}(e.read),e.readSync=(r=e.readSync,function(t,n,o,i,a){for(var s=0;;)try{return r.call(e,t,n,o,i,a)}catch(e){if("EAGAIN"===e.code&&s<10){s++;continue}throw e}})}},2428:e=>{e.exports=function(e){if("string"!=typeof e||""===e)return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}},6830:(e,t,r)=>{var n=r(2428),o={"{":"}","(":")","[":"]"},i=/\\(.)|(^!|\*|[\].+)]\?|\[[^\\\]]+\]|\{[^\\}]+\}|\(\?[:!=][^\\)]+\)|\([^|]+\|[^\\)]+\))/,a=/\\(.)|(^!|[*?{}()[\]]|\(\?)/;e.exports=function(e,t){if("string"!=typeof e||""===e)return!1;if(n(e))return!0;var r,s=i;for(t&&!1===t.strict&&(s=a);r=s.exec(e);){if(r[2])return!0;var c=r.index+r[0].length,l=r[1],u=l?o[l]:null;if(l&&u){var p=e.indexOf(u,c);-1!==p&&(c=p+1)}e=e.slice(c)}return!1}},9924:e=>{"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},1959:(e,t,r)=>{var n;function o(e,t,r){if("function"==typeof t&&(r=t,t={}),!r){if("function"!=typeof Promise)throw new TypeError("callback not provided");return new Promise((function(r,n){o(e,t||{},(function(e,t){e?n(e):r(t)}))}))}n(e,t||{},(function(e,n){e&&("EACCES"===e.code||t&&t.ignoreErrors)&&(e=null,n=!1),r(e,n)}))}r(5747),n="win32"===process.platform||global.TESTING_WINDOWS?r(1429):r(4601),e.exports=o,o.sync=function(e,t){try{return n.sync(e,t||{})}catch(e){if(t&&t.ignoreErrors||"EACCES"===e.code)return!1;throw e}}},4601:(e,t,r)=>{e.exports=o,o.sync=function(e,t){return i(n.statSync(e),t)};var n=r(5747);function o(e,t,r){n.stat(e,(function(e,n){r(e,!e&&i(n,t))}))}function i(e,t){return e.isFile()&&function(e,t){var r=e.mode,n=e.uid,o=e.gid,i=void 0!==t.uid?t.uid:process.getuid&&process.getuid(),a=void 0!==t.gid?t.gid:process.getgid&&process.getgid(),s=parseInt("100",8),c=parseInt("010",8);return r&parseInt("001",8)||r&c&&o===a||r&s&&n===i||r&(s|c)&&0===i}(e,t)}},1429:(e,t,r)=>{e.exports=i,i.sync=function(e,t){return o(n.statSync(e),e,t)};var n=r(5747);function o(e,t,r){return!(!e.isSymbolicLink()&&!e.isFile())&&function(e,t){var r=void 0!==t.pathExt?t.pathExt:process.env.PATHEXT;if(!r)return!0;if(-1!==(r=r.split(";")).indexOf(""))return!0;for(var n=0;n<r.length;n++){var o=r[n].toLowerCase();if(o&&e.substr(-o.length).toLowerCase()===o)return!0}return!1}(t,r)}function i(e,t,r){n.stat(e,(function(n,i){r(n,!n&&o(i,e,t))}))}},6813:(e,t,r)=>{var n;try{n=r(77)}catch(e){n=r(5747)}function o(e,t){var r,n="\n";return"object"==typeof t&&null!==t&&(t.spaces&&(r=t.spaces),t.EOL&&(n=t.EOL)),JSON.stringify(e,t?t.replacer:null,r).replace(/\n/g,n)+n}function i(e){return Buffer.isBuffer(e)&&(e=e.toString("utf8")),e.replace(/^\uFEFF/,"")}var a={readFile:function(e,t,r){null==r&&(r=t,t={}),"string"==typeof t&&(t={encoding:t});var o=(t=t||{}).fs||n,a=!0;"throws"in t&&(a=t.throws),o.readFile(e,t,(function(n,o){if(n)return r(n);var s;o=i(o);try{s=JSON.parse(o,t?t.reviver:null)}catch(t){return a?(t.message=e+": "+t.message,r(t)):r(null,null)}r(null,s)}))},readFileSync:function(e,t){"string"==typeof(t=t||{})&&(t={encoding:t});var r=t.fs||n,o=!0;"throws"in t&&(o=t.throws);try{var a=r.readFileSync(e,t);return a=i(a),JSON.parse(a,t.reviver)}catch(t){if(o)throw t.message=e+": "+t.message,t;return null}},writeFile:function(e,t,r,i){null==i&&(i=r,r={});var a=(r=r||{}).fs||n,s="";try{s=o(t,r)}catch(e){return void(i&&i(e,null))}a.writeFile(e,s,r,i)},writeFileSync:function(e,t,r){var i=(r=r||{}).fs||n,a=o(t,r);return i.writeFileSync(e,a,r)}};e.exports=a},9593:(e,t,r)=>{"use strict";const n=r(4411),o=Symbol("max"),i=Symbol("length"),a=Symbol("lengthCalculator"),s=Symbol("allowStale"),c=Symbol("maxAge"),l=Symbol("dispose"),u=Symbol("noDisposeOnSet"),p=Symbol("lruList"),d=Symbol("cache"),h=Symbol("updateAgeOnGet"),m=()=>1,f=(e,t,r)=>{const n=e[d].get(t);if(n){const t=n.value;if(g(e,t)){if(v(e,n),!e[s])return}else r&&(e[h]&&(n.value.now=Date.now()),e[p].unshiftNode(n));return t.value}},g=(e,t)=>{if(!t||!t.maxAge&&!e[c])return!1;const r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[c]&&r>e[c]},y=e=>{if(e[i]>e[o])for(let t=e[p].tail;e[i]>e[o]&&null!==t;){const r=t.prev;v(e,t),t=r}},v=(e,t)=>{if(t){const r=t.value;e[l]&&e[l](r.key,r.value),e[i]-=r.length,e[d].delete(r.key),e[p].removeNode(t)}};class b{constructor(e,t,r,n,o){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=o||0}}const w=(e,t,r,n)=>{let o=r.value;g(e,o)&&(v(e,r),e[s]||(o=void 0)),o&&t.call(n,o.value,o.key,e)};e.exports=class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[o]=e.max||1/0;const t=e.length||m;if(this[a]="function"!=typeof t?m:t,this[s]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[c]=e.maxAge||0,this[l]=e.dispose,this[u]=e.noDisposeOnSet||!1,this[h]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[o]=e||1/0,y(this)}get max(){return this[o]}set allowStale(e){this[s]=!!e}get allowStale(){return this[s]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[c]=e,y(this)}get maxAge(){return this[c]}set lengthCalculator(e){"function"!=typeof e&&(e=m),e!==this[a]&&(this[a]=e,this[i]=0,this[p].forEach((e=>{e.length=this[a](e.value,e.key),this[i]+=e.length}))),y(this)}get lengthCalculator(){return this[a]}get length(){return this[i]}get itemCount(){return this[p].length}rforEach(e,t){t=t||this;for(let r=this[p].tail;null!==r;){const n=r.prev;w(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[p].head;null!==r;){const n=r.next;w(this,e,r,t),r=n}}keys(){return this[p].toArray().map((e=>e.key))}values(){return this[p].toArray().map((e=>e.value))}reset(){this[l]&&this[p]&&this[p].length&&this[p].forEach((e=>this[l](e.key,e.value))),this[d]=new Map,this[p]=new n,this[i]=0}dump(){return this[p].map((e=>!g(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[p]}set(e,t,r){if((r=r||this[c])&&"number"!=typeof r)throw new TypeError("maxAge must be a number");const n=r?Date.now():0,s=this[a](t,e);if(this[d].has(e)){if(s>this[o])return v(this,this[d].get(e)),!1;const a=this[d].get(e).value;return this[l]&&(this[u]||this[l](e,a.value)),a.now=n,a.maxAge=r,a.value=t,this[i]+=s-a.length,a.length=s,this.get(e),y(this),!0}const h=new b(e,t,s,n,r);return h.length>this[o]?(this[l]&&this[l](e,t),!1):(this[i]+=h.length,this[p].unshift(h),this[d].set(e,this[p].head),y(this),!0)}has(e){if(!this[d].has(e))return!1;const t=this[d].get(e).value;return!g(this,t)}get(e){return f(this,e,!0)}peek(e){return f(this,e,!1)}pop(){const e=this[p].tail;return e?(v(this,e),e.value):null}del(e){v(this,this[d].get(e))}load(e){this.reset();const t=Date.now();for(let r=e.length-1;r>=0;r--){const n=e[r],o=n.e||0;if(0===o)this.set(n.k,n.v);else{const e=o-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[d].forEach(((e,t)=>f(this,t,!1)))}}},155:(e,t,r)=>{"use strict";const n=r(2413).PassThrough,o=Array.prototype.slice;function i(e,t){if(Array.isArray(e))for(let r=0,n=e.length;r<n;r++)e[r]=i(e[r],t);else{if(!e._readableState&&e.pipe&&(e=e.pipe(n(t))),!e._readableState||!e.pause||!e.pipe)throw new Error("Only readable stream can be merged.");e.pause()}return e}e.exports=function(){const e=[],t=o.call(arguments);let r=!1,a=t[t.length-1];a&&!Array.isArray(a)&&null==a.pipe?t.pop():a={};const s=!1!==a.end,c=!0===a.pipeError;null==a.objectMode&&(a.objectMode=!0),null==a.highWaterMark&&(a.highWaterMark=65536);const l=n(a);function u(){for(let t=0,r=arguments.length;t<r;t++)e.push(i(arguments[t],a));return p(),this}function p(){if(r)return;r=!0;let t=e.shift();if(!t)return void process.nextTick(d);Array.isArray(t)||(t=[t]);let n=t.length+1;function o(){--n>0||(r=!1,p())}function i(e){function t(){e.removeListener("merge2UnpipeEnd",t),e.removeListener("end",t),c&&e.removeListener("error",r),o()}function r(e){l.emit("error",e)}if(e._readableState.endEmitted)return o();e.on("merge2UnpipeEnd",t),e.on("end",t),c&&e.on("error",r),e.pipe(l,{end:!1}),e.resume()}for(let e=0;e<t.length;e++)i(t[e]);o()}function d(){r=!1,l.emit("queueDrain"),s&&l.end()}return l.setMaxListeners(0),l.add=u,l.on("unpipe",(function(e){e.emit("merge2UnpipeEnd")})),t.length&&u.apply(null,t),l}},850:(e,t,r)=>{"use strict";const n=r(1669),o=r(6744),i=r(9444),a=r(8702),s=e=>""===e||"./"===e,c=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,o=new Set,a=new Set,s=0,c=e=>{a.add(e.output),r&&r.onResult&&r.onResult(e)};for(let a=0;a<t.length;a++){let l=i(String(t[a]),{...r,onResult:c},!0),u=l.state.negated||l.state.negatedExtglob;u&&s++;for(let t of e){let e=l(t,!0);(u?!e.isMatch:e.isMatch)&&(u?n.add(e.output):(n.delete(e.output),o.add(e.output)))}}let l=(s===t.length?[...a]:[...o]).filter((e=>!n.has(e)));if(r&&0===l.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map((e=>e.replace(/\\/g,""))):t}return l};c.match=c,c.matcher=(e,t)=>i(e,t),c.any=c.isMatch=(e,t,r)=>i(t,r)(e),c.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,o=[],i=c(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),o.push(e.output)}});for(let e of o)i.includes(e)||n.add(e);return[...n]},c.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some((t=>c.contains(e,t,r)));if("string"==typeof t){if(s(e)||s(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return c.isMatch(e,t,{...r,contains:!0})},c.matchKeys=(e,t,r)=>{if(!a.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=c(Object.keys(e),t,r),o={};for(let t of n)o[t]=e[t];return o},c.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(n.some((e=>t(e))))return!0}return!1},c.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(!n.every((e=>t(e))))return!1}return!0},c.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every((t=>i(t,r)(e)))},c.capture=(e,t,r)=>{let n=a.isWindows(r),o=i.makeRe(String(e),{...r,capture:!0}).exec(n?a.toPosixSlashes(t):t);if(o)return o.slice(1).map((e=>void 0===e?"":e))},c.makeRe=(...e)=>i.makeRe(...e),c.scan=(...e)=>i.scan(...e),c.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of o(String(n),t))r.push(i.parse(e,t));return r},c.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:o(e,t)},c.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return c.braces(e,{...t,expand:!0})},e.exports=c},9444:(e,t,r)=>{"use strict";e.exports=r(6087)},1006:(e,t,r)=>{"use strict";const n=r(5622),o="\\.{1,2}(?:\\/|$)",i={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:o,NO_DOT:"(?!\\.)",NO_DOTS:`(?!(?:^|\\/)${o})`,NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:`(?!${o})`,QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},a={...i,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?a:i}},3376:(e,t,r)=>{"use strict";const n=r(1006),o=r(8702),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:a,REGEX_NON_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_BACKREF:c,REPLACEMENTS:l}=n,u=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map((e=>o.escapeRegex(e))).join("..")}return r},p=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,d=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const r={...t},d="number"==typeof r.maxLength?Math.min(i,r.maxLength):i;let h=e.length;if(h>d)throw new SyntaxError(`Input length: ${h}, exceeds maximum allowed length: ${d}`);const m={type:"bos",value:"",output:r.prepend||""},f=[m],g=r.capture?"":"?:",y=o.isWindows(t),v=n.globChars(y),b=n.extglobChars(v),{DOT_LITERAL:w,PLUS_LITERAL:S,SLASH_LITERAL:P,ONE_CHAR:E,DOTS_SLASH:D,NO_DOT:T,NO_DOT_SLASH:x,NO_DOTS_SLASH:_,QMARK:C,QMARK_NO_DOT:j,STAR:I,START_ANCHOR:N}=v,A=e=>`(${g}(?:(?!${N}${e.dot?D:w}).)*?)`,R=r.dot?"":T,F=r.dot?C:j;let k=!0===r.bash?A(r):I;r.capture&&(k=`(${k})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const O={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:f};e=o.removePrefix(e,O),h=e.length;const L=[],q=[],M=[];let B,V=m;const $=()=>O.index===h-1,U=O.peek=(t=1)=>e[O.index+t],H=O.advance=()=>e[++O.index]||"",G=()=>e.slice(O.index+1),z=(e="",t=0)=>{O.consumed+=e,O.index+=t},W=e=>{O.output+=null!=e.output?e.output:e.value,z(e.value)},X=()=>{let e=1;for(;"!"===U()&&("("!==U(2)||"?"===U(3));)H(),O.start++,e++;return e%2!=0&&(O.negated=!0,O.start++,!0)},Q=e=>{O[e]++,M.push(e)},K=e=>{O[e]--,M.pop()},Y=e=>{if("globstar"===V.type){const t=O.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||L.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(O.output=O.output.slice(0,-V.output.length),V.type="star",V.value="*",V.output=k,O.output+=V.output)}if(L.length&&"paren"!==e.type&&(L[L.length-1].inner+=e.value),(e.value||e.output)&&W(e),V&&"text"===V.type&&"text"===e.type)return V.value+=e.value,void(V.output=(V.output||"")+e.value);e.prev=V,f.push(e),V=e},J=(e,t)=>{const n={...b[t],conditions:1,inner:""};n.prev=V,n.parens=O.parens,n.output=O.output;const o=(r.capture?"(":"")+n.open;Q("parens"),Y({type:e,value:t,output:O.output?"":E}),Y({type:"paren",extglob:!0,value:H(),output:o}),L.push(n)},Z=e=>{let t,n=e.close+(r.capture?")":"");if("negate"===e.type){let o=k;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(o=A(r)),(o!==k||$()||/^\)+$/.test(G()))&&(n=e.close=`)$))${o}`),e.inner.includes("*")&&(t=G())&&/^\.[^\\/.]+$/.test(t)&&(n=e.close=`)${t})${o})`),"bos"===e.prev.type&&(O.negatedExtglob=!0)}Y({type:"paren",extglob:!0,value:B,output:n}),K("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,i=e.replace(c,((e,t,r,o,i,a)=>"\\"===o?(n=!0,e):"?"===o?t?t+o+(i?C.repeat(i.length):""):0===a?F+(i?C.repeat(i.length):""):C.repeat(r.length):"."===o?w.repeat(r.length):"*"===o?t?t+o+(i?k:""):k:t?e:`\\${e}`));return!0===n&&(i=!0===r.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,(e=>e.length%2==0?"\\\\":e?"\\":""))),i===e&&!0===r.contains?(O.output=e,O):(O.output=o.wrapOutput(i,O,t),O)}for(;!$();){if(B=H(),"\0"===B)continue;if("\\"===B){const e=U();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){B+="\\",Y({type:"text",value:B});continue}const t=/^\\+/.exec(G());let n=0;if(t&&t[0].length>2&&(n=t[0].length,O.index+=n,n%2!=0&&(B+="\\")),!0===r.unescape?B=H():B+=H(),0===O.brackets){Y({type:"text",value:B});continue}}if(O.brackets>0&&("]"!==B||"["===V.value||"[^"===V.value)){if(!1!==r.posix&&":"===B){const e=V.value.slice(1);if(e.includes("[")&&(V.posix=!0,e.includes(":"))){const e=V.value.lastIndexOf("["),t=V.value.slice(0,e),r=V.value.slice(e+2),n=a[r];if(n){V.value=t+n,O.backtrack=!0,H(),m.output||1!==f.indexOf(V)||(m.output=E);continue}}}("["===B&&":"!==U()||"-"===B&&"]"===U())&&(B=`\\${B}`),"]"!==B||"["!==V.value&&"[^"!==V.value||(B=`\\${B}`),!0===r.posix&&"!"===B&&"["===V.value&&(B="^"),V.value+=B,W({value:B});continue}if(1===O.quotes&&'"'!==B){B=o.escapeRegex(B),V.value+=B,W({value:B});continue}if('"'===B){O.quotes=1===O.quotes?0:1,!0===r.keepQuotes&&Y({type:"text",value:B});continue}if("("===B){Q("parens"),Y({type:"paren",value:B});continue}if(")"===B){if(0===O.parens&&!0===r.strictBrackets)throw new SyntaxError(p("opening","("));const e=L[L.length-1];if(e&&O.parens===e.parens+1){Z(L.pop());continue}Y({type:"paren",value:B,output:O.parens?")":"\\)"}),K("parens");continue}if("["===B){if(!0!==r.nobracket&&G().includes("]"))Q("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(p("closing","]"));B=`\\${B}`}Y({type:"bracket",value:B});continue}if("]"===B){if(!0===r.nobracket||V&&"bracket"===V.type&&1===V.value.length){Y({type:"text",value:B,output:`\\${B}`});continue}if(0===O.brackets){if(!0===r.strictBrackets)throw new SyntaxError(p("opening","["));Y({type:"text",value:B,output:`\\${B}`});continue}K("brackets");const e=V.value.slice(1);if(!0===V.posix||"^"!==e[0]||e.includes("/")||(B=`/${B}`),V.value+=B,W({value:B}),!1===r.literalBrackets||o.hasRegexChars(e))continue;const t=o.escapeRegex(V.value);if(O.output=O.output.slice(0,-V.value.length),!0===r.literalBrackets){O.output+=t,V.value=t;continue}V.value=`(${g}${t}|${V.value})`,O.output+=V.value;continue}if("{"===B&&!0!==r.nobrace){Q("braces");const e={type:"brace",value:B,output:"(",outputIndex:O.output.length,tokensIndex:O.tokens.length};q.push(e),Y(e);continue}if("}"===B){const e=q[q.length-1];if(!0===r.nobrace||!e){Y({type:"text",value:B,output:B});continue}let t=")";if(!0===e.dots){const e=f.slice(),n=[];for(let t=e.length-1;t>=0&&(f.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=u(n,r),O.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=O.output.slice(0,e.outputIndex),n=O.tokens.slice(e.tokensIndex);e.value=e.output="\\{",B=t="\\}",O.output=r;for(const e of n)O.output+=e.output||e.value}Y({type:"brace",value:B,output:t}),K("braces"),q.pop();continue}if("|"===B){L.length>0&&L[L.length-1].conditions++,Y({type:"text",value:B});continue}if(","===B){let e=B;const t=q[q.length-1];t&&"braces"===M[M.length-1]&&(t.comma=!0,e="|"),Y({type:"comma",value:B,output:e});continue}if("/"===B){if("dot"===V.type&&O.index===O.start+1){O.start=O.index+1,O.consumed="",O.output="",f.pop(),V=m;continue}Y({type:"slash",value:B,output:P});continue}if("."===B){if(O.braces>0&&"dot"===V.type){"."===V.value&&(V.output=w);const e=q[q.length-1];V.type="dots",V.output+=B,V.value+=B,e.dots=!0;continue}if(O.braces+O.parens===0&&"bos"!==V.type&&"slash"!==V.type){Y({type:"text",value:B,output:w});continue}Y({type:"dot",value:B,output:w});continue}if("?"===B){if((!V||"("!==V.value)&&!0!==r.noextglob&&"("===U()&&"?"!==U(2)){J("qmark",B);continue}if(V&&"paren"===V.type){const e=U();let t=B;if("<"===e&&!o.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===V.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(G()))&&(t=`\\${B}`),Y({type:"text",value:B,output:t});continue}if(!0!==r.dot&&("slash"===V.type||"bos"===V.type)){Y({type:"qmark",value:B,output:j});continue}Y({type:"qmark",value:B,output:C});continue}if("!"===B){if(!0!==r.noextglob&&"("===U()&&("?"!==U(2)||!/[!=<:]/.test(U(3)))){J("negate",B);continue}if(!0!==r.nonegate&&0===O.index){X();continue}}if("+"===B){if(!0!==r.noextglob&&"("===U()&&"?"!==U(2)){J("plus",B);continue}if(V&&"("===V.value||!1===r.regex){Y({type:"plus",value:B,output:S});continue}if(V&&("bracket"===V.type||"paren"===V.type||"brace"===V.type)||O.parens>0){Y({type:"plus",value:B});continue}Y({type:"plus",value:S});continue}if("@"===B){if(!0!==r.noextglob&&"("===U()&&"?"!==U(2)){Y({type:"at",extglob:!0,value:B,output:""});continue}Y({type:"text",value:B});continue}if("*"!==B){"$"!==B&&"^"!==B||(B=`\\${B}`);const e=s.exec(G());e&&(B+=e[0],O.index+=e[0].length),Y({type:"text",value:B});continue}if(V&&("globstar"===V.type||!0===V.star)){V.type="star",V.star=!0,V.value+=B,V.output=k,O.backtrack=!0,O.globstar=!0,z(B);continue}let t=G();if(!0!==r.noextglob&&/^\([^?]/.test(t)){J("star",B);continue}if("star"===V.type){if(!0===r.noglobstar){z(B);continue}const n=V.prev,o=n.prev,i="slash"===n.type||"bos"===n.type,a=o&&("star"===o.type||"globstar"===o.type);if(!0===r.bash&&(!i||t[0]&&"/"!==t[0])){Y({type:"star",value:B,output:""});continue}const s=O.braces>0&&("comma"===n.type||"brace"===n.type),c=L.length&&("pipe"===n.type||"paren"===n.type);if(!i&&"paren"!==n.type&&!s&&!c){Y({type:"star",value:B,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[O.index+4];if(r&&"/"!==r)break;t=t.slice(3),z("/**",3)}if("bos"===n.type&&$()){V.type="globstar",V.value+=B,V.output=A(r),O.output=V.output,O.globstar=!0,z(B);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!a&&$()){O.output=O.output.slice(0,-(n.output+V.output).length),n.output=`(?:${n.output}`,V.type="globstar",V.output=A(r)+(r.strictSlashes?")":"|$)"),V.value+=B,O.globstar=!0,O.output+=n.output+V.output,z(B);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";O.output=O.output.slice(0,-(n.output+V.output).length),n.output=`(?:${n.output}`,V.type="globstar",V.output=`${A(r)}${P}|${P}${e})`,V.value+=B,O.output+=n.output+V.output,O.globstar=!0,z(B+H()),Y({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){V.type="globstar",V.value+=B,V.output=`(?:^|${P}|${A(r)}${P})`,O.output=V.output,O.globstar=!0,z(B+H()),Y({type:"slash",value:"/",output:""});continue}O.output=O.output.slice(0,-V.output.length),V.type="globstar",V.output=A(r),V.value+=B,O.output+=V.output,O.globstar=!0,z(B);continue}const n={type:"star",value:B,output:k};!0!==r.bash?!V||"bracket"!==V.type&&"paren"!==V.type||!0!==r.regex?(O.index!==O.start&&"slash"!==V.type&&"dot"!==V.type||("dot"===V.type?(O.output+=x,V.output+=x):!0===r.dot?(O.output+=_,V.output+=_):(O.output+=R,V.output+=R),"*"!==U()&&(O.output+=E,V.output+=E)),Y(n)):(n.output=B,Y(n)):(n.output=".*?","bos"!==V.type&&"slash"!==V.type||(n.output=R+n.output),Y(n))}for(;O.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing","]"));O.output=o.escapeLast(O.output,"["),K("brackets")}for(;O.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing",")"));O.output=o.escapeLast(O.output,"("),K("parens")}for(;O.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing","}"));O.output=o.escapeLast(O.output,"{"),K("braces")}if(!0===r.strictSlashes||"star"!==V.type&&"bracket"!==V.type||Y({type:"maybe_slash",value:"",output:`${P}?`}),!0===O.backtrack){O.output="";for(const e of O.tokens)O.output+=null!=e.output?e.output:e.value,e.suffix&&(O.output+=e.suffix)}return O};d.fastpaths=(e,t)=>{const r={...t},a="number"==typeof r.maxLength?Math.min(i,r.maxLength):i,s=e.length;if(s>a)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${a}`);e=l[e]||e;const c=o.isWindows(t),{DOT_LITERAL:u,SLASH_LITERAL:p,ONE_CHAR:d,DOTS_SLASH:h,NO_DOT:m,NO_DOTS:f,NO_DOTS_SLASH:g,STAR:y,START_ANCHOR:v}=n.globChars(c),b=r.dot?f:m,w=r.dot?g:m,S=r.capture?"":"?:";let P=!0===r.bash?".*?":y;r.capture&&(P=`(${P})`);const E=e=>!0===e.noglobstar?P:`(${S}(?:(?!${v}${e.dot?h:u}).)*?)`,D=e=>{switch(e){case"*":return`${b}${d}${P}`;case".*":return`${u}${d}${P}`;case"*.*":return`${b}${P}${u}${d}${P}`;case"*/*":return`${b}${P}${p}${d}${w}${P}`;case"**":return b+E(r);case"**/*":return`(?:${b}${E(r)}${p})?${w}${d}${P}`;case"**/*.*":return`(?:${b}${E(r)}${p})?${w}${P}${u}${d}${P}`;case"**/.*":return`(?:${b}${E(r)}${p})?${u}${d}${P}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=D(t[1]);if(!r)return;return r+u+t[2]}}},T=o.removePrefix(e,{negated:!1,prefix:""});let x=D(T);return x&&!0!==r.strictSlashes&&(x+=`${p}?`),x},e.exports=d},6087:(e,t,r)=>{"use strict";const n=r(5622),o=r(3921),i=r(3376),a=r(8702),s=r(1006),c=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map((e=>c(e,t,r)));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(o=e)&&"object"==typeof o&&!Array.isArray(o)&&e.tokens&&e.input;var o;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const i=t||{},s=a.isWindows(t),l=n?c.compileRe(e,t):c.makeRe(e,t,!1,!0),u=l.state;delete l.state;let p=()=>!1;if(i.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};p=c(i.ignore,e,r)}const d=(r,n=!1)=>{const{isMatch:o,match:a,output:d}=c.test(r,l,t,{glob:e,posix:s}),h={glob:e,state:u,regex:l,posix:s,input:r,output:d,match:a,isMatch:o};return"function"==typeof i.onResult&&i.onResult(h),!1===o?(h.isMatch=!1,!!n&&h):p(r)?("function"==typeof i.onIgnore&&i.onIgnore(h),h.isMatch=!1,!!n&&h):("function"==typeof i.onMatch&&i.onMatch(h),!n||h)};return r&&(d.state=u),d};c.test=(e,t,r,{glob:n,posix:o}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=r||{},s=i.format||(o?a.toPosixSlashes:null);let l=e===n,u=l&&s?s(e):e;return!1===l&&(u=s?s(e):e,l=u===n),!1!==l&&!0!==i.capture||(l=!0===i.matchBase||!0===i.basename?c.matchBase(e,t,r,o):t.exec(u)),{isMatch:Boolean(l),match:l,output:u}},c.matchBase=(e,t,r,o=a.isWindows(r))=>(t instanceof RegExp?t:c.makeRe(t,r)).test(n.basename(e)),c.isMatch=(e,t,r)=>c(t,r)(e),c.parse=(e,t)=>Array.isArray(e)?e.map((e=>c.parse(e,t))):i(e,{...t,fastpaths:!1}),c.scan=(e,t)=>o(e,t),c.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const o=t||{},i=o.contains?"":"^",a=o.contains?"":"$";let s=`${i}(?:${e.output})${a}`;e&&!0===e.negated&&(s=`^(?!${s}).*$`);const l=c.toRegex(s,t);return!0===n&&(l.state=e),l},c.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let o={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(o.output=i.fastpaths(e,t)),o.output||(o=i(e,t)),c.compileRe(o,t,r,n)},c.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},c.constants=s,e.exports=c},3921:(e,t,r)=>{"use strict";const n=r(8702),{CHAR_ASTERISK:o,CHAR_AT:i,CHAR_BACKWARD_SLASH:a,CHAR_COMMA:s,CHAR_DOT:c,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:u,CHAR_LEFT_CURLY_BRACE:p,CHAR_LEFT_PARENTHESES:d,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:m,CHAR_QUESTION_MARK:f,CHAR_RIGHT_CURLY_BRACE:g,CHAR_RIGHT_PARENTHESES:y,CHAR_RIGHT_SQUARE_BRACKET:v}=r(1006),b=e=>e===u||e===a,w=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},S=e.length-1,P=!0===r.parts||!0===r.scanToEnd,E=[],D=[],T=[];let x,_,C=e,j=-1,I=0,N=0,A=!1,R=!1,F=!1,k=!1,O=!1,L=!1,q=!1,M=!1,B=!1,V=!1,$=0,U={value:"",depth:0,isGlob:!1};const H=()=>j>=S,G=()=>(x=_,C.charCodeAt(++j));for(;j<S;){let e;if(_=G(),_!==a){if(!0===L||_===p){for($++;!0!==H()&&(_=G());)if(_!==a)if(_!==p){if(!0!==L&&_===c&&(_=G())===c){if(A=U.isBrace=!0,F=U.isGlob=!0,V=!0,!0===P)continue;break}if(!0!==L&&_===s){if(A=U.isBrace=!0,F=U.isGlob=!0,V=!0,!0===P)continue;break}if(_===g&&($--,0===$)){L=!1,A=U.isBrace=!0,V=!0;break}}else $++;else q=U.backslashes=!0,G();if(!0===P)continue;break}if(_!==u){if(!0!==r.noext&&!0==(_===m||_===i||_===o||_===f||_===l)&&C.charCodeAt(j+1)===d){if(F=U.isGlob=!0,k=U.isExtglob=!0,V=!0,_===l&&j===I&&(B=!0),!0===P){for(;!0!==H()&&(_=G());)if(_!==a){if(_===y){F=U.isGlob=!0,V=!0;break}}else q=U.backslashes=!0,_=G();continue}break}if(_===o){if(x===o&&(O=U.isGlobstar=!0),F=U.isGlob=!0,V=!0,!0===P)continue;break}if(_===f){if(F=U.isGlob=!0,V=!0,!0===P)continue;break}if(_===h){for(;!0!==H()&&(e=G());)if(e!==a){if(e===v){R=U.isBracket=!0,F=U.isGlob=!0,V=!0;break}}else q=U.backslashes=!0,G();if(!0===P)continue;break}if(!0===r.nonegate||_!==l||j!==I){if(!0!==r.noparen&&_===d){if(F=U.isGlob=!0,!0===P){for(;!0!==H()&&(_=G());)if(_!==d){if(_===y){V=!0;break}}else q=U.backslashes=!0,_=G();continue}break}if(!0===F){if(V=!0,!0===P)continue;break}}else M=U.negated=!0,I++}else{if(E.push(j),D.push(U),U={value:"",depth:0,isGlob:!1},!0===V)continue;if(x===c&&j===I+1){I+=2;continue}N=j+1}}else q=U.backslashes=!0,_=G(),_===p&&(L=!0)}!0===r.noext&&(k=!1,F=!1);let z=C,W="",X="";I>0&&(W=C.slice(0,I),C=C.slice(I),N-=I),z&&!0===F&&N>0?(z=C.slice(0,N),X=C.slice(N)):!0===F?(z="",X=C):z=C,z&&""!==z&&"/"!==z&&z!==C&&b(z.charCodeAt(z.length-1))&&(z=z.slice(0,-1)),!0===r.unescape&&(X&&(X=n.removeBackslashes(X)),z&&!0===q&&(z=n.removeBackslashes(z)));const Q={prefix:W,input:e,start:I,base:z,glob:X,isBrace:A,isBracket:R,isGlob:F,isExtglob:k,isGlobstar:O,negated:M,negatedExtglob:B};if(!0===r.tokens&&(Q.maxDepth=0,b(_)||D.push(U),Q.tokens=D),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<E.length;n++){const o=t?t+1:I,i=E[n],a=e.slice(o,i);r.tokens&&(0===n&&0!==I?(D[n].isPrefix=!0,D[n].value=W):D[n].value=a,w(D[n]),Q.maxDepth+=D[n].depth),0===n&&""===a||T.push(a),t=i}if(t&&t+1<e.length){const n=e.slice(t+1);T.push(n),r.tokens&&(D[D.length-1].value=n,w(D[D.length-1]),Q.maxDepth+=D[D.length-1].depth)}Q.slashes=E,Q.parts=T}return Q}},8702:(e,t,r)=>{"use strict";const n=r(5622),o="win32"===process.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:a,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:c}=r(1006);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>s.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(c,"\\$1"),t.toPosixSlashes=e=>e.replace(i,"/"),t.removeBackslashes=e=>e.replace(a,(e=>"\\"===e?"":e)),t.supportsLookbehinds=()=>{const e=process.version.slice(1).split(".").map(Number);return 3===e.length&&e[0]>=9||8===e[0]&&e[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===o||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const o=e.lastIndexOf(r,n);return-1===o?e:"\\"===e[o-1]?t.escapeLast(e,r,o-1):`${e.slice(0,o)}\\${e.slice(o)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}},4155:(e,t,r)=>{"use strict";var n=r(5318);Object.defineProperty(t,"__esModule",{value:!0}),t.promisifyChildProcess=a,t.spawn=function(e,t,r){return a(o.default.spawn(e,t,r),Array.isArray(t)?r:t)},t.fork=function(e,t,r){return a(o.default.fork(e,t,r),Array.isArray(t)?r:t)},t.execFile=t.exec=void 0;var o=n(r(3129));function i(e,t){if(e[0]instanceof Buffer){var r=Buffer.concat(e);return t?r.toString(t):r}return e.join("")}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=new Promise((function(r,n){var o,a=t.encoding,s=t.killSignal,c=null!=a||null!=t.maxBuffer,l=t.maxBuffer||204800,u=0,p=[],d=[],h=function(t){return function(r){var n=l-u;r.length>n&&(o=new Error("maxBuffer size exceeded"),e.kill(s||"SIGTERM"),r=r.slice(0,n)),u+=r.length,t.push(r)}};function m(e,t){function s(e){c?(e.stdout=i(p,a),e.stderr=i(d,a)):Object.defineProperties(e,{stdout:{configurable:!0,enumerable:!0,get:function(){return console.error(new Error("To get stdout from a spawned or forked process, set the `encoding` or `maxBuffer` option").stack.replace(/^Error/,"Warning")),null}},stderr:{configurable:!0,enumerable:!0,get:function(){return console.error(new Error("To get stderr from a spawned or forked process, set the `encoding` or `maxBuffer` option").stack.replace(/^Error/,"Warning")),null}}})}o||(null!=e&&0!==e?o=new Error("Process exited with code ".concat(e)):null!=t&&(o=new Error("Process was killed with ".concat(t))));var l={};s(l);var u=o;u?(u.code=e,u.signal=t,s(u),n(u)):r(l)}c&&(e.stdout&&e.stdout.on("data",h(p)),e.stderr&&e.stderr.on("data",h(d))),e.on("error",n),e.on("close",m),e.on("exit",m)}));return Object.create(e,{then:{value:r.then.bind(r)},catch:{value:r.catch.bind(r)}})}function s(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o,i=new Promise((function(t,n){o=e.apply(void 0,r.concat([function(e,r,o){e?(e.stdout=r,e.stderr=o,n(e)):t({stdout:r,stderr:o})}]))}));if(!o)throw new Error("unexpected error: child has not been initialized");return Object.create(o,{then:{value:i.then.bind(i)},catch:{value:i.catch.bind(i)}})}}var c=s(o.default.exec);t.exec=c;var l=s(o.default.execFile);t.execFile=l},3650:e=>{"use strict";e.exports=function(e){var t=new e,r=t;return{get:function(){var n=t;return n.next?t=n.next:(t=new e,r=t),n.next=null,n},release:function(e){r.next=e,r=e}}}},4595:e=>{e.exports=function(e,t){var r,n,o,i=!0;function a(e){function n(){t&&t(e,r),t=null}i?process.nextTick(n):n()}function s(e,t,o){r[e]=o,(0==--n||t)&&a(t)}Array.isArray(e)?(r=[],n=e.length):(o=Object.keys(e),r={},n=o.length),n?o?o.forEach((function(t){e[t]((function(e,r){s(t,e,r)}))})):e.forEach((function(e,t){e((function(e,r){s(t,e,r)}))})):a(null),i=!1}},2257:(e,t,r)=>{const n=Symbol("SemVer ANY");class o{static get ANY(){return n}constructor(e,t){if(t=i(t),e instanceof o){if(e.loose===!!t.loose)return e;e=e.value}l("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===n?this.value="":this.value=this.operator+this.semver.version,l("comp",this)}parse(e){const t=this.options.loose?a[s.COMPARATORLOOSE]:a[s.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new u(r[2],this.options.loose):this.semver=n}toString(){return this.value}test(e){if(l("Comparator.test",e,this.options.loose),this.semver===n||e===n)return!0;if("string"==typeof e)try{e=new u(e,this.options)}catch(e){return!1}return c(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof o))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new p(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new p(this.value,t).test(e.semver);const r=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),s=c(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),l=c(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return r||n||i&&a||s||l}}e.exports=o;const i=r(2893),{re:a,t:s}=r(5765),c=r(7539),l=r(4225),u=r(6329),p=r(6902)},6902:(e,t,r)=>{class n{constructor(e,t){if(t=i(t),e instanceof n)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new n(e.raw,t);if(e instanceof a)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!m(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&f(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,r=o.get(t);if(r)return r;const n=this.options.loose,i=n?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];e=e.replace(i,_(this.options.includePrerelease)),s("hyphen replace",e),e=e.replace(l[u.COMPARATORTRIM],p),s("comparator trim",e,l[u.COMPARATORTRIM]),e=(e=(e=e.replace(l[u.TILDETRIM],d)).replace(l[u.CARETTRIM],h)).split(/\s+/).join(" ");const c=n?l[u.COMPARATORLOOSE]:l[u.COMPARATOR],f=e.split(" ").map((e=>y(e,this.options))).join(" ").split(/\s+/).map((e=>x(e,this.options))).filter(this.options.loose?e=>!!e.match(c):()=>!0).map((e=>new a(e,this.options))),g=(f.length,new Map);for(const e of f){if(m(e))return[e];g.set(e.value,e)}g.size>1&&g.has("")&&g.delete("");const v=[...g.values()];return o.set(t,v),v}intersects(e,t){if(!(e instanceof n))throw new TypeError("a Range is required");return this.set.some((r=>g(r,t)&&e.set.some((e=>g(e,t)&&r.every((r=>e.every((e=>r.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new c(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(C(this.set[t],e,this.options))return!0;return!1}}e.exports=n;const o=new(r(9593))({max:1e3}),i=r(2893),a=r(2257),s=r(4225),c=r(6329),{re:l,t:u,comparatorTrimReplace:p,tildeTrimReplace:d,caretTrimReplace:h}=r(5765),m=e=>"<0.0.0-0"===e.value,f=e=>""===e.value,g=(e,t)=>{let r=!0;const n=e.slice();let o=n.pop();for(;r&&n.length;)r=n.every((e=>o.intersects(e,t))),o=n.pop();return r},y=(e,t)=>(s("comp",e,t),e=S(e,t),s("caret",e),e=b(e,t),s("tildes",e),e=E(e,t),s("xrange",e),e=T(e,t),s("stars",e),e),v=e=>!e||"x"===e.toLowerCase()||"*"===e,b=(e,t)=>e.trim().split(/\s+/).map((e=>w(e,t))).join(" "),w=(e,t)=>{const r=t.loose?l[u.TILDELOOSE]:l[u.TILDE];return e.replace(r,((t,r,n,o,i)=>{let a;return s("tilde",e,t,r,n,o,i),v(r)?a="":v(n)?a=`>=${r}.0.0 <${+r+1}.0.0-0`:v(o)?a=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:i?(s("replaceTilde pr",i),a=`>=${r}.${n}.${o}-${i} <${r}.${+n+1}.0-0`):a=`>=${r}.${n}.${o} <${r}.${+n+1}.0-0`,s("tilde return",a),a}))},S=(e,t)=>e.trim().split(/\s+/).map((e=>P(e,t))).join(" "),P=(e,t)=>{s("caret",e,t);const r=t.loose?l[u.CARETLOOSE]:l[u.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,((t,r,o,i,a)=>{let c;return s("caret",e,t,r,o,i,a),v(r)?c="":v(o)?c=`>=${r}.0.0${n} <${+r+1}.0.0-0`:v(i)?c="0"===r?`>=${r}.${o}.0${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.0${n} <${+r+1}.0.0-0`:a?(s("replaceCaret pr",a),c="0"===r?"0"===o?`>=${r}.${o}.${i}-${a} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}-${a} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i}-${a} <${+r+1}.0.0-0`):(s("no pr"),c="0"===r?"0"===o?`>=${r}.${o}.${i}${n} <${r}.${o}.${+i+1}-0`:`>=${r}.${o}.${i}${n} <${r}.${+o+1}.0-0`:`>=${r}.${o}.${i} <${+r+1}.0.0-0`),s("caret return",c),c}))},E=(e,t)=>(s("replaceXRanges",e,t),e.split(/\s+/).map((e=>D(e,t))).join(" ")),D=(e,t)=>{e=e.trim();const r=t.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return e.replace(r,((r,n,o,i,a,c)=>{s("xRange",e,r,n,o,i,a,c);const l=v(o),u=l||v(i),p=u||v(a),d=p;return"="===n&&d&&(n=""),c=t.includePrerelease?"-0":"",l?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&d?(u&&(i=0),a=0,">"===n?(n=">=",u?(o=+o+1,i=0,a=0):(i=+i+1,a=0)):"<="===n&&(n="<",u?o=+o+1:i=+i+1),"<"===n&&(c="-0"),r=`${n+o}.${i}.${a}${c}`):u?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${i}.0${c} <${o}.${+i+1}.0-0`),s("xRange return",r),r}))},T=(e,t)=>(s("replaceStars",e,t),e.trim().replace(l[u.STAR],"")),x=(e,t)=>(s("replaceGTE0",e,t),e.trim().replace(l[t.includePrerelease?u.GTE0PRE:u.GTE0],"")),_=e=>(t,r,n,o,i,a,s,c,l,u,p,d,h)=>`${r=v(n)?"":v(o)?`>=${n}.0.0${e?"-0":""}`:v(i)?`>=${n}.${o}.0${e?"-0":""}`:a?`>=${r}`:`>=${r}${e?"-0":""}`} ${c=v(l)?"":v(u)?`<${+l+1}.0.0-0`:v(p)?`<${l}.${+u+1}.0-0`:d?`<=${l}.${u}.${p}-${d}`:e?`<${l}.${u}.${+p+1}-0`:`<=${c}`}`.trim(),C=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(s(e[r].semver),e[r].semver!==a.ANY&&e[r].semver.prerelease.length>0){const n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0}},6329:(e,t,r)=>{const n=r(4225),{MAX_LENGTH:o,MAX_SAFE_INTEGER:i}=r(3295),{re:a,t:s}=r(5765),c=r(2893),{compareIdentifiers:l}=r(5638);class u{constructor(e,t){if(t=c(t),e instanceof u){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>o)throw new TypeError(`version is longer than ${o} characters`);n("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const r=e.trim().match(t.loose?a[s.LOOSE]:a[s.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<i)return t}return e})):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(n("SemVer.compare",this.version,this.options,e),!(e instanceof u)){if("string"==typeof e&&e===this.version)return 0;e=new u(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof u||(e=new u(e,this.options)),l(this.major,e.major)||l(this.minor,e.minor)||l(this.patch,e.patch)}comparePre(e){if(e instanceof u||(e=new u(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const r=this.prerelease[t],o=e.prerelease[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}compareBuild(e){e instanceof u||(e=new u(e,this.options));let t=0;do{const r=this.build[t],o=e.build[t];if(n("prerelease compare",t,r,o),void 0===r&&void 0===o)return 0;if(void 0===o)return 1;if(void 0===r)return-1;if(r!==o)return l(r,o)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}e.exports=u},3507:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null}},7539:(e,t,r)=>{const n=r(8718),o=r(1194),i=r(1312),a=r(5903),s=r(1544),c=r(2056);e.exports=(e,t,r,l)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return n(e,r,l);case"!=":return o(e,r,l);case">":return i(e,r,l);case">=":return a(e,r,l);case"<":return s(e,r,l);case"<=":return c(e,r,l);default:throw new TypeError(`Invalid operator: ${t}`)}}},9038:(e,t,r)=>{const n=r(6329),o=r(3959),{re:i,t:a}=r(5765);e.exports=(e,t)=>{if(e instanceof n)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let t;for(;(t=i[a.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&t.index+t[0].length===r.index+r[0].length||(r=t),i[a.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;i[a.COERCERTL].lastIndex=-1}else r=e.match(i[a.COERCE]);return null===r?null:o(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)}},8880:(e,t,r)=>{const n=r(6329);e.exports=(e,t,r)=>{const o=new n(e,r),i=new n(t,r);return o.compare(i)||o.compareBuild(i)}},7880:(e,t,r)=>{const n=r(6269);e.exports=(e,t)=>n(e,t,!0)},6269:(e,t,r)=>{const n=r(6329);e.exports=(e,t,r)=>new n(e,r).compare(new n(t,r))},2378:(e,t,r)=>{const n=r(3959),o=r(8718);e.exports=(e,t)=>{if(o(e,t))return null;{const r=n(e),o=n(t),i=r.prerelease.length||o.prerelease.length,a=i?"pre":"",s=i?"prerelease":"";for(const e in r)if(("major"===e||"minor"===e||"patch"===e)&&r[e]!==o[e])return a+e;return s}}},8718:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0===n(e,t,r)},1312:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>0},5903:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)>=0},253:(e,t,r)=>{const n=r(6329);e.exports=(e,t,r,o)=>{"string"==typeof r&&(o=r,r=void 0);try{return new n(e,r).inc(t,o).version}catch(e){return null}}},1544:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<0},2056:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(e,t,r)<=0},8679:(e,t,r)=>{const n=r(6329);e.exports=(e,t)=>new n(e,t).major},7789:(e,t,r)=>{const n=r(6329);e.exports=(e,t)=>new n(e,t).minor},1194:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>0!==n(e,t,r)},3959:(e,t,r)=>{const{MAX_LENGTH:n}=r(3295),{re:o,t:i}=r(5765),a=r(6329),s=r(2893);e.exports=(e,t)=>{if(t=s(t),e instanceof a)return e;if("string"!=typeof e)return null;if(e.length>n)return null;if(!(t.loose?o[i.LOOSE]:o[i.FULL]).test(e))return null;try{return new a(e,t)}catch(e){return null}}},2358:(e,t,r)=>{const n=r(6329);e.exports=(e,t)=>new n(e,t).patch},7559:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r&&r.prerelease.length?r.prerelease:null}},9795:(e,t,r)=>{const n=r(6269);e.exports=(e,t,r)=>n(t,e,r)},3657:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(r,e,t)))},5712:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>{try{t=new n(t,r)}catch(e){return!1}return t.test(e)}},1100:(e,t,r)=>{const n=r(8880);e.exports=(e,t)=>e.sort(((e,r)=>n(e,r,t)))},6397:(e,t,r)=>{const n=r(3959);e.exports=(e,t)=>{const r=n(e,t);return r?r.version:null}},1249:(e,t,r)=>{const n=r(5765);e.exports={re:n.re,src:n.src,tokens:n.t,SEMVER_SPEC_VERSION:r(3295).SEMVER_SPEC_VERSION,SemVer:r(6329),compareIdentifiers:r(5638).compareIdentifiers,rcompareIdentifiers:r(5638).rcompareIdentifiers,parse:r(3959),valid:r(6397),clean:r(3507),inc:r(253),diff:r(2378),major:r(8679),minor:r(7789),patch:r(2358),prerelease:r(7559),compare:r(6269),rcompare:r(9795),compareLoose:r(7880),compareBuild:r(8880),sort:r(1100),rsort:r(3657),gt:r(1312),lt:r(1544),eq:r(8718),neq:r(1194),gte:r(5903),lte:r(2056),cmp:r(7539),coerce:r(9038),Comparator:r(2257),Range:r(6902),satisfies:r(5712),toComparators:r(1042),maxSatisfying:r(5775),minSatisfying:r(1657),minVersion:r(5316),validRange:r(9042),outside:r(6826),gtr:r(7606),ltr:r(32),intersects:r(2937),simplifyRange:r(7908),subset:r(799)}},3295:e=>{const t=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:t,MAX_SAFE_COMPONENT_LENGTH:16}},4225:e=>{const t="object"==typeof process&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};e.exports=t},5638:e=>{const t=/^[0-9]+$/,r=(e,r)=>{const n=t.test(e),o=t.test(r);return n&&o&&(e=+e,r=+r),e===r?0:n&&!o?-1:o&&!n?1:e<r?-1:1};e.exports={compareIdentifiers:r,rcompareIdentifiers:(e,t)=>r(t,e)}},2893:e=>{const t=["includePrerelease","loose","rtl"];e.exports=e=>e?"object"!=typeof e?{loose:!0}:t.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{}},5765:(e,t,r)=>{const{MAX_SAFE_COMPONENT_LENGTH:n}=r(3295),o=r(4225),i=(t=e.exports={}).re=[],a=t.src=[],s=t.t={};let c=0;const l=(e,t,r)=>{const n=c++;o(n,t),s[e]=n,a[n]=t,i[n]=new RegExp(t,r?"g":void 0)};l("NUMERICIDENTIFIER","0|[1-9]\\d*"),l("NUMERICIDENTIFIERLOOSE","[0-9]+"),l("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),l("MAINVERSION",`(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})\\.(${a[s.NUMERICIDENTIFIER]})`),l("MAINVERSIONLOOSE",`(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})\\.(${a[s.NUMERICIDENTIFIERLOOSE]})`),l("PRERELEASEIDENTIFIER",`(?:${a[s.NUMERICIDENTIFIER]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASEIDENTIFIERLOOSE",`(?:${a[s.NUMERICIDENTIFIERLOOSE]}|${a[s.NONNUMERICIDENTIFIER]})`),l("PRERELEASE",`(?:-(${a[s.PRERELEASEIDENTIFIER]}(?:\\.${a[s.PRERELEASEIDENTIFIER]})*))`),l("PRERELEASELOOSE",`(?:-?(${a[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[s.PRERELEASEIDENTIFIERLOOSE]})*))`),l("BUILDIDENTIFIER","[0-9A-Za-z-]+"),l("BUILD",`(?:\\+(${a[s.BUILDIDENTIFIER]}(?:\\.${a[s.BUILDIDENTIFIER]})*))`),l("FULLPLAIN",`v?${a[s.MAINVERSION]}${a[s.PRERELEASE]}?${a[s.BUILD]}?`),l("FULL",`^${a[s.FULLPLAIN]}$`),l("LOOSEPLAIN",`[v=\\s]*${a[s.MAINVERSIONLOOSE]}${a[s.PRERELEASELOOSE]}?${a[s.BUILD]}?`),l("LOOSE",`^${a[s.LOOSEPLAIN]}$`),l("GTLT","((?:<|>)?=?)"),l("XRANGEIDENTIFIERLOOSE",`${a[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),l("XRANGEIDENTIFIER",`${a[s.NUMERICIDENTIFIER]}|x|X|\\*`),l("XRANGEPLAIN",`[v=\\s]*(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:\\.(${a[s.XRANGEIDENTIFIER]})(?:${a[s.PRERELEASE]})?${a[s.BUILD]}?)?)?`),l("XRANGEPLAINLOOSE",`[v=\\s]*(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[s.XRANGEIDENTIFIERLOOSE]})(?:${a[s.PRERELEASELOOSE]})?${a[s.BUILD]}?)?)?`),l("XRANGE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAIN]}$`),l("XRANGELOOSE",`^${a[s.GTLT]}\\s*${a[s.XRANGEPLAINLOOSE]}$`),l("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),l("COERCERTL",a[s.COERCE],!0),l("LONETILDE","(?:~>?)"),l("TILDETRIM",`(\\s*)${a[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",l("TILDE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAIN]}$`),l("TILDELOOSE",`^${a[s.LONETILDE]}${a[s.XRANGEPLAINLOOSE]}$`),l("LONECARET","(?:\\^)"),l("CARETTRIM",`(\\s*)${a[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",l("CARET",`^${a[s.LONECARET]}${a[s.XRANGEPLAIN]}$`),l("CARETLOOSE",`^${a[s.LONECARET]}${a[s.XRANGEPLAINLOOSE]}$`),l("COMPARATORLOOSE",`^${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]})$|^$`),l("COMPARATOR",`^${a[s.GTLT]}\\s*(${a[s.FULLPLAIN]})$|^$`),l("COMPARATORTRIM",`(\\s*)${a[s.GTLT]}\\s*(${a[s.LOOSEPLAIN]}|${a[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",l("HYPHENRANGE",`^\\s*(${a[s.XRANGEPLAIN]})\\s+-\\s+(${a[s.XRANGEPLAIN]})\\s*$`),l("HYPHENRANGELOOSE",`^\\s*(${a[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[s.XRANGEPLAINLOOSE]})\\s*$`),l("STAR","(<|>)?=?\\s*\\*"),l("GTE0","^\\s*>=\\s*0.0.0\\s*$"),l("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")},7606:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,">",r)},2937:(e,t,r)=>{const n=r(6902);e.exports=(e,t,r)=>(e=new n(e,r),t=new n(t,r),e.intersects(t))},32:(e,t,r)=>{const n=r(6826);e.exports=(e,t,r)=>n(e,t,"<",r)},5775:(e,t,r)=>{const n=r(6329),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&-1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},1657:(e,t,r)=>{const n=r(6329),o=r(6902);e.exports=(e,t,r)=>{let i=null,a=null,s=null;try{s=new o(t,r)}catch(e){return null}return e.forEach((e=>{s.test(e)&&(i&&1!==a.compare(e)||(i=e,a=new n(i,r)))})),i}},5316:(e,t,r)=>{const n=r(6329),o=r(6902),i=r(1312);e.exports=(e,t)=>{e=new o(e,t);let r=new n("0.0.0");if(e.test(r))return r;if(r=new n("0.0.0-0"),e.test(r))return r;r=null;for(let t=0;t<e.set.length;++t){const o=e.set[t];let a=null;o.forEach((e=>{const t=new n(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":a&&!i(t,a)||(a=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!a||r&&!i(r,a)||(r=a)}return r&&e.test(r)?r:null}},6826:(e,t,r)=>{const n=r(6329),o=r(2257),{ANY:i}=o,a=r(6902),s=r(5712),c=r(1312),l=r(1544),u=r(2056),p=r(5903);e.exports=(e,t,r,d)=>{let h,m,f,g,y;switch(e=new n(e,d),t=new a(t,d),r){case">":h=c,m=u,f=l,g=">",y=">=";break;case"<":h=l,m=p,f=c,g="<",y="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(e,t,d))return!1;for(let r=0;r<t.set.length;++r){const n=t.set[r];let a=null,s=null;if(n.forEach((e=>{e.semver===i&&(e=new o(">=0.0.0")),a=a||e,s=s||e,h(e.semver,a.semver,d)?a=e:f(e.semver,s.semver,d)&&(s=e)})),a.operator===g||a.operator===y)return!1;if((!s.operator||s.operator===g)&&m(e,s.semver))return!1;if(s.operator===y&&f(e,s.semver))return!1}return!0}},7908:(e,t,r)=>{const n=r(5712),o=r(6269);e.exports=(e,t,r)=>{const i=[];let a=null,s=null;const c=e.sort(((e,t)=>o(e,t,r)));for(const e of c)n(e,t,r)?(s=e,a||(a=e)):(s&&i.push([a,s]),s=null,a=null);a&&i.push([a,null]);const l=[];for(const[e,t]of i)e===t?l.push(e):t||e!==c[0]?t?e===c[0]?l.push(`<=${t}`):l.push(`${e} - ${t}`):l.push(`>=${e}`):l.push("*");const u=l.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return u.length<p.length?u:t}},799:(e,t,r)=>{const n=r(6902),o=r(2257),{ANY:i}=o,a=r(5712),s=r(6269),c=(e,t,r)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===i){if(1===t.length&&t[0].semver===i)return!0;e=r.includePrerelease?[new o(">=0.0.0-0")]:[new o(">=0.0.0")]}if(1===t.length&&t[0].semver===i){if(r.includePrerelease)return!0;t=[new o(">=0.0.0")]}const n=new Set;let c,p,d,h,m,f,g;for(const t of e)">"===t.operator||">="===t.operator?c=l(c,t,r):"<"===t.operator||"<="===t.operator?p=u(p,t,r):n.add(t.semver);if(n.size>1)return null;if(c&&p){if(d=s(c.semver,p.semver,r),d>0)return null;if(0===d&&(">="!==c.operator||"<="!==p.operator))return null}for(const e of n){if(c&&!a(e,String(c),r))return null;if(p&&!a(e,String(p),r))return null;for(const n of t)if(!a(e,String(n),r))return!1;return!0}let y=!(!p||r.includePrerelease||!p.semver.prerelease.length)&&p.semver,v=!(!c||r.includePrerelease||!c.semver.prerelease.length)&&c.semver;y&&1===y.prerelease.length&&"<"===p.operator&&0===y.prerelease[0]&&(y=!1);for(const e of t){if(g=g||">"===e.operator||">="===e.operator,f=f||"<"===e.operator||"<="===e.operator,c)if(v&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===v.major&&e.semver.minor===v.minor&&e.semver.patch===v.patch&&(v=!1),">"===e.operator||">="===e.operator){if(h=l(c,e,r),h===e&&h!==c)return!1}else if(">="===c.operator&&!a(c.semver,String(e),r))return!1;if(p)if(y&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===y.major&&e.semver.minor===y.minor&&e.semver.patch===y.patch&&(y=!1),"<"===e.operator||"<="===e.operator){if(m=u(p,e,r),m===e&&m!==p)return!1}else if("<="===p.operator&&!a(p.semver,String(e),r))return!1;if(!e.operator&&(p||c)&&0!==d)return!1}return!(c&&f&&!p&&0!==d||p&&g&&!c&&0!==d||v||y)},l=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n>0?e:n<0||">"===t.operator&&">="===e.operator?t:e},u=(e,t,r)=>{if(!e)return t;const n=s(e.semver,t.semver,r);return n<0?e:n>0||"<"===t.operator&&"<="===e.operator?t:e};e.exports=(e,t,r={})=>{if(e===t)return!0;e=new n(e,r),t=new n(t,r);let o=!1;e:for(const n of e.set){for(const e of t.set){const t=c(n,e,r);if(o=o||null!==t,t)continue e}if(o)return!1}return!0}},1042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>new n(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")))},9042:(e,t,r)=>{const n=r(6902);e.exports=(e,t)=>{try{return new n(e,t).range||"*"}catch(e){return null}}},6372:e=>{"use strict";function t(e){return"function"==typeof e}var r=console.error.bind(console);function n(e,t,r){var n=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:n,writable:!0,value:r})}function o(e){e&&e.logger&&(t(e.logger)?r=e.logger:r("new logger isn't a function, not replacing"))}function i(e,o,i){if(e&&e[o]){if(!i)return r("no wrapper function"),void r((new Error).stack);if(t(e[o])&&t(i)){var a=e[o],s=i(a,o);return n(s,"__original",a),n(s,"__unwrap",(function(){e[o]===s&&n(e,o,a)})),n(s,"__wrapped",!0),n(e,o,s),s}r("original object and wrapper must be functions")}else r("no original function "+o+" to wrap")}function a(e,t){return e&&e[t]?e[t].__unwrap?e[t].__unwrap():void r("no original to unwrap to -- has "+t+" already been unwrapped?"):(r("no function to unwrap."),void r((new Error).stack))}o.wrap=i,o.massWrap=function(e,t,n){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){i(e,t,n)}))})):r("must provide one or more functions to wrap on modules")},o.unwrap=a,o.massUnwrap=function(e,t){if(!e)return r("must provide one or more modules to patch"),void r((new Error).stack);Array.isArray(e)||(e=[e]),t&&Array.isArray(t)?e.forEach((function(e){t.forEach((function(t){a(e,t)}))})):r("must provide one or more functions to unwrap on modules")},e.exports=o},465:e=>{e.exports=function(e,t){var r=[];r.push(function(e){try{return Error.prototype.toString.call(e)}catch(e){try{return"<error: "+e+">"}catch(e){return"<error>"}}}(e));for(var n=0;n<t.length;n++){var o,i=t[n];try{o=i.toString()}catch(e){try{o="<error: "+e+">"}catch(e){o="<error>"}}r.push("    at "+o)}return r.join("\n")}},2512:(e,t,r)=>{if(global._stackChain){if(global._stackChain.version!==r(9414).i8)throw new Error("Conflicting version of stack-chain found");e.exports=global._stackChain}else e.exports=global._stackChain=r(7898)},9414:e=>{"use strict";e.exports={i8:"1.3.7"}},7898:(e,t,r)=>{var n=r(465);function o(){this.extend=new s,this.filter=new s,this.format=new c,this.version=r(9414).i8}var i=!1;o.prototype.callSite=function e(t){t||(t={}),i=!0;var r={};Error.captureStackTrace(r,e);var n=r.stack;return i=!1,n=n.slice(t.slice||0),t.extend&&(n=this.extend._modify(r,n)),t.filter&&(n=this.filter._modify(r,n)),n};var a=new o;function s(){this._modifiers=[]}function c(){this._formater=n,this._previous=void 0}s.prototype._modify=function(e,t){for(var r=0,n=this._modifiers.length;r<n;r++)t=this._modifiers[r](e,t);return t},s.prototype.attach=function(e){this._modifiers.push(e)},s.prototype.deattach=function(e){var t=this._modifiers.indexOf(e);return-1!==t&&(this._modifiers.splice(t,1),!0)},c.prototype.replace=function(e){e?this._formater=e:this.restore()},c.prototype.restore=function(){this._formater=n,this._previous=void 0},c.prototype._backup=function(){this._previous=this._formater},c.prototype._roolback=function(){this._previous===n?this.replace(void 0):this.replace(this._previous),this._previous=void 0},Error.prepareStackTrace&&a.format.replace(Error.prepareStackTrace);var l=!1;function u(e,t){if(i)return t;if(l)return n(e,t);var r=t.concat();r=a.extend._modify(e,r),r=(r=a.filter._modify(e,r)).slice(0,Error.stackTraceLimit),Object.isExtensible(e)&&void 0===Object.getOwnPropertyDescriptor(e,"callSite")&&(e.callSite={original:t,mutated:r}),l=!0;var o=a.format._formater(e,r);return l=!1,o}Object.defineProperty(Error,"prepareStackTrace",{get:function(){return u},set:function(e){e===u?a.format._roolback():(a.format._backup(),a.format.replace(e))}}),Object.defineProperty(Error.prototype,"callSite",{get:function(){return this.stack,this.callSite},set:function(e){Object.defineProperty(this,"callSite",{value:e,writable:!0,configurable:!0})},configurable:!0}),e.exports=a},5702:(e,t,r)=>{"use strict";const n=r(9924),o=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};"boolean"==typeof i.strictZeros&&(i.relaxZeros=!1===i.strictZeros);let c=e+":"+t+"="+String(i.relaxZeros)+String(i.shorthand)+String(i.capture)+String(i.wrap);if(o.cache.hasOwnProperty(c))return o.cache[c].result;let l=Math.min(e,t),u=Math.max(e,t);if(1===Math.abs(l-u)){let r=e+"|"+t;return i.capture?`(${r})`:!1===i.wrap?r:`(?:${r})`}let p=h(e)||h(t),d={min:e,max:t,a:l,b:u},m=[],f=[];return p&&(d.isPadded=p,d.maxLen=String(d.max).length),l<0&&(f=a(u<0?Math.abs(u):1,Math.abs(l),d,i),l=d.a=0),u>=0&&(m=a(l,u,d,i)),d.negatives=f,d.positives=m,d.result=function(e,t,r){let n=s(e,t,"-",!1)||[],o=s(t,e,"",!1)||[],i=s(e,t,"-?",!0)||[];return n.concat(i).concat(o).join("|")}(f,m),!0===i.capture?d.result=`(${d.result})`:!1!==i.wrap&&m.length+f.length>1&&(d.result=`(?:${d.result})`),o.cache[c]=d,d.result};function i(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),o=n.length,i="",a=0;for(let e=0;e<o;e++){let[t,r]=n[e];t===r?i+=t:"0"!==t||"9"!==r?i+=`[${s=t}${(c=r)-s==1?"":"-"}${c}]`:a++}var s,c;return a&&(i+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:i,count:[a],digits:o}}function a(e,t,r,n){let o,a=function(e,t){let r=1,n=1,o=u(e,r),i=new Set([t]);for(;e<=o&&o<=t;)i.add(o),r+=1,o=u(e,r);for(o=p(t+1,n)-1;e<o&&o<=t;)i.add(o),n+=1,o=p(t+1,n)-1;return i=[...i],i.sort(c),i}(e,t),s=[],l=e;for(let e=0;e<a.length;e++){let t=a[e],c=i(String(l),String(t),n),u="";r.isPadded||!o||o.pattern!==c.pattern?(r.isPadded&&(u=m(t,r,n)),c.string=u+c.pattern+d(c.count),s.push(c),l=t+1,o=c):(o.count.length>1&&o.count.pop(),o.count.push(c.count[0]),o.string=o.pattern+d(o.count),l=t+1)}return s}function s(e,t,r,n,o){let i=[];for(let o of e){let{string:e}=o;n||l(t,"string",e)||i.push(r+e),n&&l(t,"string",e)&&i.push(r+e)}return i}function c(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some((e=>e[t]===r))}function u(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function p(e,t){return e-e%Math.pow(10,t)}function d(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function h(e){return/^-?(0+)\d/.test(e)}function m(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),o=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return o?"0?":"0";case 2:return o?"0{0,2}":"00";default:return o?`0{0,${n}}`:`0{${n}}`}}o.cache={},o.clearCache=()=>o.cache={},e.exports=o},8981:(e,t)=>{"use strict";t.E=function(e){return Object.defineProperty((function(){if("function"!=typeof arguments[arguments.length-1])return new Promise(((t,r)=>{arguments[arguments.length]=(e,n)=>{if(e)return r(e);t(n)},arguments.length++,e.apply(this,arguments)}));e.apply(this,arguments)}),"name",{value:e.name})},t.p=function(e){return Object.defineProperty((function(){const t=arguments[arguments.length-1];if("function"!=typeof t)return e.apply(this,arguments);e.apply(this,arguments).then((e=>t(null,e)),t)}),"name",{value:e.name})}},4398:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),process.env.APPLICATION_INSIGHTS_NO_DIAGNOSTIC_CHANNEL=!0;var n=r(5747),o=r(2087),i=r(5622),a=r(7549),s=r(9574),c=function(){function e(e,t,r,o){var s=this;this.extensionId=e,this.extensionVersion=t,this.firstParty=!1,this.userOptIn=!1,this.firstParty=!!o;var c=process.env.VSCODE_LOGS||"";c&&e&&"trace"===process.env.VSCODE_LOG_LEVEL&&(c=i.join(c,e+".txt"),this.logStream=n.createWriteStream(c,{flags:"a",encoding:"utf8",autoClose:!0})),this.updateUserOptIn(r),this.configListener=a.workspace.onDidChangeConfiguration((function(){return s.updateUserOptIn(r)}))}return e.prototype.updateUserOptIn=function(t){var r=a.workspace.getConfiguration(e.TELEMETRY_CONFIG_ID);this.userOptIn!==r.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0)&&(this.userOptIn=r.get(e.TELEMETRY_CONFIG_ENABLED_ID,!0),this.userOptIn?this.createAppInsightsClient(t):this.dispose())},e.prototype.createAppInsightsClient=function(e){s.defaultClient?(this.appInsightsClient=new s.TelemetryClient(e),this.appInsightsClient.channel.setUseDiskRetryCaching(!0)):(s.setup(e).setAutoCollectRequests(!1).setAutoCollectPerformance(!1).setAutoCollectExceptions(!1).setAutoCollectDependencies(!1).setAutoDependencyCorrelation(!1).setAutoCollectConsole(!1).setUseDiskRetryCaching(!0).start(),this.appInsightsClient=s.defaultClient),this.appInsightsClient.commonProperties=this.getCommonProperties(),a&&a.env&&(this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.userId]=a.env.machineId,this.appInsightsClient.context.tags[this.appInsightsClient.context.keys.sessionId]=a.env.sessionId),e&&0===e.indexOf("AIF-")&&(this.appInsightsClient.config.endpointUrl="https://vortex.data.microsoft.com/collect/v1",this.firstParty=!0)},e.prototype.getCommonProperties=function(){var e=Object.create(null);if(e["common.os"]=o.platform(),e["common.platformversion"]=(o.release()||"").replace(/^(\d+)(\.\d+)?(\.\d+)?(.*)/,"$1$2$3"),e["common.extname"]=this.extensionId,e["common.extversion"]=this.extensionVersion,a&&a.env){switch(e["common.vscodemachineid"]=a.env.machineId,e["common.vscodesessionid"]=a.env.sessionId,e["common.vscodeversion"]=a.version,a.env.uiKind){case a.UIKind.Web:e["common.uikind"]="web";break;case a.UIKind.Desktop:e["common.uikind"]="desktop";break;default:e["common.uikind"]="unknown"}e["common.remotename"]=this.cleanRemoteName(a.env.remoteName)}return e},e.prototype.cleanRemoteName=function(e){if(!e)return"none";var t="other";return["ssh-remote","dev-container","attached-container","wsl"].forEach((function(r){0===e.indexOf(r+"+")&&(t=r)})),t},e.prototype.shouldSendErrorTelemetry=function(){return!this.firstParty||"other"!==this.cleanRemoteName(a.env.remoteName)||void 0!==this.extension&&this.extension.extensionKind!==a.ExtensionKind.Workspace&&a.env.uiKind!==a.UIKind.Web},Object.defineProperty(e.prototype,"extension",{get:function(){return void 0===this._extension&&(this._extension=a.extensions.getExtension(this.extensionId)),this._extension},enumerable:!0,configurable:!0}),e.prototype.cloneAndChange=function(e,t){if(null===e||"object"!=typeof e)return e;if("function"!=typeof t)return e;var r={};for(var n in e)r[n]=t(n,e[n]);return r},e.prototype.anonymizeFilePaths=function(e,t){if(null==e)return"";var r=[new RegExp(a.env.appRoot.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi")];this.extension&&r.push(new RegExp(this.extension.extensionPath.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi"));var n=e;if(t){for(var o=[],i=0,s=r;i<s.length;i++)for(var c=s[i];;){var l=c.exec(e);if(!l)break;o.push([l.index,c.lastIndex])}var u=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,p=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g,d=0;n="";for(var h=function(){var t=p.exec(e);if(!t)return"break";!u.test(t[0])&&o.every((function(e){var r=e[0],n=e[1];return t.index<r||t.index>=n}))&&(n+=e.substring(d,t.index)+"<REDACTED: user-file-path>",d=p.lastIndex)};"break"!==h(););d<e.length&&(n+=e.substr(d))}for(var m=0,f=r;m<f.length;m++)c=f[m],n=n.replace(c,"");return n},e.prototype.sendTelemetryEvent=function(e,t,r){var n=this;if(this.userOptIn&&e&&this.appInsightsClient){var o=this.cloneAndChange(t,(function(e,t){return n.anonymizeFilePaths(t,n.firstParty)}));this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:o,measurements:r}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:r})+"\n")}},e.prototype.sendTelemetryErrorEvent=function(e,t,r,n){var o=this;if(this.userOptIn&&e&&this.appInsightsClient){var i=this.cloneAndChange(t,(function(e,t){return o.shouldSendErrorTelemetry()?o.anonymizeFilePaths(t,o.firstParty):void 0===n||-1!==n.indexOf(e)?"REDACTED":o.anonymizeFilePaths(t,o.firstParty)}));this.appInsightsClient.trackEvent({name:this.extensionId+"/"+e,properties:i,measurements:r}),this.logStream&&this.logStream.write("telemetry/"+e+" "+JSON.stringify({properties:t,measurements:r})+"\n")}},e.prototype.sendTelemetryException=function(e,t,r){var n=this;if(this.shouldSendErrorTelemetry()&&this.userOptIn&&e&&this.appInsightsClient){var o=this.cloneAndChange(t,(function(e,t){return n.anonymizeFilePaths(t,n.firstParty)}));this.appInsightsClient.trackException({exception:e,properties:o,measurements:r}),this.logStream&&this.logStream.write("telemetry/"+e.name+" "+e.message+" "+JSON.stringify({properties:t,measurements:r})+"\n")}},e.prototype.dispose=function(){var e=this;this.configListener.dispose();var t=new Promise((function(t){if(!e.logStream)return t(void 0);e.logStream.on("finish",t),e.logStream.end()})),r=new Promise((function(t){e.appInsightsClient?e.appInsightsClient.flush({callback:function(){e.appInsightsClient=void 0,t(void 0)}}):t(void 0)}));return Promise.all([r,t])},e.TELEMETRY_CONFIG_ID="telemetry",e.TELEMETRY_CONFIG_ENABLED_ID="enableTelemetry",e}();t.default=c},2884:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}}class n extends r{constructor(){super([n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),"-","4",n._randomHex(),n._randomHex(),n._randomHex(),"-",n._oneOf(n._timeHighBits),n._randomHex(),n._randomHex(),n._randomHex(),"-",n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex(),n._randomHex()].join(""))}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return n._oneOf(n._chars)}}function o(){return new n}n._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],n._timeHighBits=["8","9","a","b"],t.empty=new r("00000000-0000-0000-0000-000000000000"),t.v4=o;const i=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function a(e){return i.test(e)}t.isUUID=a,t.parse=function(e){if(!a(e))throw new Error("invalid uuid");return new r(e)},t.generateUuid=function(){return o().asHex()}},3403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o,i,a,s,c,l=r(5622),u=r(5747),p=Object.prototype.toString;function d(e){return void 0!==e}function h(e){return"[object Number]"===p.call(e)}function m(e){return"[object String]"===p.call(e)}function f(e){return JSON.parse(u.readFileSync(e,"utf8"))}function g(e,t){return c&&(e="［"+e.replace(/[aouei]/g,"$&$&")+"］"),0===t.length?e:e.replace(/\{(\d+)\}/g,(function(e,r){var n=r[0],o=t[n],i=e;return"string"==typeof o?i=o:"number"!=typeof o&&"boolean"!=typeof o&&null!=o||(i=String(o)),i}))}function y(e){return function(t,r){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return h(t)?t>=e.length?void console.error("Broken localize call found. Index out of bounds. Stacktrace is\n: "+new Error("").stack):g(e[t],n):m(r)?(console.warn("Message "+r+" didn't get externalized correctly."),g(r,n)):void console.error("Broken localize call found. Stacktrace is\n: "+new Error("").stack)}}function v(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return g(t,r)}function b(e,t){return a[e]=t,t}function w(e){try{return function(e){var t=f(l.join(e,"nls.metadata.json")),r=Object.create(null);for(var n in t){var o=t[n];r[n]=o.messages}return r}(e)}catch(e){return void console.log("Generating default bundle from meta data failed.",e)}}function S(e,t){var r;if(!0===s.languagePackSupport&&void 0!==s.cacheRoot&&void 0!==s.languagePackId&&void 0!==s.translationsConfigFile&&void 0!==s.translationsConfig)try{r=function(e,t){var r,n,o,i=l.join(s.cacheRoot,e.id+"-"+e.hash+".json"),a=!1,c=!1;try{return r=JSON.parse(u.readFileSync(i,{encoding:"utf8",flag:"r"})),n=i,o=new Date,u.utimes(n,o,o,(function(){})),r}catch(e){if("ENOENT"===e.code)c=!0;else{if(!(e instanceof SyntaxError))throw e;console.log("Syntax error parsing message bundle: "+e.message+"."),u.unlink(i,(function(e){e&&console.error("Deleting corrupted bundle "+i+" failed.")})),a=!0}}if(!(r=function(e,t){var r=s.translationsConfig[e.id];if(r){var n=f(r).contents,o=f(l.join(t,"nls.metadata.json")),i=Object.create(null);for(var a in o){var c=o[a],u=n[e.outDir+"/"+a];if(u){for(var p=[],d=0;d<c.keys.length;d++){var h=c.keys[d],g=u[m(h)?h:h.key];void 0===g&&(g=c.messages[d]),p.push(g)}i[a]=p}else i[a]=c.messages}return i}}(e,t))||a)return r;if(c)try{u.writeFileSync(i,JSON.stringify(r),{encoding:"utf8",flag:"wx"})}catch(e){if("EEXIST"===e.code)return r;throw e}return r}(e,t)}catch(e){console.log("Load or create bundle failed ",e)}if(!r){if(s.languagePackSupport)return w(t);var n=function(e){for(var t=s.language;t;){var r=l.join(e,"nls.bundle."+t+".json");if(u.existsSync(r))return r;var n=t.lastIndexOf("-");t=n>0?t.substring(0,n):void 0}if(void 0===t&&(r=l.join(e,"nls.bundle.json"),u.existsSync(r)))return r}(t);if(n)try{return f(n)}catch(e){console.log("Loading in the box message bundle failed.",e)}r=w(t)}return r}function P(e){if(!e)return v;var t=l.extname(e);if(t&&(e=e.substr(0,e.length-t.length)),s.messageFormat===n.both||s.messageFormat===n.bundle){var r=function(e){for(var t,r=l.dirname(e);t=l.join(r,"nls.metadata.header.json"),!u.existsSync(t);){var n=l.dirname(r);if(n===r){t=void 0;break}r=n}return t}(e);if(r){var o=l.dirname(r),i=a[o];if(void 0===i)try{var p=JSON.parse(u.readFileSync(r,"utf8"));try{var h=S(p,o);i=b(o,h?{header:p,nlsBundle:h}:null)}catch(e){console.error("Failed to load nls bundle",e),i=b(o,null)}}catch(e){console.error("Failed to read header file",e),i=b(o,null)}if(i){var m=e.substr(o.length+1).replace(/\\/g,"/"),g=i.nlsBundle[m];return void 0===g?(console.error("Messages for file "+e+" not found. See console for details."),function(){return"Messages not found."}):y(g)}}}if(s.messageFormat===n.both||s.messageFormat===n.file)try{var w=f(function(e){var t;if(s.cacheLanguageResolution&&t)t=t;else{if(c||!s.language)t=".nls.json";else for(var r=s.language;r;){var n=".nls."+r+".json";if(u.existsSync(e+n)){t=n;break}var o=r.lastIndexOf("-");o>0?r=r.substring(0,o):(t=".nls.json",r=null)}s.cacheLanguageResolution&&(t=t)}return e+t}(e));return Array.isArray(w)?y(w):d(w.messages)&&d(w.keys)?y(w.messages):(console.error("String bundle '"+e+"' uses an unsupported format."),function(){return"File bundle has unsupported format. See console for details"})}catch(e){"ENOENT"!==e.code&&console.error("Failed to load single file bundle",e)}return console.error("Failed to load message bundle for file "+e),function(){return"Failed to load message bundle. See console for details."}}!function(e){e.file="file",e.bundle="bundle",e.both="both"}(n=t.MessageFormat||(t.MessageFormat={})),function(e){e.standalone="standalone",e.languagePack="languagePack"}(o=t.BundleFormat||(t.BundleFormat={})),function(e){e.is=function(e){var t=e;return t&&d(t.key)&&d(t.comment)}}(i||(i={})),function(){if(s={locale:void 0,language:void 0,languagePackSupport:!1,cacheLanguageResolution:!0,messageFormat:n.bundle},m(process.env.VSCODE_NLS_CONFIG))try{var e=JSON.parse(process.env.VSCODE_NLS_CONFIG),t=void 0;if(e.availableLanguages){var r=e.availableLanguages["*"];m(r)&&(t=r)}if(m(e.locale)&&(s.locale=e.locale.toLowerCase()),void 0===t?s.language=s.locale:"en"!==t&&(s.language=t),function(e){return!0===e||!1===e}(e._languagePackSupport)&&(s.languagePackSupport=e._languagePackSupport),m(e._cacheRoot)&&(s.cacheRoot=e._cacheRoot),m(e._languagePackId)&&(s.languagePackId=e._languagePackId),m(e._translationsConfigFile)){s.translationsConfigFile=e._translationsConfigFile;try{s.translationsConfig=f(s.translationsConfigFile)}catch(t){if(e._corruptedFile){var o=l.dirname(e._corruptedFile);u.exists(o,(function(t){t&&u.writeFile(e._corruptedFile,"corrupted","utf8",(function(e){console.error(e)}))}))}}}}catch(e){}c="pseudo"===s.locale,a=Object.create(null)}(),t.loadMessageBundle=P,t.config=function(e){return e&&(m(e.locale)&&(s.locale=e.locale.toLowerCase(),s.language=s.locale,a=Object.create(null)),void 0!==e.messageFormat&&(s.messageFormat=e.messageFormat),e.bundleFormat===o.standalone&&!0===s.languagePackSupport&&(s.languagePackSupport=!1)),c="pseudo"===s.locale,P}},2806:(e,t,r)=>{const n="win32"===process.platform||"cygwin"===process.env.OSTYPE||"msys"===process.env.OSTYPE,o=r(5622),i=n?";":":",a=r(1959),s=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),c=(e,t)=>{const r=t.colon||i,o=e.match(/\//)||n&&e.match(/\\/)?[""]:[...n?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(r)],a=n?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",s=n?a.split(r):[""];return n&&-1!==e.indexOf(".")&&""!==s[0]&&s.unshift(""),{pathEnv:o,pathExt:s,pathExtExe:a}},l=(e,t,r)=>{"function"==typeof t&&(r=t,t={}),t||(t={});const{pathEnv:n,pathExt:i,pathExtExe:l}=c(e,t),u=[],p=r=>new Promise(((i,a)=>{if(r===n.length)return t.all&&u.length?i(u):a(s(e));const c=n[r],l=/^".*"$/.test(c)?c.slice(1,-1):c,p=o.join(l,e),h=!l&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;i(d(h,r,0))})),d=(e,r,n)=>new Promise(((o,s)=>{if(n===i.length)return o(p(r+1));const c=i[n];a(e+c,{pathExt:l},((i,a)=>{if(!i&&a){if(!t.all)return o(e+c);u.push(e+c)}return o(d(e,r,n+1))}))}));return r?p(0).then((e=>r(null,e)),r):p(0)};e.exports=l,l.sync=(e,t)=>{t=t||{};const{pathEnv:r,pathExt:n,pathExtExe:i}=c(e,t),l=[];for(let s=0;s<r.length;s++){const c=r[s],u=/^".*"$/.test(c)?c.slice(1,-1):c,p=o.join(u,e),d=!u&&/^\.[\\\/]/.test(e)?e.slice(0,2)+p:p;for(let e=0;e<n.length;e++){const r=d+n[e];try{if(a.sync(r,{pathExt:i})){if(!t.all)return r;l.push(r)}}catch(e){}}}if(t.all&&l.length)return l;if(t.nothrow)return null;throw s(e)}},1465:(e,t,r)=>{function n(e){let t;for(e.content+=e.options.lineSeparator,t=0;t<e.level;t++)e.content+=e.options.indentation}function o(e,t){e.content+=t}function i(e,t,r,c){if("string"==typeof e.content)!function(e,t,r){(""!==e.content.trim()||r)&&(!r&&t.content.length>0&&n(t),o(t,e.content))}(e,t,r);else if("Element"===e.type)!function(e,t,r,s){if(!r&&t.content.length>0&&n(t),o(t,"<"+e.name),a(t,e.attributes),null===e.children){const e=s.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";o(t,e)}else if(0===e.children.length)o(t,"></"+e.name+">");else{o(t,">"),t.level++;let a="preserve"===e.attributes["xml:space"];!a&&t.options.collapseContent&&e.children.some((function(e){return"Text"===e.type&&""!==e.content.trim()}))&&(a=!0),e.children.forEach((function(e){i(e,t,r||a,s)})),t.level--,r||a||n(t),o(t,"</"+e.name+">")}}(e,t,r,c);else{if("ProcessingInstruction"!==e.type)throw new Error("Unknown node type: "+e.type);s(e,t)}}function a(e,t){Object.keys(t).forEach((function(r){o(e," "+r+'="'+t[r]+'"')}))}function s(e,t){t.content.length>0&&n(t),o(t,"<?"+e.name),a(t,e.attributes),o(t,"?>")}e.exports=function(e,t={}){(t=t||{}).indentation=t.indentation||"    ",t.collapseContent=!0===t.collapseContent,t.lineSeparator=t.lineSeparator||"\r\n",t.whiteSpaceAtEndOfSelfclosingTag=!!t.whiteSpaceAtEndOfSelfclosingTag;const n=r(7121)(e,{filter:t.filter}),o={content:"",level:0,options:t};return n.declaration&&s(n.declaration,o),n.children.forEach((function(e){i(e,o,!1,t)})),o.content}},7121:e=>{e.exports=function(e,t={}){function r(){return i()||function(){const e=c(/^([^<]+)/);if(e){const r={type:"Text",content:e[1]};return{excluded:!1===t.filter(r),node:r}}}()||a()||function(){const e=c(/^<!\[CDATA\[[^\]\]>]*]]>/);if(e){const r={type:"CDATA",content:e[0]};return{excluded:!1===t.filter(r),node:r}}}()}function n(){return c(/\s*/),i(!0)||a()||function(){const e=c(/^<!DOCTYPE\s+[^>]*>/);if(e){const r={type:"DocumentType",content:e[0]};return{excluded:!1===t.filter(r),node:r}}}()||o(!1)}function o(e){const r=c(e?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!r)return;const n={name:r[1],type:"ProcessingInstruction",attributes:{}};for(;!l()&&!u("?>");){const e=s();if(!e)return n;n.attributes[e.name]=e.value}return c(/\?>/),{excluded:!e&&!1===t.filter(n),node:n}}function i(e){const n=c(/^<([\w-:.]+)\s*/);if(!n)return;const o={type:"Element",name:n[1],attributes:{},children:[]};for(;!(l()||u(">")||u("?>")||u("/>"));){const e=s();if(!e)return o;o.attributes[e.name]=e.value}const i=!e&&!1===t.filter(o);if(c(/^\s*\/>/))return o.children=null,{excluded:i,node:o};if(c(/\??>/),!i){let e=r();for(;e;)e.excluded||o.children.push(e.node),e=r()}return c(/^<\/[\w-:.]+>/),{excluded:i,node:o}}function a(){const e=c(/^<!--[\s\S]*?-->/);if(e){const r={type:"Comment",content:e[0]};return{excluded:!1===t.filter(r),node:r}}}function s(){const e=c(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);var t;if(e)return{name:e[1],value:(t=e[2],t.replace(/^['"]|['"]$/g,""))}}function c(t){const r=e.match(t);if(r)return e=e.slice(r[0].length),r}function l(){return 0===e.length}function u(t){return 0===e.indexOf(t)}return t.filter=t.filter||(()=>!0),e=e.trim(),function(){const e=o(!0),t=[];let r,i=n();for(;i;){if("Element"===i.node.type){if(r)throw new Error("Found multiple root nodes");r=i.node}i.excluded||t.push(i.node),i=n()}if(!r)throw new Error("Failed to parse XML");return{declaration:e?e.node:null,root:r,children:t}}()}},647:(e,t,r)=>{function n(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function i(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function c(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var r=this.options,n=new p,i=r.domBuilder||new o,s=r.errorHandler,c=r.locator,u=r.xmlns||{},d=/\/x?html?$/.test(t),h=d?l.entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return c&&i.setDocumentLocator(c),n.errorHandler=function(e,t,r){if(!e){if(t instanceof o)return t;e=t}var n={},i=e instanceof Function;function s(t){var o=e[t];!o&&i&&(o=2==e.length?function(r){e(t,r)}:e),n[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+a(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),n}(s,i,c),n.domBuilder=r.domBuilder||i,d&&(u[""]="http://www.w3.org/1999/xhtml"),u.xml=u.xml||"http://www.w3.org/XML/1998/namespace",e&&"string"==typeof e?n.parse(e,u,h):n.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new h).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var o=this.doc,a=o.createElementNS(e,r||t),s=n.length;c(this,a),this.currentElement=a,this.locator&&i(this.locator,a);for(var l=0;l<s;l++){e=n.getURI(l);var u=n.getValue(l),p=(r=n.getQName(l),o.createAttributeNS(e,r));this.locator&&i(n.getLocator(l),p),p.value=p.nodeValue=u,a.setAttributeNode(p)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&i(this.locator,r),c(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&i(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=s.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&i(this.locator,n),c(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var o=n.createDocumentType(e,t,r);this.locator&&i(this.locator,o),c(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw new d(e,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(e){o.prototype[e]=function(){return null}}));var l=r(3791),u=r(8275),p=u.XMLReader,d=u.ParseError,h=t.DOMImplementation=r(9034).DOMImplementation;t.XMLSerializer=r(9034).XMLSerializer,t.DOMParser=n,t.__DOMHandler=o},9034:(e,t)=>{function r(e,t){for(var r in e)t[r]=e[r]}function n(e,t){var n=e.prototype;if(!(n instanceof t)){function o(){}o.prototype=t.prototype,r(n,o=new o),e.prototype=n=o}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var o={},i=o.ELEMENT_NODE=1,a=o.ATTRIBUTE_NODE=2,s=o.TEXT_NODE=3,c=o.CDATA_SECTION_NODE=4,l=o.ENTITY_REFERENCE_NODE=5,u=o.ENTITY_NODE=6,p=o.PROCESSING_INSTRUCTION_NODE=7,d=o.COMMENT_NODE=8,h=o.DOCUMENT_NODE=9,m=o.DOCUMENT_TYPE_NODE=10,f=o.DOCUMENT_FRAGMENT_NODE=11,g=o.NOTATION_NODE=12,y={},v={},b=(y.INDEX_SIZE_ERR=(v[1]="Index size error",1),y.DOMSTRING_SIZE_ERR=(v[2]="DOMString size error",2),y.HIERARCHY_REQUEST_ERR=(v[3]="Hierarchy request error",3)),w=(y.WRONG_DOCUMENT_ERR=(v[4]="Wrong document",4),y.INVALID_CHARACTER_ERR=(v[5]="Invalid character",5),y.NO_DATA_ALLOWED_ERR=(v[6]="No data allowed",6),y.NO_MODIFICATION_ALLOWED_ERR=(v[7]="No modification allowed",7),y.NOT_FOUND_ERR=(v[8]="Not found",8)),S=(y.NOT_SUPPORTED_ERR=(v[9]="Not supported",9),y.INUSE_ATTRIBUTE_ERR=(v[10]="Attribute in use",10));function P(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,v[e]),this.message=v[e],Error.captureStackTrace&&Error.captureStackTrace(this,P);return r.code=e,t&&(this.message=this.message+": "+t),r}function E(){}function D(e,t){this._node=e,this._refresh=t,T(this)}function T(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);ne(e,"length",n.length),r(n,e),e._inc=t}}function x(){}function _(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function C(e,t,r,n){if(n?t[_(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var o=e.ownerDocument;o&&(n&&k(o,e,n),function(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(o,e,r))}}function j(e,t,r){var n=_(t,r);if(!(n>=0))throw P(w,new Error(e.tagName+"@"+r));for(var o=t.length-1;n<o;)t[n]=t[++n];if(t.length=o,e){var i=e.ownerDocument;i&&(k(i,e,r),r.ownerElement=null)}}function I(e){if(this._features={},e)for(var t in e)this._features=e[t]}function N(){}function A(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(R(e,t))return!0}while(e=e.nextSibling)}function F(){}function k(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function O(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var o=t.firstChild,i=0;o;)n[i++]=o,o=o.nextSibling;n.length=i}}}function L(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,O(e.ownerDocument,e),t}function q(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===f){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=r?r.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=r,a?a.nextSibling=o:e.firstChild=o,null==r?e.lastChild=i:r.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return O(e.ownerDocument||e,e),t.nodeType==f&&(t.firstChild=t.lastChild=null),t}function M(){this._nsMap={}}function B(){}function V(){}function $(){}function U(){}function H(){}function G(){}function z(){}function W(){}function X(){}function Q(){}function K(){}function Y(){}function J(e,t){var r=[],n=9==this.nodeType&&this.documentElement||this,o=n.prefix,i=n.namespaceURI;if(i&&null==o&&null==(o=n.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return ee(this,r,e,t,a),r.join("")}function Z(e,t,r){var n=e.prefix||"",o=e.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=r.length;i--;){var a=r[i];if(a.prefix==n)return a.namespace!=o}return!0}function ee(e,t,r,n,o){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case i:o||(o=[]),o.length;var u=e.attributes,g=u.length,y=e.firstChild,v=e.tagName;r="http://www.w3.org/1999/xhtml"===e.namespaceURI||r,t.push("<",v);for(var b=0;b<g;b++)"xmlns"==(w=u.item(b)).prefix?o.push({prefix:w.localName,namespace:w.value}):"xmlns"==w.nodeName&&o.push({prefix:"",namespace:w.value});for(b=0;b<g;b++){var w;if(Z(w=u.item(b),0,o)){var S=w.prefix||"",P=w.namespaceURI,E=S?" xmlns:"+S:" xmlns";t.push(E,'="',P,'"'),o.push({prefix:S,namespace:P})}ee(w,t,r,n,o)}if(Z(e,0,o)&&(S=e.prefix||"",(P=e.namespaceURI)&&(E=S?" xmlns:"+S:" xmlns",t.push(E,'="',P,'"'),o.push({prefix:S,namespace:P}))),y||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(v)){if(t.push(">"),r&&/^script$/i.test(v))for(;y;)y.data?t.push(y.data):ee(y,t,r,n,o),y=y.nextSibling;else for(;y;)ee(y,t,r,n,o),y=y.nextSibling;t.push("</",v,">")}else t.push("/>");return;case h:case f:for(y=e.firstChild;y;)ee(y,t,r,n,o),y=y.nextSibling;return;case a:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,A),'"');case s:return t.push(e.data.replace(/[<&]/g,A).replace(/]]>/g,"]]&gt;"));case c:return t.push("<![CDATA[",e.data,"]]>");case d:return t.push("\x3c!--",e.data,"--\x3e");case m:var D=e.publicId,T=e.systemId;if(t.push("<!DOCTYPE ",e.name),D)t.push(" PUBLIC ",D),T&&"."!=T&&t.push(" ",T),t.push(">");else if(T&&"."!=T)t.push(" SYSTEM ",T,">");else{var x=e.internalSubset;x&&t.push(" [",x,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function te(e,t,r){var n;switch(t.nodeType){case i:(n=t.cloneNode(!1)).ownerDocument=e;case f:break;case a:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var o=t.firstChild;o;)n.appendChild(te(e,o,r)),o=o.nextSibling;return n}function re(e,t,r){var n=new t.constructor;for(var o in t){var s=t[o];"object"!=typeof s&&s!=n[o]&&(n[o]=s)}switch(t.childNodes&&(n.childNodes=new E),n.ownerDocument=e,n.nodeType){case i:var c=t.attributes,l=n.attributes=new x,u=c.length;l._ownerElement=n;for(var p=0;p<u;p++)n.setAttributeNode(re(e,c.item(p),!0));break;case a:r=!0}if(r)for(var d=t.firstChild;d;)n.appendChild(re(e,d,r)),d=d.nextSibling;return n}function ne(e,t,r){e[t]=r}y.INVALID_STATE_ERR=(v[11]="Invalid state",11),y.SYNTAX_ERR=(v[12]="Syntax error",12),y.INVALID_MODIFICATION_ERR=(v[13]="Invalid modification",13),y.NAMESPACE_ERR=(v[14]="Invalid namespace",14),y.INVALID_ACCESS_ERR=(v[15]="Invalid access",15),P.prototype=Error.prototype,r(y,P),E.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)ee(this[n],r,e,t);return r.join("")}},D.prototype.item=function(e){return T(this),this[e]},n(D,E),x.prototype={length:0,item:E.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new P(S);var r=this.getNamedItem(e.nodeName);return C(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new P(S);return t=this.getNamedItemNS(e.namespaceURI,e.localName),C(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return j(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return j(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},I.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new F;if(n.implementation=this,n.childNodes=new E,n.doctype=r,r&&n.appendChild(r),t){var o=n.createElementNS(e,t);n.appendChild(o)}return n},createDocumentType:function(e,t,r){var n=new G;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},N.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return q(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return L(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return re(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==s&&e.nodeType==s?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==a?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(o,N),r(o,N.prototype),F.prototype={nodeName:"#document",nodeType:h,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==f){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==i&&(this.documentElement=e),q(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),L(this,e)},importNode:function(e,t){return te(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,(function(r){if(r.nodeType==i&&r.getAttribute("id")==e)return t=r,!0})),t},getElementsByClassName:function(e){var t=new RegExp("(^|\\s)"+e+"(\\s|$)");return new D(this,(function(e){var r=[];return R(e.documentElement,(function(n){n!==e&&n.nodeType==i&&t.test(n.getAttribute("class"))&&r.push(n)})),r}))},createElement:function(e){var t=new M;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new E,(t.attributes=new x)._ownerElement=t,t},createDocumentFragment:function(){var e=new Q;return e.ownerDocument=this,e.childNodes=new E,e},createTextNode:function(e){var t=new $;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new U;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new H;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new K;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new B;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new X;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new M,n=t.split(":"),o=r.attributes=new x;return r.childNodes=new E,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,o._ownerElement=r,r},createAttributeNS:function(e,t){var r=new B,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},n(F,N),M.prototype={nodeType:i,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===f?this.insertBefore(e,null):function(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,O(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new D(this,(function(t){var r=[];return R(t,(function(n){n===t||n.nodeType!=i||"*"!==e&&n.tagName!=e||r.push(n)})),r}))},getElementsByTagNameNS:function(e,t){return new D(this,(function(r){var n=[];return R(r,(function(o){o===r||o.nodeType!==i||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||n.push(o)})),n}))}},F.prototype.getElementsByTagName=M.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=M.prototype.getElementsByTagNameNS,n(M,N),B.prototype.nodeType=a,n(B,N),V.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(v[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},n(V,N),$.prototype={nodeName:"#text",nodeType:s,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n($,V),U.prototype={nodeName:"#comment",nodeType:d},n(U,V),H.prototype={nodeName:"#cdata-section",nodeType:c},n(H,V),G.prototype.nodeType=m,n(G,N),z.prototype.nodeType=g,n(z,N),W.prototype.nodeType=u,n(W,N),X.prototype.nodeType=l,n(X,N),Q.prototype.nodeName="#document-fragment",Q.prototype.nodeType=f,n(Q,N),K.prototype.nodeType=p,n(K,N),Y.prototype.serializeToString=function(e,t,r){return J.call(e,t,r)},N.prototype.toString=J;try{if(Object.defineProperty){function oe(e){switch(e.nodeType){case i:case f:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(oe(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(D.prototype,"length",{get:function(){return T(this),this.$$length}}),Object.defineProperty(N.prototype,"textContent",{get:function(){return oe(this)},set:function(e){switch(this.nodeType){case i:case f:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),ne=function(e,t,r){e["$$"+t]=r}}}catch(e){}t.DOMImplementation=I,t.XMLSerializer=Y},3791:(e,t)=>{t.entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"}},8275:(e,t)=>{var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$");function i(e,t){this.message=e,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,i)}function a(){}function s(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function c(e,t,r,n,o,i){function a(e,t,n){e in r.attributeNames&&i.fatalError("Attribute "+e+" redefined"),r.addValue(e,t,n)}for(var s,c=++t,l=0;;){var u=e.charAt(c);switch(u){case"=":if(1===l)s=e.slice(t,c),l=3;else{if(2!==l)throw new Error("attribute equal must after attrName");l=3}break;case"'":case'"':if(3===l||1===l){if(1===l&&(i.warning('attribute value must after "="'),s=e.slice(t,c)),t=c+1,!((c=e.indexOf(u,t))>0))throw new Error("attribute value no end '"+u+"' match");a(s,p=e.slice(t,c).replace(/&#?\w+;/g,o),t-1),l=5}else{if(4!=l)throw new Error('attribute value must after "="');a(s,p=e.slice(t,c).replace(/&#?\w+;/g,o),t),i.warning('attribute "'+s+'" missed start quot('+u+")!!"),t=c+1,l=5}break;case"/":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:l=7,r.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return i.error("unexpected end of input"),0==l&&r.setTagName(e.slice(t,c)),c;case">":switch(l){case 0:r.setTagName(e.slice(t,c));case 5:case 6:case 7:break;case 4:case 1:"/"===(p=e.slice(t,c)).slice(-1)&&(r.closed=!0,p=p.slice(0,-1));case 2:2===l&&(p=s),4==l?(i.warning('attribute "'+p+'" missed quot(")!'),a(s,p.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===n[""]&&p.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+p+'" missed value!! "'+p+'" instead!!'),a(p,p,t));break;case 3:throw new Error("attribute value missed!!")}return c;case"":u=" ";default:if(u<=" ")switch(l){case 0:r.setTagName(e.slice(t,c)),l=6;break;case 1:s=e.slice(t,c),l=2;break;case 4:var p=e.slice(t,c).replace(/&#?\w+;/g,o);i.warning('attribute "'+p+'" missed quot(")!!'),a(s,p,t);case 5:l=6}else switch(l){case 2:r.tagName,"http://www.w3.org/1999/xhtml"===n[""]&&s.match(/^(?:disabled|checked|selected)$/i)||i.warning('attribute "'+s+'" missed value!! "'+s+'" instead2!!'),a(s,s,t),t=c,l=1;break;case 5:i.warning('attribute space is required"'+s+'"!!');case 6:l=1,t=c;break;case 3:l=4,t=c;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}c++}}function l(e,t,r){for(var n=e.tagName,o=null,i=e.length;i--;){var a=e[i],s=a.qName,c=a.value;if((h=s.indexOf(":"))>0)var l=a.prefix=s.slice(0,h),u=s.slice(h+1),p="xmlns"===l&&u;else u=s,l=null,p="xmlns"===s&&"";a.localName=u,!1!==p&&(null==o&&(o={},d(r,r={})),r[p]=o[p]=c,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(p,c))}for(i=e.length;i--;)(l=(a=e[i]).prefix)&&("xml"===l&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(a.uri=r[l||""]));var h;(h=n.indexOf(":"))>0?(l=e.prefix=n.slice(0,h),u=e.localName=n.slice(h+1)):(l=null,u=e.localName=n);var m=e.uri=r[l||""];if(t.startElement(m,u,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=o,!0;if(t.endElement(m,u,n),o)for(l in o)t.endPrefixMapping(l)}function u(e,t,r,n,o){if(/^(?:script|textarea)$/i.test(r)){var i=e.indexOf("</"+r+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(r)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,n),o.characters(a,0,a.length),i)}return t+1}function p(e,t,r,n){var o=n[r];return null==o&&((o=e.lastIndexOf("</"+r+">"))<t&&(o=e.lastIndexOf("</"+r)),n[r]=o),o<t}function d(e,t){for(var r in e)t[r]=e[r]}function h(e,t,r,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,o-t-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,o-t-9),r.endCDATA(),o+3}var i=function(e,t){var r,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(o.lastIndex=t,o.exec(e);r=o.exec(e);)if(n.push(r),r[1])return n}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var s=i[1][0],c=!1,l=!1;a>3&&(/^public$/i.test(i[2][0])?(c=i[3][0],l=a>4&&i[4][0]):/^system$/i.test(i[2][0])&&(l=i[3][0]));var u=i[a-1];return r.startDTD(s,c,l),r.endDTD(),u.index+u[0].length}}return-1}function m(e,t,r){var n=e.indexOf("?>",t);if(n){var o=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return o?(o[0].length,r.processingInstruction(o[1],o[2]),n+2):-1}return-1}function f(){this.attributeNames={}}i.prototype=new Error,i.prototype.name=i.name,a.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),d(t,t={}),function(e,t,r,n,o){function a(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function d(t){if(t>E){var r=e.substring(E,t).replace(/&#?\w+;/g,a);w&&g(E),n.characters(r,0,t-E),E=t}}function g(t,r){for(;t>=v&&(r=b.exec(e));)y=r.index,v=y+r[0].length,w.lineNumber++;w.columnNumber=t-y+1}for(var y=0,v=0,b=/.*(?:\r\n?|\n)|.*$/g,w=n.locator,S=[{currentNSMap:t}],P={},E=0;;){try{var D=e.indexOf("<",E);if(D<0){if(!e.substr(E).match(/^\s*$/)){var T=n.doc,x=T.createTextNode(e.substr(E));T.appendChild(x),n.currentElement=x}return}switch(D>E&&d(D),e.charAt(D+1)){case"/":var _=e.indexOf(">",D+3),C=e.substring(D+2,_),j=S.pop();_<0?(C=e.substring(D+2).replace(/[\s<].*/,""),o.error("end tag name: "+C+" is not complete:"+j.tagName),_=D+1+C.length):C.match(/\s</)&&(C=C.replace(/[\s<].*/,""),o.error("end tag name: "+C+" maybe not complete"),_=D+1+C.length);var I=j.localNSMap,N=j.tagName==C;if(N||j.tagName&&j.tagName.toLowerCase()==C.toLowerCase()){if(n.endElement(j.uri,j.localName,C),I)for(var A in I)n.endPrefixMapping(A);N||o.fatalError("end tag name: "+C+" is not match the current start tagName:"+j.tagName)}else S.push(j);_++;break;case"?":w&&g(D),_=m(e,D,n);break;case"!":w&&g(D),_=h(e,D,n,o);break;default:w&&g(D);var R=new f,F=S[S.length-1].currentNSMap,k=(_=c(e,D,R,F,a,o),R.length);if(!R.closed&&p(e,_,R.tagName,P)&&(R.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),w&&k){for(var O=s(w,{}),L=0;L<k;L++){var q=R[L];g(q.offset),q.locator=s(w,{})}n.locator=O,l(R,n,F)&&S.push(R),n.locator=w}else l(R,n,F)&&S.push(R);"http://www.w3.org/1999/xhtml"!==R.uri||R.closed?_++:_=u(e,_,R.tagName,a,n)}}catch(e){if(e instanceof i)throw e;o.error("element parse error: "+e),_=-1}_>E?E=_:d(Math.max(D,E)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},f.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},addValue:function(e,t,r){if(!o.test(e))throw new Error("invalid attribute:"+e);this.attributeNames[e]=this.length,this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},t.XMLReader=a,t.ParseError=i},9602:e=>{"use strict";e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}},4411:(e,t,r)=>{"use strict";function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function o(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function i(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,r,n){if(!(this instanceof a))return new a(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)i(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},n.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},n.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");n=this.head.next,r=this.head.value}for(var o=0;null!==n;o++)r=e(r,n.value,o),n=n.next;return r},n.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");n=this.tail.prev,r=this.tail.value}for(var o=this.length-1;null!==n;o--)r=e(r,n.value,o),n=n.prev;return r},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,i=this.head;null!==i&&o<e;o++)i=i.next;for(;null!==i&&o<t;o++,i=i.next)r.push(i.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,i=this.tail;null!==i&&o>t;o--)i=i.prev;for(;null!==i&&o>e;o--,i=i.prev)r.push(i.value);return r},n.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,o=this.head;null!==o&&n<e;n++)o=o.next;var i,s,c,l,u=[];for(n=0;o&&n<t;n++)u.push(o.value),o=this.removeNode(o);for(null===o&&(o=this.tail),o!==this.head&&o!==this.tail&&(o=o.prev),n=0;n<r.length;n++)i=this,s=o,c=r[n],l=void 0,null===(l=s===i.head?new a(c,null,s,i):new a(c,s,s.next,i)).next&&(i.tail=l),null===l.prev&&(i.head=l),i.length++,o=l;return u},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{r(9602)(n)}catch(e){}},306:e=>{"use strict";e.exports=JSON.parse('{"name":"sql-database-projects","displayName":"SQL Database Projects","description":"Enables users to develop and publish database schemas for MSSQL Databases","version":"0.16.1","publisher":"Microsoft","preview":true,"engines":{"vscode":"^1.30.1","azdata":">=1.36.0"},"license":"https://raw.githubusercontent.com/Microsoft/azuredatastudio/main/LICENSE.txt","icon":"images/sqlDatabaseProjects.png","aiKey":"AIF-37eefaf0-8022-4671-a3fb-64752724682e","activationEvents":["onCommand:sqlDatabaseProjects.new","onCommand:sqlDatabaseProjects.open","onCommand:sqlDatabaseProjects.createProjectFromDatabase","onCommand:sqlDatabaseProjects.updateProjectFromDatabase","onCommand:sqlDatabaseProjects.generateProjectFromOpenApiSpec","workspaceContains:**/*.sqlproj","onView:dataworkspace.views.main"],"main":"./out/extension","repository":{"type":"git","url":"https://github.com/Microsoft/azuredatastudio.git"},"extensionDependencies":["Microsoft.mssql","Microsoft.schema-compare"],"capabilities":{"virtualWorkspaces":false,"untrustedWorkspaces":{"supported":true}},"contributes":{"projects":["sqlproj"],"configuration":[{"title":"%sqlDatabaseProjects.Settings%","properties":{"sqlDatabaseProjects.dotnetSDK Location":{"type":"string","description":"%sqlDatabaseProjects.dotnetInstallLocation%"},"sqlDatabaseProjects.netCoreDoNotAsk":{"type":"boolean","description":"%sqlDatabaseProjects.netCoreDoNotAsk%"},"sqlDatabaseProjects.nodejsDoNotAsk":{"type":"boolean","description":"%sqlDatabaseProjects.nodejsDoNotAsk%"},"sqlDatabaseProjects.autorestSqlVersion":{"type":"string","description":"%sqlDatabaseProjects.autorestSqlVersion%"}}}],"commands":[{"command":"sqlDatabaseProjects.newScript","title":"%sqlDatabaseProjects.newScript%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newPreDeploymentScript","title":"%sqlDatabaseProjects.newPreDeploymentScript%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newPostDeploymentScript","title":"%sqlDatabaseProjects.newPostDeploymentScript%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newTable","title":"%sqlDatabaseProjects.newTable%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newView","title":"%sqlDatabaseProjects.newView%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newExternalStreamingJob","title":"%sqlDatabaseProjects.newExternalStreamingJob%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newStoredProcedure","title":"%sqlDatabaseProjects.newStoredProcedure%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newItem","title":"%sqlDatabaseProjects.newItem%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.addExistingItem","title":"%sqlDatabaseProjects.addExistingItem%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.newFolder","title":"%sqlDatabaseProjects.newFolder%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.delete","title":"%sqlDatabaseProjects.delete%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.exclude","title":"%sqlDatabaseProjects.exclude%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.build","title":"%sqlDatabaseProjects.build%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.publish","title":"%sqlDatabaseProjects.publish%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.properties","title":"%sqlDatabaseProjects.properties%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.schemaCompare","title":"%sqlDatabaseProjects.schemaCompare%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.createProjectFromDatabase","title":"%sqlDatabaseProjects.createProjectFromDatabase%","category":"%sqlDatabaseProjects.displayName%","icon":"images/databaseProjectToolbar.svg"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","title":"%sqlDatabaseProjects.updateProjectFromDatabase%","category":"%sqlDatabaseProjects.displayName%","icon":"images/databaseProjectToolbar.svg"},{"command":"sqlDatabaseProjects.addDatabaseReference","title":"%sqlDatabaseProjects.addDatabaseReference%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.validateExternalStreamingJob","title":"%sqlDatabaseProjects.validateExternalStreamingJob%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.openContainingFolder","title":"%sqlDatabaseProjects.openContainingFolder%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.editProjectFile","title":"%sqlDatabaseProjects.editProjectFile%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.changeTargetPlatform","title":"%sqlDatabaseProjects.changeTargetPlatform%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.generateProjectFromOpenApiSpec","title":"%sqlDatabaseProjects.generateProjectFromOpenApiSpec%","category":"%sqlDatabaseProjects.displayName%"},{"command":"sqlDatabaseProjects.convertToSdkStyleProject","title":"%sqlDatabaseProjects.convertToSdkStyleProject%","category":"%sqlDatabaseProjects.displayName%"}],"menus":{"view/title":[{"command":"sqlDatabaseProjects.createProjectFromDatabase","when":"view == dataworkspace.views.main","group":"1_currentWorkspace@1"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"view == dataworkspace.views.main && azdataAvailable","group":"1_currentWorkspace@2"},{"command":"sqlDatabaseProjects.generateProjectFromOpenApiSpec","when":"view == dataworkspace.views.main","group":"1_currentWorkspace@3"}],"commandPalette":[{"command":"sqlDatabaseProjects.newScript","when":"false"},{"command":"sqlDatabaseProjects.newPreDeploymentScript","when":"false"},{"command":"sqlDatabaseProjects.newPostDeploymentScript","when":"false"},{"command":"sqlDatabaseProjects.newTable","when":"false"},{"command":"sqlDatabaseProjects.newView","when":"false"},{"command":"sqlDatabaseProjects.newExternalStreamingJob","when":"false"},{"command":"sqlDatabaseProjects.newStoredProcedure","when":"false"},{"command":"sqlDatabaseProjects.newItem","when":"false"},{"command":"sqlDatabaseProjects.addExistingItem","when":"false"},{"command":"sqlDatabaseProjects.newFolder","when":"false"},{"command":"sqlDatabaseProjects.delete","when":"false"},{"command":"sqlDatabaseProjects.build","when":"false"},{"command":"sqlDatabaseProjects.publish","when":"false"},{"command":"sqlDatabaseProjects.properties","when":"false"},{"command":"sqlDatabaseProjects.schemaCompare","when":"false"},{"command":"sqlDatabaseProjects.createProjectFromDatabase"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"false"},{"command":"sqlDatabaseProjects.addDatabaseReference","when":"false"},{"command":"sqlDatabaseProjects.validateExternalStreamingJob","when":"false"},{"command":"sqlDatabaseProjects.openContainingFolder","when":"false"},{"command":"sqlDatabaseProjects.editProjectFile","when":"false"},{"command":"sqlDatabaseProjects.exclude","when":"false"},{"command":"sqlDatabaseProjects.changeTargetPlatform","when":"false"},{"command":"sqlDatabaseProjects.convertToSdkStyleProject","when":"false"}],"view/item/context":[{"command":"sqlDatabaseProjects.build","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/","group":"1_dbProjectsFirst@1"},{"command":"sqlDatabaseProjects.publish","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/","group":"1_dbProjectsFirst@2"},{"command":"sqlDatabaseProjects.schemaCompare","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ && azdataAvailable","group":"1_dbProjectsFirst@3"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ && azdataAvailable","group":"1_dbProjectsFirst@4"},{"command":"sqlDatabaseProjects.newItem","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"2_dbProjects_newMain@1"},{"command":"sqlDatabaseProjects.addExistingItem","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"2_dbProjects_newMain@2"},{"command":"sqlDatabaseProjects.newFolder","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"2_dbProjects_newMain@3"},{"command":"sqlDatabaseProjects.newTable","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@1"},{"command":"sqlDatabaseProjects.newView","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@2"},{"command":"sqlDatabaseProjects.newStoredProcedure","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@3"},{"command":"sqlDatabaseProjects.newExternalStreamingJob","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@4"},{"command":"sqlDatabaseProjects.newScript","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@7"},{"command":"sqlDatabaseProjects.newPreDeploymentScript","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@8"},{"command":"sqlDatabaseProjects.newPostDeploymentScript","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/ || viewItem == databaseProject.itemType.folder","group":"3_dbProjects_newItem@9"},{"command":"sqlDatabaseProjects.addDatabaseReference","when":"view == dataworkspace.views.main && viewItem == databaseProject.itemType.referencesRoot","group":"4_dbProjects_addDatabaseReference"},{"command":"sqlDatabaseProjects.validateExternalStreamingJob","when":"view == dataworkspace.views.main && viewItem == databaseProject.itemType.file.externalStreamingJob","group":"5_dbProjects_streamingJob"},{"command":"sqlDatabaseProjects.exclude","when":"view == dataworkspace.views.main && viewItem == databaseProject.itemType.folder || viewItem =~ /^databaseProject.itemType.file/","group":"9_dbProjectsLast@1"},{"command":"sqlDatabaseProjects.delete","when":"view == dataworkspace.views.main && viewItem == databaseProject.itemType.folder || viewItem =~ /^databaseProject.itemType.file/ || viewItem == databaseProject.itemType.reference","group":"9_dbProjectsLast@2"},{"command":"sqlDatabaseProjects.changeTargetPlatform","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/","group":"9_dbProjectsLast@6"},{"command":"sqlDatabaseProjects.editProjectFile","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/","group":"9_dbProjectsLast@7"},{"command":"sqlDatabaseProjects.openContainingFolder","when":"view == dataworkspace.views.main && viewItem =~ /^(databaseProject.itemType.project|databaseProject.itemType.legacyProject)$/","group":"9_dbProjectsLast@8"},{"command":"sqlDatabaseProjects.createProjectFromDatabase","when":"!azdataAvailable && view == objectExplorer && viewItem =~ /^(disconnectedServer|Server|Database)$/","group":"sqldbproj@1"}],"objectExplorer/item/context":[{"command":"sqlDatabaseProjects.createProjectFromDatabase","when":"nodeType =~ /^(Database|Server)$/ && connectionProvider == MSSQL && mssql:engineedition != 11","group":"export@1"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"nodeType =~ /^(Database|Server)$/ && connectionProvider == MSSQL && mssql:engineedition != 11","group":"export@2"}],"dataExplorer/context":[{"command":"sqlDatabaseProjects.createProjectFromDatabase","when":"nodeType =~ /^(Database|Server)$/ && connectionProvider == MSSQL && mssql:engineedition != 11","group":"export@1"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"nodeType =~ /^(Database|Server)$/ && connectionProvider == MSSQL && mssql:engineedition != 11","group":"export@2"}],"dashboard/toolbar":[{"command":"sqlDatabaseProjects.createProjectFromDatabase","when":"connectionProvider == \'MSSQL\' && mssql:engineedition != 11"},{"command":"sqlDatabaseProjects.updateProjectFromDatabase","when":"connectionProvider == \'MSSQL\' && mssql:engineedition != 11"}]}},"dependencies":{"@microsoft/ads-extension-telemetry":"^1.1.5","fast-glob":"^3.2.7","fs-extra":"^5.0.0","promisify-child-process":"^3.1.1","semver":"^7.3.5","vscode-languageclient":"^5.3.0-next.1","vscode-nls":"^4.1.2","which":"^2.0.2","xml-formatter":"^2.1.0","xmldom":"^0.6.0"},"devDependencies":{"@types/fs-extra":"^5.0.0","@types/mocha":"^5.2.5","@types/sinon":"^9.0.4","@types/which":"^2.0.1","@types/xml-formatter":"^1.1.0","@types/xmldom":"^0.1.29","mocha":"^5.2.0","mocha-junit-reporter":"^1.17.0","mocha-multi-reporters":"^1.1.7","should":"^13.2.1","sinon":"^9.0.2","typemoq":"^2.1.0","@microsoft/vscodetestcover":"^1.2.0"},"__metadata":{"id":"70","publisherDisplayName":"Microsoft","publisherId":"Microsoft"}}')},6078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.vscodeOpenCommand=t.schemaCompareRunComparisonCommand=t.schemaCompareStartCommand=t.revealFileInOsCommand=t.at=t.msec=t.sec=t.min=t.hr=t.InProgress=t.Failed=t.Success=t.PublishHistory=t.BuildHistory=t.TargetDatabase=t.TargetServer=t.TargetPlatform=t.Date=t.Time=t.Status=t.changeTargetPlatformAction=t.publishAction=t.buildAction=t.schemaCompareAction=t.addItemAction=t.emptyAzureDbProjectTypeDescription=t.emptyAzureDbProjectTypeDisplayName=t.emptyAzureDbSqlDatabaseProjectTypeId=t.emptySdkProjectTypeDescription=t.emptySdkProjectTypeDisplayName=t.emptySqlDatabaseSdkProjectTypeId=t.edgeProjectTypeDescription=t.edgeProjectTypeDisplayName=t.edgeSqlDatabaseProjectTypeId=t.emptyProjectTypeDescription=t.emptyProjectTypeDisplayName=t.emptySqlDatabaseProjectTypeId=t.sqlProjectSdkVersion=t.sqlProjectSdk=t.databaseSchemaProvider=t.MicrosoftDatatoolsSchemaSqlSql=t.msdbDacpac=t.msdb=t.masterDacpac=t.master=t.schemaCompareExtensionId=t.openApiSpecFileExtensions=t.sqlFileExtension=t.sqlprojExtension=t.dataSourcesFileName=void 0,t.selectConnection=t.profile=t.loadSqlCmdVarsButtonTitle=t.sqlCmdValueColumn=t.sqlCmdVariableColumn=t.sqlCmdVariables=t.profileReadError=t.loadProfilePlaceholderText=t.noDataSourcesText=t.dataSourceDropdownTitle=t.connectionRadioButtonLabel=t.dataSourceRadioButtonLabel=t.targetConnectionLabel=t.databaseNameLabel=t.generateScriptButtonText=t.cancelButtonText=t.publish=t.publishDialogName=t.updatedToSdkStyleError=t.convertToSdkStyleConfirmation=t.projectUpdatedToSdkStyle=t.currentTargetPlatform=t.selectTargetPlatform=t.deleteReferenceConfirmation=t.deleteConfirmationContents=t.deleteConfirmation=t.newObjectNamePrompt=t.sdkLearnMoreUrl=t.learnMore=t.reloadProject=t.location=t.defaultProjectNameStarter=t.schemaObjectType=t.schema=t.objectType=t.flat=t.file=t.publishSettingsFiles=t.dacpacFiles=t.selectFileString=t.selectString=t.okString=t.noStringDefault=t.noString=t.openEulaString=t.yesString=t.sqlConnectionStringFriendly=t.databaseReferencesNodeName=t.dataSourcesNodeName=t.refreshDataWorkspaceCommand=void 0,t.mssqlFolderName=t.commandsFolderName=t.azureSqlEdgeDockerRepository=t.sqlServerDockerRepository=t.sqlServerDockerRegistry=t.connectionNamePrefix=t.sqlServerEdgeEulaLink=t.sqlServerEulaLink=t.edgeEulaAgreementTitle=t.eulaAgreementTitle=t.eulaAgreementText=t.eulaAgreementTemplate=t.dockerImageNamePrefix=t.dockerImageLabelPrefix=t.valueCannotBeEmpty=t.portMustBeNumber=t.passwordNotMatch=t.invalidSQLPasswordMessage=t.selectBaseImage=t.confirmPassword=t.enterPassword=t.enterConnectionStringTemplate=t.enterConnectionStringEnvName=t.publishTo=t.baseDockerImage=t.confirmServerPassword=t.serverPassword=t.serverPortNumber=t.enterPortNumber=t.publishToDockerContainer=t.publishToExistingServer=t.selectPublishOption=t.AzureSqlServerName=t.SqlServerName=t.nameMustNotBeEmpty=t.done=t.selectDatabase=t.newText=t.enterNewDatabaseName=t.createNew=t.resetAllVars=t.enterNewValueForVar=t.chooseSqlcmdVarsToModify=t.chooseAction=t.browseForProfileWithIcon=t.dontUseProfile=t.selectProfile=t.selectProfileToUse=t.defaultUser=t.server=void 0,t.locationDropdownValues=t.systemDbLocationDropdownValues=t.differentDbDifferentServer=t.differentDbSameServer=t.sameDatabase=t.selectDacpac=t.dacpacText=t.systemDatabase=t.projectLabel=t.referenceRadioButtonsGroupTitle=t.addDatabaseReferenceOkButtonText=t.addDatabaseReferenceDialogName=t.retryMessage=t.retryFailedMessage=t.retrySucceedMessage=t.retryRunMessage=t.retryWaitMessage=t.dockerLogMessage=t.dockerContainerCreatedMessage=t.connectionFailedError=t.deployAppSettingUpdating=t.deployAppSettingUpdateFailed=t.publishToContainerFailed=t.taskFailedError=t.checkoutOutputMessage=t.containerAlreadyExistForProject=t.deployProjectFailedMessage=t.connectingToSqlServerMessage=t.dockerContainerFailedToRunErrorMessage=t.dockerContainerNotRunningErrorMessage=t.dockerNotRunningError=t.runningDockerMessage=t.creatingDeploymentSettingsMessage=t.dockerImageEulaMessage=t.dockerImageMessage=t.cleaningDockerImagesMessage=t.publishingProjectMessage=t.publishProjectSucceed=t.deployDbTaskName=t.enterConnectionStringEnvNameDescription=t.appSettingPrompt=t.enterConnStringTemplateDescription=t.azureFunctionLocalSettingsFileName=t.defaultConnectionStringTemplate=t.defaultConnectionStringEnvVarName=t.defaultLocalServerAdminName=t.defaultLocalServerName=t.defaultPortNumber=t.startCommandName=t.dockerFileName=void 0,t.noDataSourcesFile=t.noSqlProjFiles=t.multipleSqlProjFiles=t.compareErrorMessage=t.updatingProjectFromDatabase=t.applyError=t.equalComparison=t.applySuccess=t.applyConfirmation=t.actionLabel=t.updateActionRadioButtonLabel=t.compareActionRadioButtonLabel=t.updateAction=t.projectToUpdatePlaceholderText=t.noSchemaCompareExtension=t.noSqlProjFile=t.updateText=t.updateProjectFromDatabaseDialogName=t.ProjectDirectoryAlreadyExistError=t.ProjectParentDirectoryNotExistError=t.sdkStyleProject=t.selectProjectLocation=t.browseEllipsisWithIcon=t.WorkspaceFileExtension=t.folderStructureLabel=t.selectFolderStructure=t.browseButtonText=t.projectLocationPlaceholderText=t.projectLocationLabel=t.projectNamePlaceholderText=t.projectNameLabel=t.createProjectSettings=t.targetProject=t.sourceDatabase=t.createProjectDialogOkButtonText=t.createProjectFromDatabaseDialogName=t.referenceType=t.dacpacNotOnSameDrive=t.databaseProject=t.otherSeverVariable=t.otherServer=t.databaseNameServerNameVariableRequired=t.databaseNameRequiredVariableOptional=t.enterSystemDbName=t.exampleUsage=t.suppressMissingDependenciesErrors=t.serverVariable=t.serverName=t.databaseVariable=t.databaseName=void 0,t.excludeAction=t.deleteAction=t.errorReadingProject=t.invalidTargetPlatform=t.invalidGuid=t.unableToFindDatabaseReference=t.unableToFindSqlCmdVariable=t.cantAddCircularProjectReference=t.notValidVariableName=t.deployScriptExists=t.unableToFindObject=t.unableToPerformAction=t.unexpectedProjectContext=t.projBuildFailed=t.errorFindingBuildFilesLocation=t.circularProjectReference=t.unableToCreatePublishConnection=t.invalidProjectPropertyValue=t.invalidInput=t.folderAlreadyExistsChooseNewLocation=t.folderAlreadyExists=t.fileAlreadyExists=t.cannotResolvePath=t.fileOrFolderDoesNotExist=t.noFileExist=t.projectAlreadyExists=t.projectAlreadyOpened=t.externalStreamingJobValidationPassed=t.invalidProjectReload=t.prePostDeployCount=t.parentTreeItemUnknown=t.outsideFolderPath=t.databaseReferenceAlreadyExists=t.databaseSelectionRequired=t.invalidDatabaseReference=t.invalidDataSchemaProvider=t.databaseNameRequired=t.databaseLocationRequired=t.dacpacFileLocationRequired=t.systemDatabaseReferenceRequired=t.databaseReferenceTypeRequired=t.updateProjectDatabaseReferencesForRoundTrip=t.updateProjectForRoundTrip=t.buildFailedCannotStartSchemaCompare=t.schemaCompareNotInstalled=t.extractTargetRequired=t.invalidSqlConnectionString=t.unknownDataSourceType=t.unrecognizedDataSourcesVersion=t.missingVersion=void 0,t.PostDeploy=t.PreDeploy=t.TargetConnectionString=t.ProjectReference=t.RelativeOuterPath=t.Properties=t.DSP=t.ServerSqlCmdVariable=t.DatabaseSqlCmdVariable=t.DatabaseVariableLiteralValue=t.SuppressMissingDependenciesErrors=t.ArtifactReference=t.Value=t.DefaultValue=t.SqlCmdVariable=t.PrivateAssets=t.Version=t.PackageReference=t.Files=t.Delete=t.BeforeBuildTarget=t.Name=t.Target=t.Condition=t.Project=t.Import=t.Remove=t.Include=t.Folder=t.Build=t.ItemGroup=t.DoNotAskAgain=t.Install=t.projectsOutputChannel=t.UpdateDotnetLocation=t.NetCoreSupportedVersionInstallationConfirmation=t.DotnetInstallationConfirmation=t.postDeployScriptFriendlyName=t.preDeployScriptFriendlyName=t.externalStreamingJobFriendlyName=t.externalStreamFriendlyName=t.fileFormatFriendlyName=t.dataSourceFriendlyName=t.storedProcedureFriendlyName=t.viewFriendlyName=t.tableFriendlyName=t.scriptFriendlyName=t.folderFriendlyName=t.folderObject=t.fileObject=void 0,t.nodeButNotAutorestFound=t.autorestPostDeploymentScriptName=t.DatabaseProjectItemType=t.sqlAuth=t.azureMfaAuth=t.integratedAuth=t.passwordSetting=t.userIdSetting=t.activeDirectoryInteractive=t.authenticationSetting=t.integratedSecuritySetting=t.dataSourceSetting=t.initialCatalogSetting=t.targetConnectionString=t.targetDatabaseName=t.SqlProjPathSeparator=t.All=t.VersionNumber=t.NETFrameworkAssembly=t.ProjJsonToClean=t.DacpacRootPath=t.RoundTripSqlDbNotPresentCondition=t.RoundTripSqlDbPresentCondition=t.SqlDbNotPresentCondition=t.SqlDbPresentCondition=t.NotNetCoreCondition=t.NetCoreCondition=t.MsBuildtargets=t.SqlDbTargets=t.NetCoreTargets=t.DefaultCollation=t.DefaultCollationProperty=t.DacpacReferenceElement=t.ProjectReferenceElement=t.ProjectReferenceNameElement=t.ImportElements=t.NoneElements=t.PostDeployElements=t.PreDeployElements=t.FolderElements=t.BuildElements=t.Sdk=t.ExternalStreamingJob=t.Type=t.PropertyGroup=t.ProjectGuid=t.Private=t.False=t.True=t.None=void 0,t.PublishTargetType=t.getTargetPlatformFromVersion=t.defaultDSP=t.defaultTargetPlatform=t.AzureDwFolder=t.targetPlatformToVersion=t.differentDbDifferentServerExampleUsage=t.differentDbSameServerExampleUsage=t.sameDatabaseExampleUsage=t.systemDbs=t.generatingProjectFromAutorest=t.autorestProjectName=t.specSelectionText=t.multipleMostDeploymentScripts=t.noSqlFilesGenerated=t.generatingProjectFailed=t.selectSpecFile=t.runViaNpx=t.installGlobally=t.userSelectionCancelled=t.userSelectionRunNpx=t.userSelectionInstallGlobally=t.nodeButNotAutorestFoundPrompt=t.nodeNotFound=void 0;const n=r(3403),o=r(1027),i=n.loadMessageBundle(r(5622).join(__dirname,"common/constants.ts"));var a,s;t.dataSourcesFileName="datasources.json",t.sqlprojExtension=".sqlproj",t.sqlFileExtension=".sql",t.openApiSpecFileExtensions=["yaml","yml","json"],t.schemaCompareExtensionId="microsoft.schema-compare",t.master="master",t.masterDacpac="master.dacpac",t.msdb="msdb",t.msdbDacpac="msdb.dacpac",t.MicrosoftDatatoolsSchemaSqlSql="Microsoft.Data.Tools.Schema.Sql.Sql",t.databaseSchemaProvider="DatabaseSchemaProvider",t.sqlProjectSdk="Microsoft.Build.Sql",t.sqlProjectSdkVersion="0.1.3-preview",t.emptySqlDatabaseProjectTypeId="EmptySqlDbProj",t.emptyProjectTypeDisplayName=i(0,null),t.emptyProjectTypeDescription=i(1,null),t.edgeSqlDatabaseProjectTypeId="SqlDbEdgeProj",t.edgeProjectTypeDisplayName=i(2,null),t.edgeProjectTypeDescription=i(3,null),t.emptySqlDatabaseSdkProjectTypeId="EmptySqlDbSdkProj",t.emptySdkProjectTypeDisplayName=i(4,null),t.emptySdkProjectTypeDescription=i(5,null),t.emptyAzureDbSqlDatabaseProjectTypeId="EmptyAzureSqlDbProj",t.emptyAzureDbProjectTypeDisplayName=i(6,null),t.emptyAzureDbProjectTypeDescription=i(7,null),t.addItemAction=i(8,null),t.schemaCompareAction=i(9,null),t.buildAction=i(10,null),t.publishAction=i(11,null),t.changeTargetPlatformAction=i(12,null),t.Status=i(13,null),t.Time=i(14,null),t.Date=i(15,null),t.TargetPlatform=i(16,null),t.TargetServer=i(17,null),t.TargetDatabase=i(18,null),t.BuildHistory=i(19,null),t.PublishHistory=i(20,null),t.Success=i(21,null),t.Failed=i(22,null),t.InProgress=i(23,null),t.hr=i(24,null),t.min=i(25,null),t.sec=i(26,null),t.msec=i(27,null),t.at=i(28,null),t.revealFileInOsCommand="revealFileInOS",t.schemaCompareStartCommand="schemaCompare.start",t.schemaCompareRunComparisonCommand="schemaCompare.runComparison",t.vscodeOpenCommand="vscode.open",t.refreshDataWorkspaceCommand="dataworkspace.refresh",t.dataSourcesNodeName=i(29,null),t.databaseReferencesNodeName=i(30,null),t.sqlConnectionStringFriendly=i(31,null),t.yesString=i(32,null),t.openEulaString=i(33,null),t.noString=i(34,null),t.noStringDefault=i(35,null),t.okString=i(36,null),t.selectString=i(37,null),t.selectFileString=i(38,null),t.dacpacFiles=i(39,null),t.publishSettingsFiles=i(40,null),t.file=i(41,null),t.flat=i(42,null),t.objectType=i(43,null),t.schema=i(44,null),t.schemaObjectType=i(45,null),t.defaultProjectNameStarter=i(46,null),t.location=i(47,null),t.reloadProject=i(48,null),t.learnMore=i(49,null),t.sdkLearnMoreUrl="https://aka.ms/sqlprojsdk",t.newObjectNamePrompt=function(e){return i(50,null,e)},t.deleteConfirmation=function(e){return i(51,null,e)},t.deleteConfirmationContents=function(e){return i(52,null,e)},t.deleteReferenceConfirmation=function(e){return i(53,null,e)},t.selectTargetPlatform=function(e){return i(54,null,e)},t.currentTargetPlatform=function(e,t){return i(55,null,e,t)},t.projectUpdatedToSdkStyle=function(e){return i(56,null,e)},t.convertToSdkStyleConfirmation=function(e){return i(57,null,e)},t.updatedToSdkStyleError=function(e){return i(58,null,e)},t.publishDialogName=i(59,null),t.publish=i(60,null),t.cancelButtonText=i(61,null),t.generateScriptButtonText=i(62,null),t.databaseNameLabel=i(63,null),t.targetConnectionLabel=i(64,null),t.dataSourceRadioButtonLabel=i(65,null),t.connectionRadioButtonLabel=i(66,null),t.dataSourceDropdownTitle=i(67,null),t.noDataSourcesText=i(68,null),t.loadProfilePlaceholderText=i(69,null),t.profileReadError=e=>i(70,null,o.getErrorMessage(e)),t.sqlCmdVariables=i(71,null),t.sqlCmdVariableColumn=i(72,null),t.sqlCmdValueColumn=i(73,null),t.loadSqlCmdVarsButtonTitle=i(74,null),t.profile=i(75,null),t.selectConnection=i(76,null),t.server=i(77,null),t.defaultUser=i(78,null),t.selectProfileToUse=i(79,null),t.selectProfile=i(80,null),t.dontUseProfile=i(81,null),t.browseForProfileWithIcon=`$(folder) ${i(82,null)}`,t.chooseAction=i(83,null),t.chooseSqlcmdVarsToModify=i(84,null),t.enterNewValueForVar=e=>i(85,null,e),t.resetAllVars=i(86,null),t.createNew=i(87,null),t.enterNewDatabaseName=i(88,null),t.newText=i(89,null),t.selectDatabase=i(90,null),t.done=i(91,null),t.nameMustNotBeEmpty=i(92,null),t.SqlServerName="SQL server",t.AzureSqlServerName="Azure SQL server",t.selectPublishOption=i(93,null),t.publishToExistingServer=function(e){return i(94,null,e)},t.publishToDockerContainer=function(e){return i(95,null,e)},t.enterPortNumber=function(e){return i(96,null,e)},t.serverPortNumber=function(e){return i(97,null,e)},t.serverPassword=function(e){return i(98,null,e)},t.confirmServerPassword=function(e){return i(99,null,e)},t.baseDockerImage=function(e){return i(100,null,e)},t.publishTo=i(101,null),t.enterConnectionStringEnvName=i(102,null),t.enterConnectionStringTemplate=i(103,null),t.enterPassword=function(e){return i(104,null,e)},t.confirmPassword=function(e){return i(105,null,e)},t.selectBaseImage=function(e){return i(106,null,e)},t.invalidSQLPasswordMessage=function(e){return i(107,null,e)},t.passwordNotMatch=function(e){return i(108,null,e)},t.portMustBeNumber=i(109,null),t.valueCannotBeEmpty=i(110,null),t.dockerImageLabelPrefix="source=sqldbproject",t.dockerImageNamePrefix="sqldbproject",t.eulaAgreementTemplate=i(111,null),t.eulaAgreementText=function(e){return i(112,null,e)},t.eulaAgreementTitle=i(113,null),t.edgeEulaAgreementTitle=i(114,null),t.sqlServerEulaLink="https://go.microsoft.com/fwlink/?linkid=857698",t.sqlServerEdgeEulaLink="https://go.microsoft.com/fwlink/?linkid=2139274",t.connectionNamePrefix="SQLDbProject",t.sqlServerDockerRegistry="mcr.microsoft.com",t.sqlServerDockerRepository="mssql/server",t.azureSqlEdgeDockerRepository="azure-sql-edge",t.commandsFolderName="commands",t.mssqlFolderName=".mssql",t.dockerFileName="Dockerfile",t.startCommandName="start.sh",t.defaultPortNumber="1433",t.defaultLocalServerName="localhost",t.defaultLocalServerAdminName="sa",t.defaultConnectionStringEnvVarName="SQLConnectionString",t.defaultConnectionStringTemplate="Data Source=@@SERVER@@,@@PORT@@;Initial Catalog=@@DATABASE@@;User id=@@USER@@;Password=@@SA_PASSWORD@@;",t.azureFunctionLocalSettingsFileName="local.settings.json",t.enterConnStringTemplateDescription=i(115,null),t.appSettingPrompt=i(116,null),t.enterConnectionStringEnvNameDescription=i(117,null),t.deployDbTaskName=i(118,null),t.publishProjectSucceed=i(119,null),t.publishingProjectMessage=i(120,null),t.cleaningDockerImagesMessage=i(121,null),t.dockerImageMessage=i(122,null),t.dockerImageEulaMessage=i(123,null),t.creatingDeploymentSettingsMessage=i(124,null),t.runningDockerMessage=i(125,null),t.dockerNotRunningError=function(e){return i(126,null,e||"")},t.dockerContainerNotRunningErrorMessage=i(127,null),t.dockerContainerFailedToRunErrorMessage=i(128,null),t.connectingToSqlServerMessage=i(129,null),t.deployProjectFailedMessage=i(130,null),t.containerAlreadyExistForProject=i(131,null),t.checkoutOutputMessage=i(132,null),t.taskFailedError=function(e,t){return i(133,null,e,t)},t.publishToContainerFailed=function(e){return i(134,null,e)},t.deployAppSettingUpdateFailed=function(e){return i(135,null,e)},t.deployAppSettingUpdating=function(e){return i(136,null,e)},t.connectionFailedError=function(e){return i(137,null,e)},t.dockerContainerCreatedMessage=function(e){return i(138,null,e)},t.dockerLogMessage=function(e){return i(139,null,e)},t.retryWaitMessage=function(e,t){return i(140,null,e,t)},t.retryRunMessage=function(e,t,r){return i(141,null,e,t,r)},t.retrySucceedMessage=function(e,t){return i(142,null,e,t)},t.retryFailedMessage=function(e,t,r){return i(143,null,e,t,r)},t.retryMessage=function(e,t){return i(144,null,e,t||"")},t.addDatabaseReferenceDialogName=i(145,null),t.addDatabaseReferenceOkButtonText=i(146,null),t.referenceRadioButtonsGroupTitle=i(147,null),t.projectLabel=i(148,null),t.systemDatabase=i(149,null),t.dacpacText=i(150,null),t.selectDacpac=i(151,null),t.sameDatabase=i(152,null),t.differentDbSameServer=i(153,null),t.differentDbDifferentServer=i(154,null),t.systemDbLocationDropdownValues=[t.differentDbSameServer],t.locationDropdownValues=[t.sameDatabase,t.differentDbSameServer,t.differentDbDifferentServer],t.databaseName=i(155,null),t.databaseVariable=i(156,null),t.serverName=i(157,null),t.serverVariable=i(158,null),t.suppressMissingDependenciesErrors=i(159,null),t.exampleUsage=i(160,null),t.enterSystemDbName=i(161,null),t.databaseNameRequiredVariableOptional=i(162,null),t.databaseNameServerNameVariableRequired=i(163,null),t.otherServer="OtherServer",t.otherSeverVariable="OtherServer",t.databaseProject=i(164,null),t.dacpacNotOnSameDrive=e=>i(165,null,e),t.referenceType=i(166,null),t.createProjectFromDatabaseDialogName=i(167,null),t.createProjectDialogOkButtonText=i(168,null),t.sourceDatabase=i(169,null),t.targetProject=i(170,null),t.createProjectSettings=i(171,null),t.projectNameLabel=i(172,null),t.projectNamePlaceholderText=i(173,null),t.projectLocationLabel=i(174,null),t.projectLocationPlaceholderText=i(175,null),t.browseButtonText=i(176,null),t.selectFolderStructure=i(177,null),t.folderStructureLabel=i(178,null),t.WorkspaceFileExtension=".code-workspace",t.browseEllipsisWithIcon=`$(folder) ${i(179,null)}`,t.selectProjectLocation=i(180,null),t.sdkStyleProject=i(181,null),t.ProjectParentDirectoryNotExistError=e=>i(182,null,e),t.ProjectDirectoryAlreadyExistError=(e,t)=>i(183,null,e,t),t.updateProjectFromDatabaseDialogName=i(184,null),t.updateText=i(185,null),t.noSqlProjFile=i(186,null),t.noSchemaCompareExtension=i(187,null),t.projectToUpdatePlaceholderText=i(188,null),t.updateAction=i(189,null),t.compareActionRadioButtonLabel=i(190,null),t.updateActionRadioButtonLabel=i(191,null),t.actionLabel=i(192,null),t.applyConfirmation=i(193,null),t.applySuccess=i(194,null),t.equalComparison=i(195,null),t.applyError=function(e){return i(196,null,e)},t.updatingProjectFromDatabase=function(e,t){return i(197,null,e,t)},t.compareErrorMessage=function(e){return i(198,null,e||"Unknown")},t.multipleSqlProjFiles=i(199,null),t.noSqlProjFiles=i(200,null),t.noDataSourcesFile=i(201,null,t.dataSourcesFileName),t.missingVersion=i(202,null,t.dataSourcesFileName),t.unrecognizedDataSourcesVersion=i(203,null),t.unknownDataSourceType=i(204,null),t.invalidSqlConnectionString=i(205,null),t.extractTargetRequired=i(206,null),t.schemaCompareNotInstalled=i(207,null),t.buildFailedCannotStartSchemaCompare=i(208,null),t.updateProjectForRoundTrip=function(e){return i(209,null,e)},t.updateProjectDatabaseReferencesForRoundTrip=function(e){return i(210,null,e)},t.databaseReferenceTypeRequired=i(211,null),t.systemDatabaseReferenceRequired=i(212,null),t.dacpacFileLocationRequired=i(213,null),t.databaseLocationRequired=i(214,null),t.databaseNameRequired=i(215,null),t.invalidDataSchemaProvider=i(216,null),t.invalidDatabaseReference=i(217,null),t.databaseSelectionRequired=i(218,null),t.databaseReferenceAlreadyExists=i(219,null),t.outsideFolderPath=i(220,null),t.parentTreeItemUnknown=i(221,null),t.prePostDeployCount=i(222,null),t.invalidProjectReload=i(223,null),t.externalStreamingJobValidationPassed=i(224,null),t.projectAlreadyOpened=function(e){return i(225,null,e)},t.projectAlreadyExists=function(e,t){return i(226,null,e,t)},t.noFileExist=function(e){return i(227,null,e)},t.fileOrFolderDoesNotExist=function(e){return i(228,null,e)},t.cannotResolvePath=function(e){return i(229,null,e)},t.fileAlreadyExists=function(e){return i(230,null,e)},t.folderAlreadyExists=function(e){return i(231,null,e)},t.folderAlreadyExistsChooseNewLocation=function(e){return i(232,null,e)},t.invalidInput=function(e){return i(233,null,e)},t.invalidProjectPropertyValue=function(e){return i(234,null,e)},t.unableToCreatePublishConnection=function(e){return i(235,null,e)},t.circularProjectReference=function(e,t){return i(236,null,e,t)},t.errorFindingBuildFilesLocation=function(e){return i(237,null,o.getErrorMessage(e))},t.projBuildFailed=function(e){return i(238,null,e)},t.unexpectedProjectContext=function(e){return i(239,null,e)},t.unableToPerformAction=function(e,t){return i(240,null,e,t)},t.unableToFindObject=function(e,t){return i(241,null,e,t)},t.deployScriptExists=function(e){return i(242,null,e)},t.notValidVariableName=function(e){return i(243,null,e)},t.cantAddCircularProjectReference=function(e){return i(244,null,e)},t.unableToFindSqlCmdVariable=function(e){return i(245,null,e)},t.unableToFindDatabaseReference=function(e){return i(246,null,e)},t.invalidGuid=function(e){return i(247,null,e)},t.invalidTargetPlatform=function(e,t){return i(248,null,e,t.toString())},t.errorReadingProject=function(e,t){return i(249,null,e,t)},t.deleteAction=i(250,null),t.excludeAction=i(251,null),t.fileObject=i(252,null),t.folderObject=i(253,null),t.folderFriendlyName=i(254,null),t.scriptFriendlyName=i(255,null),t.tableFriendlyName=i(256,null),t.viewFriendlyName=i(257,null),t.storedProcedureFriendlyName=i(258,null),t.dataSourceFriendlyName=i(259,null),t.fileFormatFriendlyName=i(260,null),t.externalStreamFriendlyName=i(261,null),t.externalStreamingJobFriendlyName=i(262,null),t.preDeployScriptFriendlyName=i(263,null),t.postDeployScriptFriendlyName=i(264,null),t.DotnetInstallationConfirmation=i(265,null),t.NetCoreSupportedVersionInstallationConfirmation=function(e){return i(266,null,e)},t.UpdateDotnetLocation=i(267,null),t.projectsOutputChannel=i(268,null),t.Install=i(269,null),t.DoNotAskAgain=i(270,null),t.ItemGroup="ItemGroup",t.Build="Build",t.Folder="Folder",t.Include="Include",t.Remove="Remove",t.Import="Import",t.Project="Project",t.Condition="Condition",t.Target="Target",t.Name="Name",t.BeforeBuildTarget="BeforeBuild",t.Delete="Delete",t.Files="Files",t.PackageReference="PackageReference",t.Version="Version",t.PrivateAssets="PrivateAssets",t.SqlCmdVariable="SqlCmdVariable",t.DefaultValue="DefaultValue",t.Value="Value",t.ArtifactReference="ArtifactReference",t.SuppressMissingDependenciesErrors="SuppressMissingDependenciesErrors",t.DatabaseVariableLiteralValue="DatabaseVariableLiteralValue",t.DatabaseSqlCmdVariable="DatabaseSqlCmdVariable",t.ServerSqlCmdVariable="ServerSqlCmdVariable",t.DSP="DSP",t.Properties="Properties",t.RelativeOuterPath="..",t.ProjectReference="ProjectReference",t.TargetConnectionString="TargetConnectionString",t.PreDeploy="PreDeploy",t.PostDeploy="PostDeploy",t.None="None",t.True="True",t.False="False",t.Private="Private",t.ProjectGuid="ProjectGuid",t.PropertyGroup="PropertyGroup",t.Type="Type",t.ExternalStreamingJob="ExternalStreamingJob",t.Sdk="Sdk",t.BuildElements=i(271,null),t.FolderElements=i(272,null),t.PreDeployElements=i(273,null),t.PostDeployElements=i(274,null),t.NoneElements=i(275,null),t.ImportElements=i(276,null),t.ProjectReferenceNameElement=i(277,null),t.ProjectReferenceElement=i(278,null),t.DacpacReferenceElement=i(279,null),t.DefaultCollationProperty="DefaultCollation",t.DefaultCollation="SQL_Latin1_General_CP1_CI_AS",t.NetCoreTargets="$(NETCoreTargetsPath)\\Microsoft.Data.Tools.Schema.SqlTasks.targets",t.SqlDbTargets="$(SQLDBExtensionsRefPath)\\Microsoft.Data.Tools.Schema.SqlTasks.targets",t.MsBuildtargets="$(MSBuildExtensionsPath)\\Microsoft\\VisualStudio\\v$(VisualStudioVersion)\\SSDT\\Microsoft.Data.Tools.Schema.SqlTasks.targets",t.NetCoreCondition="'$(NetCoreBuild)' == 'true'",t.NotNetCoreCondition="'$(NetCoreBuild)' != 'true'",t.SqlDbPresentCondition="'$(SQLDBExtensionsRefPath)' != ''",t.SqlDbNotPresentCondition="'$(SQLDBExtensionsRefPath)' == ''",t.RoundTripSqlDbPresentCondition="'$(NetCoreBuild)' != 'true' AND '$(SQLDBExtensionsRefPath)' != ''",t.RoundTripSqlDbNotPresentCondition="'$(NetCoreBuild)' != 'true' AND '$(SQLDBExtensionsRefPath)' == ''",t.DacpacRootPath="$(DacPacRootPath)",t.ProjJsonToClean="$(BaseIntermediateOutputPath)\\project.assets.json",t.NETFrameworkAssembly="Microsoft.NETFramework.ReferenceAssemblies",t.VersionNumber="1.0.0",t.All="All",t.SqlProjPathSeparator="\\",t.targetDatabaseName="TargetDatabaseName",t.targetConnectionString="TargetConnectionString",t.initialCatalogSetting="Initial Catalog",t.dataSourceSetting="Data Source",t.integratedSecuritySetting="Integrated Security",t.authenticationSetting="Authentication",t.activeDirectoryInteractive="active directory interactive",t.userIdSetting="User ID",t.passwordSetting="Password",t.integratedAuth="Integrated",t.azureMfaAuth="AzureMFA",t.sqlAuth="SqlAuth",(s=t.DatabaseProjectItemType||(t.DatabaseProjectItemType={})).project="databaseProject.itemType.project",s.legacyProject="databaseProject.itemType.legacyProject",s.folder="databaseProject.itemType.folder",s.file="databaseProject.itemType.file",s.externalStreamingJob="databaseProject.itemType.file.externalStreamingJob",s.referencesRoot="databaseProject.itemType.referencesRoot",s.reference="databaseProject.itemType.reference",s.dataSourceRoot="databaseProject.itemType.dataSourceRoot",t.autorestPostDeploymentScriptName="PostDeploymentScript.sql",t.nodeButNotAutorestFound=i(280,null),t.nodeNotFound=i(281,null),t.nodeButNotAutorestFoundPrompt=i(282,null),t.userSelectionInstallGlobally=i(283,null),t.userSelectionRunNpx=i(284,null),t.userSelectionCancelled=i(285,null),t.installGlobally=i(286,null),t.runViaNpx=i(287,null),t.selectSpecFile=i(288,null),t.generatingProjectFailed=function(e){return i(289,null,e)},t.noSqlFilesGenerated=i(290,null),t.multipleMostDeploymentScripts=function(e){return i(291,null,t.autorestPostDeploymentScriptName,e)},t.specSelectionText=i(292,null),t.autorestProjectName=i(293,null),t.generatingProjectFromAutorest=function(e){return i(294,null,e)},t.systemDbs=["master","msdb","tempdb","model"],t.sameDatabaseExampleUsage="SELECT * FROM [Schema1].[Table1]",t.differentDbSameServerExampleUsage=function(e){return`SELECT * FROM [${e}].[Schema1].[Table1]`},t.differentDbDifferentServerExampleUsage=function(e,t){return`SELECT * FROM [${e}].[${t}].[Schema1].[Table1]`},t.targetPlatformToVersion=new Map([["SQL Server 2012","110"],["SQL Server 2014","120"],["SQL Server 2016","130"],["SQL Server 2017","140"],["SQL Server 2019","150"],["Azure SQL Database","AzureV12"],["Azure Synapse Dedicated SQL Pool","Dw"]]),t.AzureDwFolder="AzureDw",t.defaultTargetPlatform="SQL Server 2019",t.defaultDSP=t.targetPlatformToVersion.get(t.defaultTargetPlatform),t.getTargetPlatformFromVersion=function(e){return Array.from(t.targetPlatformToVersion.keys()).filter((r=>t.targetPlatformToVersion.get(r)===e))[0]},(a=t.PublishTargetType||(t.PublishTargetType={})).existingServer="existingServer",a.docker="docker"},5894:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconPathHelper=void 0;class r{static setExtensionContext(e){r.extensionContext=e,r.databaseProject=r.makeIcon("databaseProject"),r.colorfulSqlProject=r.makeIcon("colorfulSqlProject",!0),r.sqlEdgeProject=r.makeIcon("sqlEdgeProject",!0),r.azureSqlDbProject=r.makeIcon("azure",!0),r.dataSourceGroup=r.makeIcon("dataSourceGroup"),r.dataSourceSql=r.makeIcon("dataSource-sql"),r.referenceGroup=r.makeIcon("referenceGroup"),r.referenceDatabase=r.makeIcon("reference-database"),r.refresh=r.makeIcon("refresh",!0),r.folder_blue=r.makeIcon("folder_blue",!0),r.selectConnection=r.makeIcon("selectConnection",!0),r.connect=r.makeIcon("connect",!0),r.folder=r.makeIcon("folder"),r.add=r.makeIcon("add",!0),r.build=r.makeIcon("build",!0),r.publish=r.makeIcon("publish",!0),r.schemaCompare=r.makeIcon("schemaCompare",!0),r.targetPlatform=r.makeIcon("targetPlatform",!0),r.success=r.makeIcon("success",!0),r.error=r.makeIcon("error",!0),r.inProgress=r.makeIcon("inProgress",!0),r.dashboardSqlProj=r.makeIcon("dashboardSqlProj",!0)}static makeIcon(e,t=!1){return t?{dark:r.extensionContext.asAbsolutePath(`images/${e}.svg`),light:r.extensionContext.asAbsolutePath(`images/${e}.svg`)}:{dark:r.extensionContext.asAbsolutePath(`images/dark/${e}.svg`),light:r.extensionContext.asAbsolutePath(`images/light/${e}.svg`)}}}t.IconPathHelper=r},2178:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0,t.Deferred=class{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}then(e,t){return this.promise.then(e,t)}}},1845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TelemetryActions=t.TelemetryViews=t.TelemetryReporter=void 0;const n=r(7437),o=(0,r(1027).getPackageInfo)();var i,a;t.TelemetryReporter=new n.default(o.name,o.version,o.aiKey),(a=t.TelemetryViews||(t.TelemetryViews={})).ProjectController="ProjectController",a.SqlProjectPublishDialog="SqlProjectPublishDialog",a.ProjectTree="ProjectTree",(i=t.TelemetryActions||(t.TelemetryActions={})).createNewProject="createNewProject",i.addDatabaseReference="addDatabaseReference",i.runStreamingJobValidation="runStreamingJobValidation",i.generateScriptClicked="generateScriptClicked",i.deleteObjectFromProject="deleteObjectFromProject",i.editProjectFile="editProjectFile",i.addItemFromTree="addItemFromTree",i.addExistingItem="addExistingItem",i.excludeFromProject="excludeFromProject",i.projectSchemaCompareCommandInvoked="projectSchemaCompareCommandInvoked",i.publishProject="publishProject",i.build="build",i.updateProjectForRoundtrip="updateProjectForRoundtrip",i.changePlatformType="changePlatformType",i.updateSystemDatabaseReferencesInProjFile="updateSystemDatabaseReferencesInProjFile",i.startAddSqlBinding="startAddSqlBinding",i.finishAddSqlBinding="finishAddSqlBinding",i.createProjectFromDatabase="createProjectFromDatabase",i.updateProjectFromDatabase="updateProjectFromDatabase",i.publishToContainer="publishToContainer"},9799:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cssStyles=void 0,function(e){let t;e.text={"user-select":"text",cursor:"text"},e.tableHeader={...e.text,"text-align":"left",border:"none","font-size":"12px","font-weight":"normal",color:"#666666"},e.tableRow={...e.text,"border-top":"solid 1px #ccc","border-bottom":"solid 1px #ccc","border-left":"none","border-right":"none","font-size":"12px"},e.fontWeightBold={"font-weight":"bold"},e.titleFontSize=13,e.publishDialogLabelWidth="205px",e.publishDialogTextboxWidth="190px",e.addDatabaseReferenceDialogLabelWidth="215px",e.addDatabaseReferenceInputboxWidth="220px",e.createProjectFromDatabaseLabelWidth="110px",e.createProjectFromDatabaseTextboxWidth="310px",e.updateProjectFromDatabaseLabelWidth="110px",e.updateProjectFromDatabaseTextboxWidth="310px",function(e){e.normal="normal",e.italics="italic"}(t=e.fontStyle||(e.fontStyle={}))}(t.cssStyles||(t.cssStyles={}))},1027:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFoldersAlongPath=t.getFoldersToFile=t.getFoldersInFolder=t.getSqlFilesInFolder=t.globWithPattern=t.showInfoMessageWithOutputChannel=t.showErrorMessageWithOutputChannel=t.isValidSQLPassword=t.isEmptyString=t.validateSqlServerPortNumber=t.detectCommandInstallation=t.retry=t.createFolderIfNotExist=t.getAzdataApi=t.timeConversion=t.getPackageInfo=t.getDefaultPublishDeploymentOptions=t.getVscodeMssqlApi=t.getSchemaCompareService=t.getDacFxService=t.getDataWorkspaceExtensionApi=t.getSqlProjectsInWorkspace=t.getSqlProjectFilesInFolder=t.isValidSqlCmdVariableName=t.formatSqlCmdVariable=t.removeSqlCmdVariableFormatting=t.readSqlCmdVariables=t.convertSlashesForSqlProj=t.getPlatformSafeFileEntryPath=t.getQuotedPath=t.exists=t.ensureTrailingSlash=t.trimChars=t.trimUri=t.getErrorMessage=void 0;const n=r(7549),o=r(2087),i=r(6078),a=r(5622),s=r(3294),c=r(5674),l=r(2806),u=r(5747);function p(e){return e instanceof Error?"string"==typeof e.message?e.message:"":"string"==typeof e?e:`${JSON.stringify(e,void 0,"\t")}`}function d(e,t){let r=e,n=0;for(;t.includes(r[n]);)n++;for(r=r.substr(n),n=0;t.includes(r[r.length-n-1]);)n++;return r=r.substring(0,r.length-n),r}function h(e){return e.includes("\\")?e.split("\\").join("/"):e}function m(e){return e.includes("/")?e.split("/").join(i.SqlProjPathSeparator):e}function f(e){if(!e||""===e)return"";if(e.length>3){let t=(e=e.trim()).startsWith("$(")?2:0,r=e.endsWith(")")?1:0;(t>0||r>0)&&(e=e.substr(t,e.length-r-t))}return e.trim()}function g(){const e=w()?"Microsoft.data-workspace":"ms-mssql.data-workspace-vscode";return n.extensions.getExtension(e).exports}async function y(){if(w()){const e=n.extensions.getExtension("Microsoft.mssql");return(await e.activate()).schemaCompare}return(await v()).schemaCompare}async function v(){return n.extensions.getExtension("ms-mssql.mssql").activate()}let b;t.getErrorMessage=p,t.trimUri=function(e,t){let r=e.path.split("/"),n=t.path.split("/");if(a.isAbsolute(t.path)&&r.length>0&&n.length>0&&r[0].toLowerCase()!==n[0].toLowerCase())throw new Error(i.outsideFolderPath);for(;r.length>0&&n.length>0&&r[0].toLocaleLowerCase()===n[0].toLocaleLowerCase();)r=r.slice(1),n=n.slice(1);for(;r.length>1;)n.unshift(i.RelativeOuterPath),r=r.slice(1);return n.join("/")},t.trimChars=d,t.ensureTrailingSlash=function(e,t=i.SqlProjPathSeparator){return e.endsWith(t)?e:e+t},t.exists=async function(e){try{return await u.promises.access(e),!0}catch{return!1}},t.getQuotedPath=function(e){return"win32"===o.platform()?function(e){return'"'+(e=e.split("\\").join("\\\\").split('"').join(""))+'"'}(e):function(e){return'"'+(e=e.split("\\").join("/").split('"').join(""))+'"'}(e)},t.getPlatformSafeFileEntryPath=h,t.convertSlashesForSqlProj=m,t.readSqlCmdVariables=function(e,t){let r={};for(let n=0;n<e.documentElement.getElementsByTagName(i.SqlCmdVariable)?.length;n++){const o=e.documentElement.getElementsByTagName(i.SqlCmdVariable)[n],a=o.getAttribute(i.Include);t||void 0===o.getElementsByTagName(i.DefaultValue)[0]?r[a]=o.getElementsByTagName(i.Value)[0].childNodes[0].nodeValue:r[a]=o.getElementsByTagName(i.DefaultValue)[0].childNodes[0].nodeValue}return r},t.removeSqlCmdVariableFormatting=f,t.formatSqlCmdVariable=function(e){return e&&""!==e?((e=e.trim()).startsWith("$(")||e.endsWith(")")?e.startsWith("$(")&&!e.endsWith(")")&&(e=`${e})`):e=`$(${e})`,e):e},t.isValidSqlCmdVariableName=function(e){return!(!(e=f(e))||""===e.trim()||e.includes(" ")||e.includes("$")||e.includes("@")||e.includes("#")||e.includes('"')||e.includes("'")||e.includes("-"))},t.getSqlProjectFilesInFolder=async function(e){const t=s.escapePath(e.replace(/\\/g,"/")),r=a.posix.join(t,"**","*.sqlproj");return await s(r)},t.getSqlProjectsInWorkspace=function(){return g().getProjectsInWorkspace(i.sqlprojExtension)},t.getDataWorkspaceExtensionApi=g,t.getDacFxService=async function(){if(w()){const e=n.extensions.getExtension("Microsoft.mssql");return(await e.activate()).dacFx}return(await v()).dacFx},t.getSchemaCompareService=y,t.getVscodeMssqlApi=v,t.getDefaultPublishDeploymentOptions=async function(e){const t=await y(),r=await t.schemaCompareGetDefaultOptions(),n=r.defaultDeploymentOptions;return w(),n.excludeObjectTypes=n.excludeObjectTypes.filter((e=>53!==e)),e.databaseReferences.length>0&&(n.includeCompositeObjects=!0),r.defaultDeploymentOptions},t.getPackageInfo=function(e){if(e||(e=r(306)),e)return{name:e.name,fullName:`${e.publisher}.${e.name}`,version:e.version,aiKey:e.aiKey}},t.timeConversion=function(e){const t=[],r=36e5,n=Math.trunc(e/r);n>0&&(t.push(`${n} ${i.hr}`),e-=n*r);const o=Math.trunc(e/6e4);o>0&&(t.push(`${o} ${i.min}`),e-=6e4*o);const a=Math.trunc(e/1e3);return a>0&&t.push(`${a} ${i.sec}`),0===n&&0===o&&0===a&&t.push(`${e} ${i.msec}`),t.join(", ")};try{b=r(3331),b?.version||(b=void 0)}catch{}function w(){return b}t.getAzdataApi=w,t.createFolderIfNotExist=async function(e){try{await c.mkdir(e)}catch{}},t.retry=async function(e,t,r,n,o,a=10,s=2){for(let c=0;c<a;c++){o.appendLine(i.retryWaitMessage(s,e)),await new Promise((e=>setTimeout(e,1e3*s))),o.appendLine(i.retryRunMessage(c,a,e));try{let a=await t();const s=await r(a),c=await n(a);if(s.validated)return o.appendLine(i.retrySucceedMessage(e,c)),a;o.appendLine(i.retryFailedMessage(e,c,s.errorMessage))}catch(t){o.appendLine(i.retryMessage(e,t))}}},t.detectCommandInstallation=async function(e){try{if(await l(e))return!0}catch(e){console.log(p(e))}return!1},t.validateSqlServerPortNumber=function(e){if(!e)return!1;const t=+e;return!isNaN(t)&&t>0&&t<65535},t.isEmptyString=function(e){return void 0===e||""===e},t.isValidSQLPassword=function(e,t="sa"){const r=e&&void 0!==t&&e.toUpperCase().includes(t.toUpperCase()),n=/[A-Z]/.test(e)?1:0,o=/[a-z]/.test(e)?1:0,i=/\d/.test(e)?1:0,a=/\W/.test(e)?1:0;return!r&&e.length>=8&&e.length<=128&&n+o+i+a>=3},t.showErrorMessageWithOutputChannel=async function(e,t,r){await n.window.showErrorMessage(e(p(t)),i.checkoutOutputMessage)===i.checkoutOutputMessage&&r.show()},t.showInfoMessageWithOutputChannel=async function(e,t){await n.window.showInformationMessage(e,i.checkoutOutputMessage)===i.checkoutOutputMessage&&t.show()},t.globWithPattern=async function(e){const t=e.replace(/\\/g,"/");return await s(t)},t.getSqlFilesInFolder=async function(e,t){e=e.replace(/\\/g,"/");const r=a.posix.join(e,"**","*.sql");if(t){const t=a.posix.join(e,"bin","**","*.sql"),n=a.posix.join(e,"obj","**","*.sql");return await s(r,{ignore:[t,n]})}return await s(r)},t.getFoldersInFolder=async function(e,t){const r=s.escapePath(e.replace(/\\/g,"/")),n=a.posix.join(r,"/**");if(t){const e=a.posix.join(r,"bin"),t=a.posix.join(r,"obj");return await s(n,{onlyDirectories:!0,ignore:[e,t]})}return await s(n,{onlyDirectories:!0})},t.getFoldersToFile=function(e,t){let r=[];const n=d(m(a.dirname(t).substring(e.length))," \\").split(i.SqlProjPathSeparator);let o=m(e)+i.SqlProjPathSeparator;for(let e of n)e&&(o+=e+i.SqlProjPathSeparator,r.push(h(o)));return r},t.getFoldersAlongPath=function(e,t){let r=[];const n=d(m(t.substring(e.length))," \\").split(i.SqlProjPathSeparator);let o=m(e)+i.SqlProjPathSeparator;for(let e of n)e&&(o+=e+i.SqlProjPathSeparator,r.push(h(o)));return r}},5372:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlDatabaseProjectTreeViewProvider=void 0;const n=r(7549),o=r(6078),i=r(4175),a=r(7920);t.SqlDatabaseProjectTreeViewProvider=class{constructor(){this._onDidChangeTreeData=new n.EventEmitter,this.onDidChangeTreeData=this._onDidChangeTreeData.event,this.roots=[],this.initialize()}initialize(){this.roots=[]}notifyTreeDataChanged(){this._onDidChangeTreeData.fire(void 0)}getTreeItem(e){return e.treeItem}getChildren(e){return void 0===e?this.roots:e.children}getParent(e){if(!e.parent)throw new Error(o.parentTreeItemUnknown);return e.parent}load(e){let t=[];for(const r of e)t.push(new a.ProjectRootTreeItem(r)),t.push(i.SpacerTreeItem);t[t.length-1]===i.SpacerTreeItem&&t.pop(),this.roots=t,this._onDidChangeTreeData.fire(void 0)}setTreeView(e){if(this.treeView)throw new Error("TreeView should not be set multiple times.");this.treeView=e}async focus(e){const t=this.roots.find((t=>t instanceof a.ProjectRootTreeItem&&t.project===e));t&&await(this.treeView?.reveal(t,{focus:!0,expand:!0}))}}},8018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(7549),o=r(2102),i=r(7482),a=r(5622),s=r(2572),c=r(5191),l=r(5894),u=r(6078),p=r(6650);t.default=class{constructor(e){this.context=e,this._outputChannel=n.window.createOutputChannel(u.projectsOutputChannel),this.projectsController=new s.ProjectsController(this._outputChannel),this.netcoreTool=new c.NetCoreTool(this._outputChannel)}get extensionContext(){return this.context}get projController(){return this.projectsController}deactivate(){}async activate(){const e=n.workspace.getConfiguration(c.DBProjectConfigurationKey)[c.NetCoreInstallLocationKey];return e&&!n.workspace.getConfiguration(c.DBProjectConfigurationKey)[c.DotnetInstallLocationKey]&&await n.workspace.getConfiguration(c.DBProjectConfigurationKey).update(c.DotnetInstallLocationKey,e,!0),await this.initializeDatabaseProjects(),new p.SqlDatabaseProjectProvider(this.projectsController)}async initializeDatabaseProjects(){n.commands.registerCommand("sqlDatabaseProjects.properties",(async e=>n.window.showErrorMessage(`Properties not yet implemented: ${e.element.uri.path}`))),n.commands.registerCommand("sqlDatabaseProjects.build",(async e=>this.projectsController.buildProject(e))),n.commands.registerCommand("sqlDatabaseProjects.publish",(async e=>this.projectsController.publishProject(e))),n.commands.registerCommand("sqlDatabaseProjects.schemaCompare",(async e=>this.projectsController.schemaCompare(e))),n.commands.registerCommand("sqlDatabaseProjects.schemaComparePublishProjectChanges",(async(e,t,r)=>await this.projectsController.schemaComparePublishProjectChanges(e,t,r))),n.commands.registerCommand("sqlDatabaseProjects.updateProjectFromDatabase",(async e=>{await this.projectsController.updateProjectFromDatabase(e)})),n.commands.registerCommand("sqlDatabaseProjects.createProjectFromDatabase",(async e=>this.projectsController.createProjectFromDatabase(e))),n.commands.registerCommand("sqlDatabaseProjects.generateProjectFromOpenApiSpec",(async e=>this.projectsController.generateProjectFromOpenApiSpec(e))),n.commands.registerCommand("sqlDatabaseProjects.newScript",(async e=>this.projectsController.addItemPromptFromNode(e,o.script))),n.commands.registerCommand("sqlDatabaseProjects.newPreDeploymentScript",(async e=>this.projectsController.addItemPromptFromNode(e,o.preDeployScript))),n.commands.registerCommand("sqlDatabaseProjects.newPostDeploymentScript",(async e=>this.projectsController.addItemPromptFromNode(e,o.postDeployScript))),n.commands.registerCommand("sqlDatabaseProjects.newTable",(async e=>this.projectsController.addItemPromptFromNode(e,o.table))),n.commands.registerCommand("sqlDatabaseProjects.newView",(async e=>this.projectsController.addItemPromptFromNode(e,o.view))),n.commands.registerCommand("sqlDatabaseProjects.newStoredProcedure",(async e=>this.projectsController.addItemPromptFromNode(e,o.storedProcedure))),n.commands.registerCommand("sqlDatabaseProjects.newExternalStreamingJob",(async e=>this.projectsController.addItemPromptFromNode(e,o.externalStreamingJob))),n.commands.registerCommand("sqlDatabaseProjects.newItem",(async e=>this.projectsController.addItemPromptFromNode(e))),n.commands.registerCommand("sqlDatabaseProjects.addExistingItem",(async e=>this.projectsController.addExistingItemPrompt(e))),n.commands.registerCommand("sqlDatabaseProjects.newFolder",(async e=>this.projectsController.addFolderPrompt(e))),n.commands.registerCommand("sqlDatabaseProjects.addDatabaseReference",(async e=>this.projectsController.addDatabaseReference(e))),n.commands.registerCommand("sqlDatabaseProjects.openContainingFolder",(async e=>this.projectsController.openContainingFolder(e))),n.commands.registerCommand("sqlDatabaseProjects.editProjectFile",(async e=>this.projectsController.editProjectFile(e))),n.commands.registerCommand("sqlDatabaseProjects.convertToSdkStyleProject",(async e=>this.projectsController.convertToSdkStyleProject(e))),n.commands.registerCommand("sqlDatabaseProjects.delete",(async e=>this.projectsController.delete(e))),n.commands.registerCommand("sqlDatabaseProjects.exclude",(async e=>this.projectsController.exclude(e))),n.commands.registerCommand("sqlDatabaseProjects.changeTargetPlatform",(async e=>this.projectsController.changeTargetPlatform(e))),n.commands.registerCommand("sqlDatabaseProjects.validateExternalStreamingJob",(async e=>this.projectsController.validateExternalStreamingJob(e))),l.IconPathHelper.setExtensionContext(this.extensionContext),await o.loadTemplates(a.join(this.context.extensionPath,"resources","templates")),i.loadAssets(a.join(this.context.extensionPath,"resources","projectAssets"))}dispose(){this.deactivate()}}},2572:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectsController=t.TaskExecutionMode=void 0;const n=r(6078),o=r(2087),i=r(5622),a=r(1027),s=r(2884),c=r(2102),l=r(7549),u=r(5674),p=r(5747),d=r(5444),h=r(4935),m=r(2134),f=r(7920),g=r(5191),y=r(4914),v=r(5932),b=r(774),w=r(122),S=r(3437),P=r(5603),E=r(1845),D=r(5894),T=r(891),x=r(3773),_=r(7978),C=r(5892),j=r(4191),I=r(9108),N=r(9859),A=r(6742),R=r(7482);var F;!function(e){e[e.execute=0]="execute",e[e.script=1]="script",e[e.executeAndScript=2]="executeAndScript"}(F=t.TaskExecutionMode||(t.TaskExecutionMode={})),t.ProjectsController=class{constructor(e){this._outputChannel=e,this.buildInfo=[],this.publishInfo=[],this.projFileWatchers=new Map,this.netCoreTool=new g.NetCoreTool(this._outputChannel),this.buildHelper=new y.BuildHelper,this.deployService=new C.DeployService(this._outputChannel),this.autorestHelper=new j.AutorestHelper(this._outputChannel)}getDashboardPublishData(e){const t=[];for(let r=this.publishInfo.length-1;r>=0;r--)if(this.publishInfo[r].projectFile===e){let e,o;this.publishInfo[r].status===T.Status.success?(e=D.IconPathHelper.success,o=n.Success):this.publishInfo[r].status===T.Status.failed?(e=D.IconPathHelper.error,o=n.Failed):(e=D.IconPathHelper.inProgress,o=n.InProgress);let i=[{text:o,icon:e},this.publishInfo[r].startDate,this.publishInfo[r].timeToCompleteAction,this.publishInfo[r].target,this.publishInfo[r].targetServer,this.publishInfo[r].targetDatabase];t.push(i)}return t}getDashboardBuildData(e){const t=[];for(let r=this.buildInfo.length-1;r>=0;r--)if(this.buildInfo[r].projectFile===e){let e,o;this.buildInfo[r].status===T.Status.success?(e=D.IconPathHelper.success,o=n.Success):this.buildInfo[r].status===T.Status.failed?(e=D.IconPathHelper.error,o=n.Failed):(e=D.IconPathHelper.inProgress,o=n.InProgress);let i=[{text:o,icon:e},this.buildInfo[r].startDate,this.buildInfo[r].timeToCompleteAction,this.buildInfo[r].target];t.push(i)}return t}refreshProjectsTree(e){e.treeDataProvider.notifyTreeDataChanged()}async createNewProject(e){if(E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.createNewProject).withAdditionalProperties({template:e.projectTypeId,sdkStyle:e.sdkStyle.toString(),targetPlatform:e.targetPlatform?.toString()??""}).send(),e.projectGuid&&!s.isUUID(e.projectGuid))throw new Error(n.invalidGuid(e.projectGuid));if(e.targetPlatform&&!n.targetPlatformToVersion.get(e.targetPlatform))throw new Error(n.invalidTargetPlatform(e.targetPlatform,Array.from(n.targetPlatformToVersion.keys())));const t=e.targetPlatform?n.targetPlatformToVersion.get(e.targetPlatform):n.defaultDSP,r={PROJECT_NAME:e.newProjName,PROJECT_GUID:e.projectGuid??s.generateUuid().toUpperCase(),PROJECT_DSP:t};let o=e.sdkStyle?c.macroExpansion(c.newSdkSqlProjectTemplate,r):c.macroExpansion(c.newSqlProjectTemplate,r),l=e.newProjName;l.toLowerCase().endsWith(n.sqlprojExtension)||(l+=n.sqlprojExtension);const d=i.join(e.folderUri.fsPath,i.parse(l).name,l);if(await a.exists(d))throw new Error(n.projectAlreadyExists(l,i.parse(d).dir));const h=i.dirname(d);if(await p.promises.mkdir(h,{recursive:!0}),await p.promises.writeFile(d,o),R.targetPlatformToAssets?.has(t)&&R.targetPlatformToAssets?.get(t)?.readmeFolder){const e=R.targetPlatformToAssets.get(t)?.readmeFolder;if(e){const t=i.join(e,"README.md");await a.exists(t)&&(await p.promises.copyFile(t,i.join(h,"README.md")),await u.copy(i.join(e,"assets"),i.join(h,"assets")))}}return await this.addTemplateFiles(d,e.projectTypeId),d}async buildProject(e){const t=this.getProjectFromContext(e),r=new Date,o=`${r.toLocaleDateString()} ${n.at} ${r.toLocaleTimeString()}`;let i=new T.DashboardData(t.projectFilePath,T.Status.inProgress,t.getProjectTargetVersion(),o);this.buildInfo.push(i),this.buildInfo.length-1==10&&this.buildInfo.shift(),await this.buildHelper.createBuildDirFolder();const s={commandTitle:"Build",workingDirectory:t.projectFolderPath,argument:this.buildHelper.constructBuildArguments(t.projectFilePath,this.buildHelper.extensionBuildDirPath,t.isSdkStyleProject)};try{await this.netCoreTool.runDotnetCommand(s);const e=(new Date).getTime()-r.getTime(),n=this.buildInfo.findIndex((e=>e.startDate===o));return this.buildInfo[n].status=T.Status.success,this.buildInfo[n].timeToCompleteAction=a.timeConversion(e),E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.build).withAdditionalMeasurements({duration:e}).send(),t.dacpacOutputPath}catch(e){const t=(new Date).getTime()-r.getTime(),i=this.buildInfo.findIndex((e=>e.startDate===o));this.buildInfo[i].status=T.Status.failed,this.buildInfo[i].timeToCompleteAction=a.timeConversion(t),E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.build).withAdditionalMeasurements({duration:t}).send();const s=a.getErrorMessage(e);return e instanceof g.DotNetError?console.error(s):l.window.showErrorMessage(n.projBuildFailed(s)),""}}async publishToDockerContainer(e,t){const r=this.getProjectFromContext(e);try{if(E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.publishToContainer),t&&t.deploySettings){let e;if(t.localDbSetting&&(a.showInfoMessageWithOutputChannel(n.publishingProjectMessage,this._outputChannel),e=await this.deployService.deploy(t,r),e&&(t.deploySettings.connectionUri=e)),t.deploySettings.connectionUri){const e=await this.publishOrScriptProject(r,t.deploySettings,!0);e&&e.success?(t.localDbSetting&&await this.deployService.getConnection(t.localDbSetting,!0,t.localDbSetting.dbName),l.window.showInformationMessage(n.publishProjectSucceed)):a.showErrorMessageWithOutputChannel(n.publishToContainerFailed,e?.errorMessage||"",this._outputChannel)}else a.showErrorMessageWithOutputChannel(n.publishToContainerFailed,n.deployProjectFailedMessage,this._outputChannel)}}catch(e){a.showErrorMessageWithOutputChannel(n.publishToContainerFailed,e,this._outputChannel),E.TelemetryReporter.sendErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.publishToContainer)}}async publishProject(e){const t=this.getProjectFromContext(e);if(a.getAzdataApi()){let e=this.getPublishDialog(t);return e.publish=async(e,t)=>this.publishOrScriptProject(e,t,!0),e.publishToContainer=async(e,t)=>this.publishToDockerContainer(e,t),e.generateScript=async(e,t)=>this.publishOrScriptProject(e,t,!1),e.readPublishProfile=async e=>(0,v.readPublishProfile)(e),e.openDialog(),e.waitForClose()}return this.publishDatabase(t)}async publishDatabase(e){const t=await(0,x.launchPublishTargetOption)(e);if(t)if(t===n.PublishTargetType.docker){const t=await(0,_.launchPublishToDockerContainerQuickpick)(e);t?.deploySettings&&await this.publishToDockerContainer(e,t)}else{let t=await(0,x.getPublishDatabaseSettings)(e);if(t){const r=await l.window.showQuickPick([n.generateScriptButtonText,n.publish],{title:n.chooseAction,ignoreFocusOut:!0});if(!r)return;await this.publishOrScriptProject(e,t,r===n.publish)}}}async publishOrScriptProject(e,t,r){const s={},c={},l=(new Date).getTime(),u=await this.buildProject(e),d=(new Date).getTime();if(c.buildDuration=d-l,s.buildSucceeded=(""!==u).toString(),!u)return void E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.publishProject).withAdditionalProperties(s).withAdditionalMeasurements(c).send();const h=i.join(o.tmpdir(),`${i.parse(u).name}_${(new Date).getTime()}${n.sqlprojExtension}`);await p.promises.copyFile(u,h);const m=await a.getDacFxService();let f;s.profileUsed=(t.profileUsed??!1).toString();const g=new Date,y=g.getTime(),v=`${g.toLocaleDateString()} ${n.at} ${g.toLocaleTimeString()}`;let b=new T.PublishData(e.projectFilePath,T.Status.inProgress,e.getProjectTargetVersion(),v,t.databaseName,t.serverName);this.publishInfo.push(b),this.publishInfo.length-1==10&&this.publishInfo.shift();try{const e=a.getAzdataApi();r?(s.publishAction="deploy",f=e?await m.deployDacpac(h,t.databaseName,!0,t.connectionUri,e.TaskExecutionMode.execute,t.sqlCmdVariables,t.deploymentOptions):await m.deployDacpac(h,t.databaseName,!0,t.connectionUri,F.execute,t.sqlCmdVariables,t.deploymentOptions)):(s.publishAction="generateScript",f=e?await m.generateDeployScript(h,t.databaseName,t.connectionUri,e.TaskExecutionMode.script,t.sqlCmdVariables,t.deploymentOptions):await m.generateDeployScript(h,t.databaseName,t.connectionUri,F.script,t.sqlCmdVariables,t.deploymentOptions))}catch(e){const t=(new Date).getTime(),r=t-y;s.actionDuration=r.toString(),s.totalDuration=(t-l).toString(),E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.publishProject).withAdditionalProperties(s).send();const n=this.publishInfo.findIndex((e=>e.startDate===v));throw this.publishInfo[n].status=T.Status.failed,this.publishInfo[n].timeToCompleteAction=a.timeConversion(r),e}const w=(new Date).getTime(),S=w-y;s.actionDuration=S.toString(),s.totalDuration=(w-l).toString(),s.sqlcmdVariablesCount=Object.keys(e.sqlCmdVariables).length.toString(),s.projectTargetPLatform=e.getProjectTargetVersion();const P=this.publishInfo.findIndex((e=>e.startDate===v));return this.publishInfo[P].status=f.success?T.Status.success:T.Status.failed,this.publishInfo[P].timeToCompleteAction=a.timeConversion(S),E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.publishProject).withAdditionalProperties(s).send(),f}async schemaCompare(e,t){try{if(!l.extensions.getExtension(n.schemaCompareExtensionId))throw new Error(n.schemaCompareNotInstalled);{let r;r=e?this.getProjectFromContext(e).projectFilePath:e;try{E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.projectSchemaCompareCommandInvoked),await l.commands.executeCommand(n.schemaCompareStartCommand,r,t,void 0)}catch(e){throw new Error(n.buildFailedCannotStartSchemaCompare)}}}catch(e){const t={},r=a.getErrorMessage(e);r!==n.buildFailedCannotStartSchemaCompare&&r!==n.schemaCompareNotInstalled||(t.errorMessage=r),E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.projectSchemaCompareCommandInvoked).withAdditionalProperties(t).send(),l.window.showErrorMessage(a.getErrorMessage(e))}}async getProjectScriptFiles(e){return(await h.Project.openProject(e)).files.filter((e=>e.fsUri.fsPath.endsWith(n.sqlFileExtension))).map((e=>e.fsUri.fsPath))}async getProjectDatabaseSchemaProvider(e){return(await h.Project.openProject(e)).getProjectTargetVersion()}async schemaComparePublishProjectChanges(e,t,r){const o=l.extensions.getExtension("Microsoft.mssql"),s=(await o.activate()).schemaCompare,c=i.dirname(t);let u;switch(r){case n.file:u=1;break;case n.flat:u=2;break;case n.objectType:u=3;break;case n.schema:u=4;break;case n.schemaObjectType:default:u=5}const p=await s.schemaComparePublishProjectChanges(e,c,u,a.getAzdataApi().TaskExecutionMode.execute);if(!p.errorMessage){const e=await h.Project.openProject(t);let r=[];p.addedFiles.forEach((e=>r.push(l.Uri.file(e)))),await e.addToProject(r);let n=[];p.deletedFiles.forEach((e=>n.push(l.Uri.file(e))));let o=[];n.forEach((e=>o.push(new A.FileProjectEntry(e,e.path.replace(c+"\\",""),A.EntryType.File)))),o.forEach((async t=>await e.exclude(t))),await this.buildProject(e)}return p}async addFolderPrompt(e){const t=this.getProjectFromContext(e),r=this.getRelativePath(e.element),o=i.join(t.projectFolderPath,r),s=await this.promptForNewObjectName(new c.ProjectScriptType(c.folder,n.folderFriendlyName,""),t,o);if(!s)return;const u=i.join(r,s);try{const r=i.join(o,s);if(await a.exists(r)||this.isReservedFolder(r,t.projectFolderPath))throw new Error(n.folderAlreadyExists(i.parse(r).name));await t.addFolderItem(u),this.refreshProjectsTree(e)}catch(e){l.window.showErrorMessage(a.getErrorMessage(e))}}isReservedFolder(e,t){const r=void 0!==h.reservedProjectFolders.find((t=>t===i.parse(e).name)),n=i.parse(e).dir===t;return r&&n}async addItemPromptFromNode(e,t){await this.addItemPrompt(this.getProjectFromContext(e),this.getRelativePath(e.element),t,e.treeDataProvider)}async addItemPrompt(e,t,r,o){if(!r){const e=[];for(const t of c.projectScriptTypes())e.push({label:t.friendlyName});if(r=(await l.window.showQuickPick(e,{canPickMany:!1}))?.label,!r)return}const s=c.get(r),u=i.join(e.projectFolderPath,t);let p=await this.promptForNewObjectName(s,e,u,n.sqlFileExtension);if(p=p?.trim(),!p)return;const d=c.macroExpansion(s.templateScript,{OBJECT_NAME:p}),h=i.join(t,p+n.sqlFileExtension),m={itemType:s.type},f={};s.type===c.preDeployScript?f.numPredeployScripts=e.preDeployScripts.length:s.type===c.postDeployScript&&(f.numPostdeployScripts=e.postDeployScripts.length);try{const t=await e.addScriptItem(h,d,s.type);E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.addItemFromTree).withAdditionalProperties(m).withAdditionalMeasurements(f).send(),await l.commands.executeCommand(n.vscodeOpenCommand,t.fsUri),o?.notifyTreeDataChanged()}catch(e){l.window.showErrorMessage(a.getErrorMessage(e)),E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.addItemFromTree).withAdditionalProperties(m).withAdditionalMeasurements(f).send()}}async addExistingItemPrompt(e){const t=this.getProjectFromContext(e),r=await l.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,openLabel:n.selectString,title:n.selectFileString});if(r)try{E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.addExistingItem),await t.addExistingItem(r[0].fsPath),this.refreshProjectsTree(e)}catch(e){l.window.showErrorMessage(a.getErrorMessage(e)),E.TelemetryReporter.sendErrorEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.addExistingItem)}}async exclude(e){const t=e.element,r=this.getProjectFromContext(t),o=this.getFileProjectEntry(r,t);o?(E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.excludeFromProject),await r.exclude(o)):(E.TelemetryReporter.sendErrorEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.excludeFromProject),l.window.showErrorMessage(n.unableToPerformAction(n.excludeAction,t.projectUri.path))),this.refreshProjectsTree(e)}async delete(e){const t=e.element,r=this.getProjectFromContext(t);let o;if(o=t instanceof w.DatabaseReferenceTreeItem?n.deleteReferenceConfirmation(t.friendlyName):t instanceof m.FolderNode?n.deleteConfirmationContents(t.friendlyName):n.deleteConfirmation(t.friendlyName),await l.window.showWarningMessage(o,{modal:!0},n.yesString)!==n.yesString)return;let i=!1;if(t instanceof w.DatabaseReferenceTreeItem){const e=this.getDatabaseReference(r,t);e&&(await r.deleteDatabaseReference(e),i=!0)}else if(t instanceof m.FileNode||m.FolderNode){const e=this.getFileProjectEntry(r,t);e&&(await r.deleteFileFolder(e),i=!0)}i?(E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.deleteObjectFromProject).withAdditionalProperties({objectType:t.constructor.name}).send(),this.refreshProjectsTree(e)):(E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.deleteObjectFromProject).withAdditionalProperties({objectType:t.constructor.name}).send(),l.window.showErrorMessage(n.unableToPerformAction(n.deleteAction,t.projectUri.path)))}getFileProjectEntry(e,t){const r=t.root,n=t||t;if(r&&n){const t=e.files.concat(e.preDeployScripts).concat(e.postDeployScripts).concat(e.noneDeployScripts),o=a.trimChars(a.getPlatformSafeFileEntryPath(a.trimUri(r.fileSystemUri,n.fileSystemUri)),"/");return t.find((e=>a.trimChars(a.getPlatformSafeFileEntryPath(e.relativePath),"/")===o))}return e.files.find((e=>a.getPlatformSafeFileEntryPath(e.relativePath)===a.getPlatformSafeFileEntryPath(a.trimUri(t.root.projectUri,t.projectUri))))}getDatabaseReference(e,t){const r=t.root,n=t;if(r&&n)return e.databaseReferences.find((e=>e.databaseName===n.treeItem.label))}async openContainingFolder(e){const t=this.getProjectFromContext(e);await l.commands.executeCommand(n.revealFileInOsCommand,l.Uri.file(t.projectFilePath))}async editProjectFile(e){const t=this.getProjectFromContext(e);try{await l.commands.executeCommand(n.vscodeOpenCommand,l.Uri.file(t.projectFilePath)),E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.editProjectFile);const r=l.workspace.createFileSystemWatcher(t.projectFilePath);this.projFileWatchers.set(t.projectFilePath,r),r.onDidChange((async()=>{if(await l.window.showInformationMessage(n.reloadProject,n.yesString,n.noString)===n.yesString)return this.reloadProject(e)}));const o=l.workspace.onDidCloseTextDocument((e=>{this.projFileWatchers.has(e.uri.fsPath)&&(this.projFileWatchers.get(e.uri.fsPath).dispose(),this.projFileWatchers.delete(e.uri.fsPath),o.dispose())}))}catch(e){l.window.showErrorMessage(a.getErrorMessage(e))}}async reloadProject(e){const t=this.getProjectFromContext(e);if(!t)throw new Error(n.invalidProjectReload);await t.readProjFile(),this.refreshProjectsTree(e)}async changeTargetPlatform(e){const t=this.getProjectFromContext(e),r=(await l.window.showQuickPick(Array.from(n.targetPlatformToVersion.keys()).map((e=>({label:e}))),{canPickMany:!1,placeHolder:n.selectTargetPlatform(n.getTargetPlatformFromVersion(t.getProjectTargetVersion()))}))?.label;r&&(await t.changeTargetPlatform(n.targetPlatformToVersion.get(r)),l.window.showInformationMessage(n.currentTargetPlatform(t.projectFileName,n.getTargetPlatformFromVersion(t.getProjectTargetVersion()))))}async convertToSdkStyleProject(e){const t=this.getProjectFromContext(e);await l.window.showWarningMessage(n.convertToSdkStyleConfirmation(t.projectFileName),{modal:!0},n.yesString).then((async r=>{if(r===n.yesString){const r=await t.convertProjectToSdkStyle();this.reloadProject(e),r?(this.reloadProject(e),await l.window.showInformationMessage(n.projectUpdatedToSdkStyle(t.projectFileName),n.learnMore)===n.learnMore&&l.env.openExternal(l.Uri.parse(n.sdkLearnMoreUrl))):l.window.showErrorMessage(n.updatedToSdkStyleError(t.projectFileName))}}))}async addDatabaseReference(e){const t=this.getProjectFromContext(e);if(a.getAzdataApi()){const r=this.getAddDatabaseReferenceDialog(t);return r.addReference=async(t,r)=>await this.addDatabaseReferenceCallback(t,r,e),await r.openDialog(),r}{const r=await(0,N.addDatabaseReferenceQuickpick)(t);return void(r&&await this.addDatabaseReferenceCallback(t,r,e))}}async addDatabaseReferenceCallback(e,t,r){try{if(void 0!==t.projectName){const r=t,o=await a.getSqlProjectsInWorkspace(),s=await h.Project.openProject(o.filter((e=>i.parse(e.fsPath).name===r.projectName))[0].fsPath),c=i.relative(e.projectFolderPath,s?.projectFilePath);r.projectRelativePath=l.Uri.file(c),r.projectGuid=s?.projectGuid;const u=s?.databaseReferences.filter((e=>e instanceof A.SqlProjectReferenceProjectEntry))??[];for(let t of u)if(t.projectName===e.projectFileName)return void l.window.showErrorMessage(n.cantAddCircularProjectReference(s?.projectFileName));await e.addProjectReference(r)}else if(void 0!==t.systemDb)await e.addSystemDatabaseReference(t);else{const r=t;r.dacpacFileLocation=l.Uri.file(i.relative(e.projectFolderPath,r.dacpacFileLocation.fsPath)),await e.addDatabaseReference(r)}this.refreshProjectsTree(r)}catch(e){l.window.showErrorMessage(a.getErrorMessage(e))}}async validateExternalStreamingJob(e){const t=this.getProjectFromContext(e);let r=t.dacpacOutputPath;const o=await a.exists(r),i={preExistingDacpac:o.toString()};o||(r=await this.buildProject(t));const s=(await p.promises.readFile(e.element.fileSystemUri.fsPath)).toString(),c=await a.getDacFxService(),u=(new Date).getTime(),d=await c.validateStreamingJob(r,s),h=(new Date).getTime()-u;return i.success=d.success.toString(),d.success?l.window.showInformationMessage(n.externalStreamingJobValidationPassed):l.window.showErrorMessage(d.errorMessage),E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectTree,E.TelemetryActions.runStreamingJobValidation).withAdditionalProperties(i).withAdditionalMeasurements({duration:h}).send(),d}async selectAutorestSpecFile(){if(!await l.window.showQuickPick([n.browseEllipsisWithIcon],{title:n.selectSpecFile,ignoreFocusOut:!0}))return;const e={};e[n.specSelectionText]=n.openApiSpecFileExtensions;let t=await l.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,openLabel:n.selectString,filters:e,title:n.selectSpecFile});return t?t[0].fsPath:void 0}async selectAutorestProjectLocation(e,t){let r=t?i.join(t.fsPath,e):"",o=t?.fsPath||"";for(;;){let s="";if(r&&await a.exists(r))s=n.folderAlreadyExistsChooseNewLocation(r);else{if(r)break;s=n.selectProjectLocation}if(!await l.window.showQuickPick([n.browseEllipsisWithIcon],{title:s,ignoreFocusOut:!0}))return;const c=await l.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:n.selectString,defaultUri:t??l.workspace.workspaceFolders?.[0]?.uri,title:n.selectProjectLocation});if(!c)return;o=c[0].fsPath,r=i.join(o,e)}return{newProjectFolder:r,outputFolder:o,projectName:e}}async generateAutorestFiles(e,t){return await p.promises.mkdir(t,{recursive:!0}),l.window.withProgress({location:l.ProgressLocation.Notification,title:n.generatingProjectFromAutorest(i.basename(e)),cancellable:!1},(async(r,n)=>this.autorestHelper.generateAutorestFiles(e,t)))}async openProjectInWorkspace(e){const t=a.getDataWorkspaceExtensionApi();await t.validateWorkspace(),await t.addProjectsToWorkspace([l.Uri.file(e)]),t.showProjectsView()}async promptForAutorestProjectName(e){let t=await l.window.showInputBox({ignoreFocusOut:!0,prompt:n.autorestProjectName,value:e,validateInput:e=>e.trim()?void 0:n.nameMustNotBeEmpty});if(void 0!==t)return t=t.trim(),t}async generateProjectFromOpenApiSpec(e){try{const t=e?.openApiSpecFile?.fsPath||await this.selectAutorestSpecFile();if(!t)return;const r=await this.promptForAutorestProjectName(e?.defaultProjectName||i.basename(t,i.extname(t)));if(!r)return;const o=await this.selectAutorestProjectLocation(r,e?.defaultOutputLocation);if(!o)return;if(!await this.generateAutorestFiles(t,o.newProjectFolder))return;const a=await this.getSqlFileList(o.newProjectFolder);if(!a||0===a.length)return l.window.showInformationMessage(n.noSqlFilesGenerated),void this._outputChannel.show();const s=await this.createNewProject({newProjName:o.projectName,folderUri:l.Uri.file(o.outputFolder),projectTypeId:n.emptySqlDatabaseProjectTypeId,sdkStyle:!1}),u=await h.Project.openProject(s);await u.addToProject(a.filter((e=>!e.fsPath.endsWith(n.autorestPostDeploymentScriptName))));const p=this.findPostDeploymentScript(a);return p&&await u.addScriptItem(i.relative(u.projectFolderPath,p.fsPath),void 0,c.postDeployScript),!0!==e?.doNotOpenInWorkspace&&await this.openProjectInWorkspace(s),u}catch(e){return l.window.showErrorMessage(n.generatingProjectFailed(a.getErrorMessage(e))),void this._outputChannel.show()}}findPostDeploymentScript(e){const t=e.filter((e=>e.fsPath.endsWith(n.autorestPostDeploymentScriptName)));switch(t.length){case 0:return;case 1:return t[0];default:throw new Error(n.multipleMostDeploymentScripts(t.length))}}async getSqlFileList(e){if(!await a.exists(e))return;const t=await p.promises.readdir(e,{withFileTypes:!0}),r=t.filter((e=>e.isDirectory())).map((t=>i.join(e,t.name))),o=t.filter((e=>!e.isDirectory()&&i.extname(e.name)===n.sqlFileExtension)).map((t=>l.Uri.file(i.join(e,t.name))));for(const e of r)o.push(...await this.getSqlFileList(e)??[]);return o}getPublishDialog(e){return new d.PublishDatabaseDialog(e)}getAddDatabaseReferenceDialog(e){return new b.AddDatabaseReferenceDialog(e)}async addTemplateFiles(e,t){if(t!==n.emptySqlDatabaseProjectTypeId&&""!==e&&t===n.edgeSqlDatabaseProjectTypeId){const t=await h.Project.openProject(e);await this.createFileFromTemplate(t,c.get(c.table),"DataTable.sql",{OBJECT_NAME:"DataTable"}),await this.createFileFromTemplate(t,c.get(c.dataSource),"EdgeHubInputDataSource.sql",{OBJECT_NAME:"EdgeHubInputDataSource",LOCATION:"edgehub://"}),await this.createFileFromTemplate(t,c.get(c.dataSource),"SqlOutputDataSource.sql",{OBJECT_NAME:"SqlOutputDataSource",LOCATION:"sqlserver://tcp:.,1433"}),await this.createFileFromTemplate(t,c.get(c.fileFormat),"StreamFileFormat.sql",{OBJECT_NAME:"StreamFileFormat"}),await this.createFileFromTemplate(t,c.get(c.externalStream),"EdgeHubInputStream.sql",{OBJECT_NAME:"EdgeHubInputStream",DATA_SOURCE_NAME:"EdgeHubInputDataSource",LOCATION:"input",OPTIONS:",\n\tFILE_FORMAT = StreamFileFormat"}),await this.createFileFromTemplate(t,c.get(c.externalStream),"SqlOutputStream.sql",{OBJECT_NAME:"SqlOutputStream",DATA_SOURCE_NAME:"SqlOutputDataSource",LOCATION:"TSQLStreaming.dbo.DataTable",OPTIONS:""}),await this.createFileFromTemplate(t,c.get(c.externalStreamingJob),"EdgeStreamingJob.sql",{OBJECT_NAME:"EdgeStreamingJob"})}}async createFileFromTemplate(e,t,r,n){const o=c.macroExpansion(t.templateScript,n);await e.addScriptItem(r,o,t.type)}getProjectFromContext(e){if("element"in e)return e.element.root.project;if(e instanceof h.Project)return e;if(e.root instanceof f.ProjectRootTreeItem)return e.root.project;throw new Error(n.unexpectedProjectContext(e.projectUri.path))}async promptForNewObjectName(e,t,r,o){const s=e.friendlyName.replace(/\s+/g,"");let c=0;do{c++}while(c<Number.MAX_SAFE_INTEGER&&await a.exists(i.join(r,`${s}${c}${o??""}`)));return await l.window.showInputBox({prompt:n.newObjectNamePrompt(e.friendlyName),value:`${s}${c}`,ignoreFocusOut:!0})}getRelativePath(e){return e instanceof m.FolderNode?a.trimUri(e.root.projectUri,e.projectUri):""}async createProjectFromDatabase(e){const t=this.getConnectionProfileFromContext(e);if(a.getAzdataApi()){let e=this.getCreateProjectFromDatabaseDialog(t);return e.createProjectFromDatabaseCallback=async e=>await this.createProjectFromDatabaseCallback(e),await e.openDialog(),e}{if(e){const r=e,n=(await a.getVscodeMssqlApi()).getDatabaseNameFromTreeNode(r);t.database=n}const r=await(0,I.createNewProjectFromDatabaseWithQuickpick)(t);return void(r&&await this.createProjectFromDatabaseCallback(r))}}getCreateProjectFromDatabaseDialog(e){return new S.CreateProjectFromDatabaseDialog(e)}async createProjectFromDatabaseCallback(e){try{const t=e.filePath,r=await this.createNewProject({newProjName:e.projName,folderUri:l.Uri.file(t),projectTypeId:e.sdkStyle?n.emptySqlDatabaseSdkProjectTypeId:n.emptySqlDatabaseProjectTypeId,sdkStyle:e.sdkStyle});e.filePath=i.dirname(r),this.setFilePath(e);const o=await h.Project.openProject(r),s=new Date;await this.createProjectFromDatabaseApiCall(e);const c=(new Date).getTime()-s.getTime();E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.createProjectFromDatabase).withAdditionalMeasurements({durationMs:c}).send();let u=1===e.extractTarget?[l.Uri.file(e.filePath)]:await this.generateList(e.filePath);e.sdkStyle||await o.addToProject(u);const p=a.getDataWorkspaceExtensionApi();p.showProjectsView(),await p.addProjectsToWorkspace([l.Uri.file(r)])}catch(e){l.window.showErrorMessage(a.getErrorMessage(e)),E.TelemetryReporter.sendErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.createProjectFromDatabase)}}setFilePath(e){1===e.extractTarget&&(e.filePath=i.join(e.filePath,`${e.projName}.sql`))}getConnectionProfileFromContext(e){if(e)return e?.connectionProfile??e.connectionInfo??e}async createProjectFromDatabaseApiCall(e){const t=await a.getDacFxService(),r=a.getAzdataApi();r?await t.createProjectFromDatabase(e.database,e.filePath,e.projName,e.version,e.connectionUri,e.extractTarget,r.TaskExecutionMode.execute):await t.createProjectFromDatabase(e.database,e.filePath,e.projName,e.version,e.connectionUri,e.extractTarget,F.execute)}async updateProjectFromDatabase(e){let t,r;try{"connectionProfile"in e&&(t=this.getConnectionProfileFromContext(e))}catch{}try{"treeDataProvider"in e&&(r=this.getProjectFromContext(e))}catch{}const n=this.getUpdateProjectFromDatabaseDialog(t,r);return n.updateProjectFromDatabaseCallback=async e=>await this.updateProjectFromDatabaseCallback(e),await n.openDialog(),n}getUpdateProjectFromDatabaseDialog(e,t){return new P.UpdateProjectFromDatabaseDialog(e,t)}async updateProjectFromDatabaseCallback(e){try{const t=new Date;await this.updateProjectFromDatabaseApiCall(e);const r=(new Date).getTime()-t.getTime();E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.updateProjectFromDatabase).withAdditionalMeasurements({durationMs:r}).send()}catch(e){l.window.showErrorMessage(a.getErrorMessage(e)),E.TelemetryReporter.sendErrorEvent(E.TelemetryViews.ProjectController,E.TelemetryActions.updateProjectFromDatabase)}}async updateProjectFromDatabaseApiCall(e){if(0===e.action)await l.commands.executeCommand(n.schemaCompareRunComparisonCommand,e.sourceEndpointInfo,e.targetEndpointInfo,!0,void 0);else{if(1!==e.action)throw new Error(`Unknown UpdateProjectAction: ${e.action}`);await l.window.showWarningMessage(n.applyConfirmation,{modal:!0},n.yesString).then((async t=>{t===n.yesString&&(await l.window.withProgress({location:l.ProgressLocation.Notification,title:n.updatingProjectFromDatabase(i.basename(e.targetEndpointInfo.projectFilePath),e.sourceEndpointInfo.databaseName),cancellable:!1},(async(t,r)=>this.schemaCompareAndUpdateProject(e.sourceEndpointInfo,e.targetEndpointInfo))),l.commands.executeCommand(n.refreshDataWorkspaceCommand),a.getDataWorkspaceExtensionApi().showProjectsView())}))}}async schemaCompareAndUpdateProject(e,t){const r=l.extensions.getExtension("Microsoft.mssql"),o=(await r.activate()).schemaCompare,i=await o.schemaCompareGetDefaultOptions(),c=s.generateUuid();t.targetScripts=await this.getProjectScriptFiles(t.projectFilePath),t.dataSchemaProvider=await this.getProjectDatabaseSchemaProvider(t.projectFilePath),E.TelemetryReporter.sendActionEvent(E.TelemetryViews.ProjectController,"SchemaComparisonStarted");const u=await o.schemaCompare(c,e,t,a.getAzdataApi().TaskExecutionMode.execute,i.defaultDeploymentOptions);if(!u||!u.success)return E.TelemetryReporter.createErrorEvent(E.TelemetryViews.ProjectController,"SchemaComparisonFailed").withAdditionalProperties({operationId:u.operationId}).send(),void await l.window.showErrorMessage(n.compareErrorMessage(u?.errorMessage));if(E.TelemetryReporter.createActionEvent(E.TelemetryViews.ProjectController,"SchemaComparisonFinished").withAdditionalProperties({endTime:Date.now().toString(),operationId:u.operationId}).send(),u.areEqual)return void l.window.showInformationMessage(n.equalComparison);const p=await this.schemaComparePublishProjectChanges(c,t.projectFilePath,t.folderStructure);p.success?l.window.showInformationMessage(n.applySuccess):l.window.showErrorMessage(n.applyError(p.errorMessage))}async generateList(e){let t=[];if(!await a.exists(e)){if(!await a.exists(e+n.sqlFileExtension))return l.window.showErrorMessage(n.cannotResolvePath(e)),t;e+=n.sqlFileExtension}const r=[e];do{const e=r.pop();if(e){const n=await p.promises.stat(e);n.isDirectory()?(t.push(l.Uri.file(e)),(await p.promises.readdir(e)).forEach((t=>r.push(i.join(e,t))))):n.isFile()&&t.push(l.Uri.file(e))}}while(0!==r.length);return t}}},774:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promptDacpacLocation=t.getSystemDatabase=t.getSystemDbOptions=t.AddDatabaseReferenceDialog=t.ReferenceType=void 0;const n=r(7549),o=r(5622),i=r(6078),a=r(1027),s=r(9799),c=r(5894),l=r(2178),u=r(1845),p=r(6742);var d;function h(e){const t=e.getProjectTargetVersion().toLowerCase();return t.includes("azure")||t.includes("dw")?[i.master]:[i.master,i.msdb]}function m(e){return e===i.master?p.SystemDatabase.master:p.SystemDatabase.msdb}async function f(){return await n.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:n.workspace.workspaceFolders?n.workspace.workspaceFolders[0].uri:void 0,openLabel:i.selectString,title:i.selectDacpac,filters:{[i.dacpacFiles]:["dacpac"]}})}!function(e){e[e.project=0]="project",e[e.systemDb=1]="systemDb",e[e.dacpac=2]="dacpac"}(d=t.ReferenceType||(t.ReferenceType={})),t.AddDatabaseReferenceDialog=class{constructor(e){this.project=e,this.toDispose=[],this.initDialogComplete=new l.Deferred,this.dialog=a.getAzdataApi().window.createModelViewDialog(i.addDatabaseReferenceDialogName,"addDatabaseReferencesDialog"),this.addDatabaseReferenceTab=a.getAzdataApi().window.createTab(i.addDatabaseReferenceDialogName),this.dialog.registerCloseValidator((async()=>this.validate()))}validate(){return this.currentReferenceType!==d.dacpac||o.parse(this.project.projectFilePath).root===o.parse(this.dacpacTextbox.value).root||(this.dialog.message={text:i.dacpacNotOnSameDrive(this.project.projectFilePath),level:a.getAzdataApi().window.MessageLevel.Error},!1)}async openDialog(){this.initializeDialog(),this.dialog.okButton.label=i.addDatabaseReferenceOkButtonText,this.dialog.okButton.enabled=!1,this.toDispose.push(this.dialog.okButton.onClick((async()=>await this.addReferenceClick()))),this.dialog.cancelButton.label=i.cancelButtonText,a.getAzdataApi().window.openDialog(this.dialog),await this.initDialogComplete.promise}dispose(){this.toDispose.forEach((e=>e.dispose()))}initializeDialog(){this.initializeTab(),this.dialog.content=[this.addDatabaseReferenceTab]}initializeTab(){this.addDatabaseReferenceTab.registerContent((async e=>{this.view=e,this.projectFormComponent=await this.createProjectDropdown();const t=this.createRadioButtons();this.systemDatabaseFormComponent=this.createSystemDatabaseDropdown(),this.dacpacFormComponent=this.createDacpacTextbox();const r=this.createLocationDropdown(),n=this.createVariableSection();this.suppressMissingDependenciesErrorsCheckbox=e.modelBuilder.checkBox().withProps({label:i.suppressMissingDependenciesErrors}).component();const o=this.createExampleUsage();this.formBuilder=e.modelBuilder.formContainer().withFormItems([{title:"",components:[t,this.currentReferenceType===d.project?this.projectFormComponent:this.systemDatabaseFormComponent,r,n,o,{component:this.suppressMissingDependenciesErrorsCheckbox}]}],{horizontal:!1}).withLayout({width:"100%"});let a=this.formBuilder.component();await e.initializeModel(a),this.updateEnabledInputBoxes(),this.currentReferenceType===d.project?await(this.projectRadioButton?.focus()):await(this.systemDatabaseRadioButton?.focus()),this.initDialogComplete.resolve()}))}async addReferenceClick(){let e;e=this.currentReferenceType===d.project?{projectName:this.projectDropdown?.value,projectGuid:"",projectRelativePath:void 0,databaseName:this.databaseNameTextbox?.value,databaseVariable:this.databaseVariableTextbox?.value,serverName:this.serverNameTextbox?.value,serverVariable:this.serverVariableTextbox?.value,suppressMissingDependenciesErrors:this.suppressMissingDependenciesErrorsCheckbox?.checked}:this.currentReferenceType===d.systemDb?{databaseName:this.databaseNameTextbox?.value,systemDb:m(this.systemDatabaseDropdown?.value),suppressMissingDependenciesErrors:this.suppressMissingDependenciesErrorsCheckbox?.checked}:{databaseName:this.databaseNameTextbox?.value,dacpacFileLocation:n.Uri.file(this.dacpacTextbox?.value),databaseVariable:a.removeSqlCmdVariableFormatting(this.databaseVariableTextbox?.value),serverName:this.serverNameTextbox?.value,serverVariable:a.removeSqlCmdVariableFormatting(this.serverVariableTextbox?.value),suppressMissingDependenciesErrors:this.suppressMissingDependenciesErrorsCheckbox?.checked},u.TelemetryReporter.createActionEvent(u.TelemetryViews.ProjectTree,u.TelemetryActions.addDatabaseReference).withAdditionalProperties({referenceType:this.currentReferenceType.toString()}).send(),await this.addReference(this.project,e),this.dispose()}createRadioButtons(){this.projectRadioButton=this.view.modelBuilder.radioButton().withProps({name:"referenceType",label:i.projectLabel}).component(),this.projectRadioButton.onDidClick((()=>{this.projectRadioButtonClick()})),this.systemDatabaseRadioButton=this.view.modelBuilder.radioButton().withProps({name:"referenceType",label:i.systemDatabase}).component(),this.systemDatabaseRadioButton.onDidClick((()=>{this.systemDbRadioButtonClick()}));const e=this.view.modelBuilder.radioButton().withProps({name:"referenceType",label:i.dacpacText}).component();return e.onDidClick((()=>{this.dacpacRadioButtonClick()})),this.projectDropdown?.values?.length?(this.projectRadioButton.checked=!0,this.currentReferenceType=d.project):(this.systemDatabaseRadioButton.checked=!0,this.currentReferenceType=d.systemDb,this.projectRadioButton.enabled=!1),{component:this.view.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this.projectRadioButton,this.systemDatabaseRadioButton,e]).withProps({ariaRole:"radiogroup"}).component(),title:i.referenceRadioButtonsGroupTitle}}projectRadioButtonClick(){this.formBuilder.removeFormItem(this.dacpacFormComponent),this.formBuilder.removeFormItem(this.systemDatabaseFormComponent),this.formBuilder.insertFormItem(this.projectFormComponent,2),this.locationDropdown.values=i.locationDropdownValues,this.currentReferenceType=d.project,this.updateEnabledInputBoxes(),this.tryEnableAddReferenceButton(),this.updateExampleUsage()}systemDbRadioButtonClick(){this.formBuilder.removeFormItem(this.dacpacFormComponent),this.formBuilder.removeFormItem(this.projectFormComponent),this.formBuilder.insertFormItem(this.systemDatabaseFormComponent,2),this.locationDropdown.values=i.systemDbLocationDropdownValues,this.locationDropdown.value=i.differentDbSameServer,this.currentReferenceType=d.systemDb,this.updateEnabledInputBoxes(),this.tryEnableAddReferenceButton(),this.updateExampleUsage()}dacpacRadioButtonClick(){this.formBuilder.removeFormItem(this.systemDatabaseFormComponent),this.formBuilder.removeFormItem(this.projectFormComponent),this.formBuilder.insertFormItem(this.dacpacFormComponent,2),this.locationDropdown.values=i.locationDropdownValues,this.currentReferenceType=d.dacpac,this.updateEnabledInputBoxes(),this.tryEnableAddReferenceButton(),this.updateExampleUsage()}async createProjectDropdown(){this.projectDropdown=this.view.modelBuilder.dropDown().withProps({ariaLabel:i.databaseProject}).component(),this.projectDropdown.onValueChanged((()=>{this.setDefaultDatabaseValues()}));let e=await a.getSqlProjectsInWorkspace();return e=e.filter((e=>e.fsPath!==this.project.projectFilePath)),this.projectDropdown.values=e.map((e=>o.parse(e.fsPath).name)),{component:this.projectDropdown,title:i.databaseProject}}createSystemDatabaseDropdown(){return this.systemDatabaseDropdown=this.view.modelBuilder.dropDown().withProps({values:h(this.project),ariaLabel:i.databaseNameLabel}).component(),this.systemDatabaseDropdown.onValueChanged((()=>{this.setDefaultDatabaseValues()})),{component:this.systemDatabaseDropdown,title:i.databaseNameLabel}}createDacpacTextbox(){this.dacpacTextbox=this.view.modelBuilder.inputBox().withProps({ariaLabel:i.dacpacText,placeHolder:i.selectDacpac,width:"400px"}).component(),this.dacpacTextbox.onTextChanged((()=>{this.setDefaultDatabaseValues(),this.tryEnableAddReferenceButton(),this.updateExampleUsage()}));const e=this.createLoadDacpacButton(),t=this.view.modelBuilder.flexContainer().withItems([this.dacpacTextbox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return t.insertItem(e,1),{component:t,title:i.dacpacText}}createLoadDacpacButton(){const e=this.view.modelBuilder.button().withProps({ariaLabel:i.selectDacpac,iconPath:c.IconPathHelper.folder_blue,height:"18px",width:"18px"}).component();return e.onDidClick((async()=>{let e=await f();e&&0!==e.length&&(this.dacpacTextbox.value=e[0].fsPath)})),e}createLocationDropdown(){return this.locationDropdown=this.view.modelBuilder.dropDown().withProps({ariaLabel:i.location,values:this.currentReferenceType===d.systemDb?i.systemDbLocationDropdownValues:i.locationDropdownValues}).component(),this.locationDropdown.value=i.differentDbSameServer,this.locationDropdown.onValueChanged((()=>{this.updateEnabledInputBoxes(),this.tryEnableAddReferenceButton(),this.updateExampleUsage()})),{component:this.locationDropdown,title:i.location}}updateEnabledInputBoxes(){const e=this.currentReferenceType===d.systemDb;this.locationDropdown?.value===i.sameDatabase?(this.databaseNameTextbox.enabled=!1,this.databaseVariableTextbox.enabled=!1,this.serverNameTextbox.enabled=!1,this.serverVariableTextbox.enabled=!1,this.databaseNameTextbox.value="",this.databaseVariableTextbox.value="",this.serverNameTextbox.value="",this.serverVariableTextbox.value=""):this.locationDropdown?.value===i.differentDbSameServer?(this.databaseNameTextbox.enabled=!0,this.databaseVariableTextbox.enabled=!e,this.serverNameTextbox.enabled=!1,this.serverVariableTextbox.enabled=!1,this.databaseVariableTextbox.value=e?"":this.databaseVariableTextbox.value,this.serverNameTextbox.value="",this.serverVariableTextbox.value="",this.setDefaultDatabaseValues()):this.locationDropdown?.value===i.differentDbDifferentServer&&(this.databaseNameTextbox.enabled=!0,this.databaseVariableTextbox.enabled=!0,this.serverNameTextbox.enabled=!0,this.serverVariableTextbox.enabled=!0,this.setDefaultDatabaseValues(),this.serverNameTextbox.value=i.otherServer,this.serverVariableTextbox.value=i.otherSeverVariable)}setDefaultDatabaseValues(){if(this.databaseNameTextbox.enabled)switch(this.currentReferenceType){case d.project:this.databaseNameTextbox.value=this.projectDropdown?.value,this.databaseVariableTextbox.value=`${this.projectDropdown?.value}`;break;case d.systemDb:this.databaseNameTextbox.value=this.systemDatabaseDropdown?.value;break;case d.dacpac:{const e=this.dacpacTextbox.value?o.parse(this.dacpacTextbox.value).name:"";this.databaseNameTextbox.value=e,this.databaseVariableTextbox.value=e?`${e}`:"";break}}}createVariableSection(){this.databaseNameTextbox=this.createInputBox(i.databaseName,!0,!0);const e=this.view.modelBuilder.flexContainer().withItems([this.createLabel(i.databaseName,!0),this.databaseNameTextbox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignItems:"center"}).component();this.databaseVariableTextbox=this.createInputBox(i.databaseVariable,!1,!1);const t=this.view.modelBuilder.flexContainer().withItems([this.createLabel(i.databaseVariable),this.databaseVariableTextbox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignItems:"center"}).component();this.serverNameTextbox=this.createInputBox(i.serverName,!1,!0);const r=this.view.modelBuilder.flexContainer().withItems([this.createLabel(i.serverName,!0),this.serverNameTextbox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignItems:"center"}).component();this.serverVariableTextbox=this.createInputBox(i.serverVariable,!1,!0);const n=this.view.modelBuilder.flexContainer().withItems([this.createLabel(i.serverVariable,!0),this.serverVariableTextbox],{flex:"0 0 auto"}).withLayout({flexFlow:"row",alignItems:"center"}).component(),o=this.view.modelBuilder.flexContainer().withItems([e,t,r,n]).withLayout({flexFlow:"column"}).withProps({CSSStyles:{"margin-bottom":"25px"}}).component();return this.setDefaultDatabaseValues(),{component:o,title:""}}createLabel(e,t=!1){return this.view.modelBuilder.text().withProps({value:e,width:s.cssStyles.addDatabaseReferenceDialogLabelWidth,requiredIndicator:t}).component()}createInputBox(e,t,r){const n=this.view.modelBuilder.inputBox().withProps({ariaLabel:e,enabled:t,width:s.cssStyles.addDatabaseReferenceInputboxWidth,required:r}).component();return n.onTextChanged((()=>{this.tryEnableAddReferenceButton(),this.updateExampleUsage()})),n}createExampleUsage(){return this.exampleUsage=this.view.modelBuilder.text().withProps({value:this.currentReferenceType===d.project?i.databaseNameRequiredVariableOptional:i.systemDatabaseReferenceRequired,CSSStyles:{"user-select":"text"}}).component(),{component:this.view.modelBuilder.flexContainer().withItems([this.exampleUsage],{CSSStyles:{width:"415px",height:"80px",padding:"0 10px",border:"1px solid #8a8886","font-style":"italic"}}).component(),title:i.exampleUsage}}updateExampleUsage(){let e="",t=s.cssStyles.fontStyle.normal;switch(this.locationDropdown.value){case i.sameDatabase:e=i.sameDatabaseExampleUsage;break;case i.differentDbSameServer:if(this.databaseNameTextbox?.value){const t=this.databaseVariableTextbox?.value?a.formatSqlCmdVariable(this.databaseVariableTextbox?.value):this.databaseNameTextbox.value;e=i.differentDbSameServerExampleUsage(t)}else e=this.currentReferenceType===d.systemDb?i.enterSystemDbName:i.databaseNameRequiredVariableOptional,t=s.cssStyles.fontStyle.italics;break;case i.differentDbDifferentServer:if(this.databaseNameTextbox?.value&&this.serverNameTextbox?.value&&this.serverVariableTextbox?.value){const t=a.formatSqlCmdVariable(this.serverVariableTextbox.value),r=this.databaseVariableTextbox?.value?a.formatSqlCmdVariable(this.databaseVariableTextbox?.value):this.databaseNameTextbox.value;e=i.differentDbDifferentServerExampleUsage(t,r)}else e=i.databaseNameServerNameVariableRequired,t=s.cssStyles.fontStyle.italics}if(!this.validSqlCmdVariables()){let t=a.isValidSqlCmdVariableName(this.databaseVariableTextbox?.value)?this.serverVariableTextbox.value:this.databaseVariableTextbox.value;t=a.removeSqlCmdVariableFormatting(t),e=i.notValidVariableName(t)}this.exampleUsage.value=e,this.exampleUsage?.updateCssStyles({"font-style":t})}validSqlCmdVariables(){return!(this.databaseVariableTextbox?.enabled&&this.databaseVariableTextbox?.value&&!a.isValidSqlCmdVariableName(this.databaseVariableTextbox?.value)||this.serverVariableTextbox?.enabled&&this.serverVariableTextbox?.value&&!a.isValidSqlCmdVariableName(this.serverVariableTextbox?.value))}tryEnableAddReferenceButton(){switch(this.currentReferenceType){case d.project:this.dialog.okButton.enabled=this.projectRequiredFieldsFilled();break;case d.systemDb:this.dialog.okButton.enabled=!!this.databaseNameTextbox?.value;break;case d.dacpac:this.dialog.okButton.enabled=this.dacpacRequiredFieldsFilled()}}dacpacRequiredFieldsFilled(){return!!this.dacpacTextbox?.value&&this.validSqlCmdVariables()&&(this.locationDropdown?.value===i.sameDatabase||this.locationDropdown?.value===i.differentDbSameServer&&this.differentDatabaseSameServerRequiredFieldsFilled()||this.locationDropdown?.value===i.differentDbDifferentServer&&this.differentDatabaseDifferentServerRequiredFieldsFilled())}projectRequiredFieldsFilled(){return!!this.projectDropdown?.value&&(this.locationDropdown?.value===i.sameDatabase||this.locationDropdown?.value===i.differentDbSameServer&&this.differentDatabaseSameServerRequiredFieldsFilled()||this.locationDropdown?.value===i.differentDbDifferentServer&&this.differentDatabaseDifferentServerRequiredFieldsFilled())}differentDatabaseSameServerRequiredFieldsFilled(){return!!this.databaseNameTextbox?.value}differentDatabaseDifferentServerRequiredFieldsFilled(){return!!this.databaseNameTextbox?.value&&!!this.serverNameTextbox?.value&&!!this.serverVariableTextbox?.value}},t.getSystemDbOptions=h,t.getSystemDatabase=m,t.promptDacpacLocation=f},9859:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addDatabaseReferenceQuickpick=void 0;const n=r(5622),o=r(7549),i=r(6078),a=r(1027),s=r(774);async function c(){return o.window.showQuickPick(i.locationDropdownValues,{title:i.location,ignoreFocusOut:!0})}async function l(e){return o.window.showInputBox({title:i.databaseName,value:e,validateInput:e=>e?void 0:i.nameMustNotBeEmpty,ignoreFocusOut:!0})}async function u(){return await o.window.showQuickPick([i.noStringDefault,i.yesString],{title:i.suppressMissingDependenciesErrors,ignoreFocusOut:!0})===i.yesString}async function p(e,t){const r={};if(e!==i.sameDatabase){const e=await l(t);if(!e)return;r.dbName=e;const n=await async function(e){return await o.window.showInputBox({title:i.databaseVariable,value:e,validateInput:e=>(0,a.isValidSqlCmdVariableName)(e)?"":i.notValidVariableName(e),ignoreFocusOut:!0})??""}(e);r.dbVariable=n}if(e===i.differentDbDifferentServer){const e=await async function(){return o.window.showInputBox({title:i.serverName,value:i.otherServer,validateInput:e=>e?void 0:i.nameMustNotBeEmpty,ignoreFocusOut:!0})}();if(!e)return;r.serverName=e;const t=await async function(){return await o.window.showInputBox({title:i.serverVariable,value:i.otherSeverVariable,validateInput:e=>(0,a.isValidSqlCmdVariableName)(e)?"":i.notValidVariableName(e),ignoreFocusOut:!0})??""}();if(!t)return;r.serverVariable=t}return r}t.addDatabaseReferenceQuickpick=async function(e){const t=(await(0,a.getSqlProjectsInWorkspace)()).filter((t=>t.fsPath!==e.projectFilePath)),r=t.length>0?[i.projectLabel,i.systemDatabase,i.dacpacText]:[i.systemDatabase,i.dacpacText],d=await o.window.showQuickPick(r,{title:i.referenceType,ignoreFocusOut:!0});if(d)switch(d){case i.projectLabel:return async function(e){const t=e.map((e=>({label:n.parse(e.fsPath).name,uri:e}))),r=await o.window.showQuickPick(t,{title:i.databaseProject,ignoreFocusOut:!0});if(!r)return;const a=await c();if(!a)return;const s={projectName:r.label,projectGuid:"",projectRelativePath:void 0,databaseName:void 0,databaseVariable:void 0,serverName:void 0,serverVariable:void 0,suppressMissingDependenciesErrors:!1},l=await p(a,r.label);if(!l)return;s.databaseName=l.dbName,s.databaseVariable=l.dbVariable,s.serverName=l.serverName,s.serverVariable=l.serverVariable;const d=await u();return s.suppressMissingDependenciesErrors=d,s}(t);case i.systemDatabase:return async function(e){const t=await o.window.showQuickPick((0,s.getSystemDbOptions)(e),{title:i.systemDatabase,ignoreFocusOut:!0});if(!t)return;const r=await l(t),n=await u();return{databaseName:r,systemDb:(0,s.getSystemDatabase)(t),suppressMissingDependenciesErrors:n}}(e);case i.dacpacText:return async function(){const e=await c();if(!e)return;if(!await o.window.showQuickPick([i.browseEllipsisWithIcon],{title:i.selectDacpac,ignoreFocusOut:!0}))return;const t=(await(0,s.promptDacpacLocation)())?.[0];if(!t)return;const r=await p(e,n.parse(t.fsPath).name);if(!r)return;const l=await u();return{databaseName:r.dbName,dacpacFileLocation:t,databaseVariable:(0,a.removeSqlCmdVariableFormatting)(r.dbVariable),serverName:r.serverName,serverVariable:(0,a.removeSqlCmdVariableFormatting)(r.serverVariable),suppressMissingDependenciesErrors:l}}();default:return void console.log(`Unknown reference type ${d}`)}}},3437:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mapExtractTargetEnum=t.CreateProjectFromDatabaseDialog=void 0;const n=r(7549),o=r(6078),i=r(2527),a=r(5622),s=r(5894),c=r(9799),l=r(2178),u=r(2935),p=r(1027);function d(e){if(!e)throw new Error(o.extractTargetRequired);switch(e){case o.file:return 1;case o.flat:return 2;case o.objectType:return 3;case o.schema:return 4;case o.schemaObjectType:return 5;default:throw new Error(o.invalidInput(e))}}t.CreateProjectFromDatabaseDialog=class{constructor(e){this.profile=e,this.toDispose=[],this.initDialogComplete=new l.Deferred,this.dialog=(0,p.getAzdataApi)().window.createModelViewDialog(o.createProjectFromDatabaseDialogName,"createProjectFromDatabaseDialog"),this.createProjectFromDatabaseTab=(0,p.getAzdataApi)().window.createTab(o.createProjectFromDatabaseDialogName),this.dialog.registerCloseValidator((async()=>this.validate()))}async openDialog(){this.initializeDialog(),this.dialog.okButton.label=o.createProjectDialogOkButtonText,this.dialog.okButton.enabled=!1,this.toDispose.push(this.dialog.okButton.onClick((async()=>await this.handleCreateButtonClick()))),this.dialog.cancelButton.label=o.cancelButtonText,(0,p.getAzdataApi)().window.openDialog(this.dialog),await this.initDialogComplete.promise,this.profile&&await this.updateConnectionComponents((0,u.getConnectionName)(this.profile),this.profile.id,this.profile.databaseName),this.tryEnableCreateButton()}dispose(){this.toDispose.forEach((e=>e.dispose()))}initializeDialog(){this.initializeCreateProjectFromDatabaseTab(),this.dialog.content=[this.createProjectFromDatabaseTab]}initializeCreateProjectFromDatabaseTab(){this.createProjectFromDatabaseTab.registerContent((async e=>{const t=this.createConnectionRow(e),r=this.createDatabaseRow(e),n=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();n.addItems([t,r]);const i=this.createProjectNameRow(e),a=this.createProjectLocationRow(e),s=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();s.addItems([i,a]);const l=this.createFolderStructureRow(e),u=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();u.addItems([l]),this.sdkStyleCheckbox=e.modelBuilder.checkBox().withProps({checked:!0,label:o.sdkStyleProject}).component();const p=e.modelBuilder.hyperlink().withProps({label:o.learnMore,url:o.sdkLearnMoreUrl}).component(),d=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",alignItems:"baseline"}).withItems([this.sdkStyleCheckbox,p],{CSSStyles:{flex:"0 0 auto","margin-right":"10px"}}).component();this.formBuilder=e.modelBuilder.formContainer().withFormItems([{title:o.sourceDatabase,components:[{component:n}]},{title:o.targetProject,components:[{component:s}]},{title:o.createProjectSettings,components:[{component:u},{component:d}]}],{horizontal:!1,titleFontSize:c.cssStyles.titleFontSize}).withLayout({width:"100%",padding:"10px 10px 0 20px"});let h=this.formBuilder.component();await e.initializeModel(h),await(this.selectConnectionButton?.focus()),this.initDialogComplete?.resolve()}))}createConnectionRow(e){const t=this.createSourceConnectionComponent(e),r=this.createSelectConnectionButton(e),n=e.modelBuilder.text().withProps({value:o.server,requiredIndicator:!0,width:c.cssStyles.createProjectFromDatabaseLabelWidth}).component(),i=e.modelBuilder.flexContainer().withItems([n,t],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-5px","margin-top":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return i.addItem(r,{CSSStyles:{"margin-right":"0px","margin-bottom":"-5px","margin-top":"-10px"}}),i}createDatabaseRow(e){this.sourceDatabaseDropDown=e.modelBuilder.dropDown().withProps({ariaLabel:o.databaseNameLabel,required:!0,width:c.cssStyles.createProjectFromDatabaseTextboxWidth}).component(),this.sourceDatabaseDropDown.onValueChanged((()=>{this.setProjectName(),this.tryEnableCreateButton()}));const t=e.modelBuilder.text().withProps({value:o.databaseNameLabel,requiredIndicator:!0,width:c.cssStyles.createProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([t,this.sourceDatabaseDropDown],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}setProjectName(){this.projectNameTextBox.value=i.defaultProjectNameFromDb(this.sourceDatabaseDropDown.value)}createSourceConnectionComponent(e){return this.sourceConnectionTextBox=e.modelBuilder.inputBox().withProps({value:"",placeHolder:o.selectConnection,width:c.cssStyles.createProjectFromDatabaseTextboxWidth,enabled:!1}).component(),this.sourceConnectionTextBox.onTextChanged((()=>{this.tryEnableCreateButton()})),this.sourceConnectionTextBox}createSelectConnectionButton(e){return this.selectConnectionButton=e.modelBuilder.button().withProps({ariaLabel:o.selectConnection,iconPath:s.IconPathHelper.selectConnection,height:"16px",width:"16px"}).component(),this.selectConnectionButton.onDidClick((async()=>{let e,t=await(0,p.getAzdataApi)().connection.openConnectionDialog();this.connectionId=t.connectionId,e=(0,u.getConnectionName)(t),await this.updateConnectionComponents(e,this.connectionId,t.options.database)})),this.selectConnectionButton}async updateConnectionComponents(e,t,r){if(this.sourceConnectionTextBox.value=e,this.sourceConnectionTextBox.updateProperty("title",e),t){let e;this.sourceDatabaseDropDown.loading=!0;try{e=(await(0,p.getAzdataApi)().connection.listDatabases(t)).filter((e=>!o.systemDbs.includes(e)))}catch(t){e=[r],console.warn(t)}this.sourceDatabaseDropDown.values=e,this.sourceDatabaseDropDown.loading=!1,this.connectionId=t}r&&r!==o.master&&(this.sourceDatabaseDropDown.value=r),this.selectConnectionButton.iconPath=s.IconPathHelper.connect}createProjectNameRow(e){this.projectNameTextBox=e.modelBuilder.inputBox().withProps({ariaLabel:o.projectNamePlaceholderText,placeHolder:o.projectNamePlaceholderText,required:!0,width:c.cssStyles.createProjectFromDatabaseTextboxWidth}).component(),this.projectNameTextBox.onTextChanged((()=>{this.projectNameTextBox.value=this.projectNameTextBox.value?.trim(),this.projectNameTextBox.updateProperty("title",this.projectNameTextBox.value),this.tryEnableCreateButton()}));const t=e.modelBuilder.text().withProps({value:o.projectNameLabel,requiredIndicator:!0,width:c.cssStyles.createProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([t,this.projectNameTextBox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-5px","margin-top":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}createProjectLocationRow(e){const t=this.createBrowseFolderButton(e);this.projectLocationTextBox=e.modelBuilder.inputBox().withProps({value:"",ariaLabel:o.location,placeHolder:o.projectLocationPlaceholderText,width:c.cssStyles.createProjectFromDatabaseTextboxWidth}).component(),this.projectLocationTextBox.onTextChanged((()=>{this.projectLocationTextBox.updateProperty("title",this.projectLocationTextBox.value),this.tryEnableCreateButton()}));const r=e.modelBuilder.text().withProps({value:o.location,requiredIndicator:!0,width:c.cssStyles.createProjectFromDatabaseLabelWidth}).component(),n=e.modelBuilder.flexContainer().withItems([r,this.projectLocationTextBox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return n.addItem(t,{CSSStyles:{"margin-right":"0px","margin-bottom":"-10px"}}),n}createBrowseFolderButton(e){const t=e.modelBuilder.button().withProps({ariaLabel:o.browseButtonText,iconPath:s.IconPathHelper.folder_blue,height:"18px",width:"18px"}).component();return t.onDidClick((async()=>{let e=await n.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:o.selectString,defaultUri:i.defaultProjectSaveLocation()});e&&0!==e.length&&(this.projectLocationTextBox.value=e[0].fsPath,this.projectLocationTextBox.updateProperty("title",e[0].fsPath))})),t}createFolderStructureRow(e){this.folderStructureDropDown=e.modelBuilder.dropDown().withProps({values:[o.file,o.flat,o.objectType,o.schema,o.schemaObjectType],value:o.schemaObjectType,ariaLabel:o.folderStructureLabel,required:!0,width:c.cssStyles.createProjectFromDatabaseTextboxWidth}).component(),this.folderStructureDropDown.onValueChanged((()=>{this.tryEnableCreateButton()}));const t=e.modelBuilder.text().withProps({value:o.folderStructureLabel,requiredIndicator:!0,width:c.cssStyles.createProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([t,this.folderStructureDropDown],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-top":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}tryEnableCreateButton(){this.sourceConnectionTextBox.value&&this.sourceDatabaseDropDown.value&&this.projectNameTextBox.value&&this.projectLocationTextBox.value?this.dialog.okButton.enabled=!0:this.dialog.okButton.enabled=!1}async handleCreateButtonClick(){const e=(0,p.getAzdataApi)(),t={connectionUri:await e.connection.getUriForConnection(this.connectionId),database:this.sourceDatabaseDropDown.value,projName:this.projectNameTextBox.value,filePath:this.projectLocationTextBox.value,version:"1.0.0.0",extractTarget:d(this.folderStructureDropDown.value),sdkStyle:this.sdkStyleCheckbox?.checked};e.window.closeDialog(this.dialog),await this.createProjectFromDatabaseCallback(t),this.dispose()}async validate(){try{return await(0,p.exists)(this.projectLocationTextBox.value)?await(0,p.exists)(a.join(this.projectLocationTextBox.value,this.projectNameTextBox.value))?(this.showErrorMessage(o.ProjectDirectoryAlreadyExistError(this.projectNameTextBox.value,this.projectLocationTextBox.value)),!1):!1!==await(0,p.getDataWorkspaceExtensionApi)().validateWorkspace():(this.showErrorMessage(o.ProjectParentDirectoryNotExistError(this.projectLocationTextBox.value)),!1)}catch(e){return this.showErrorMessage(e?.message?e.message:e),!1}}showErrorMessage(e){this.dialog.message={text:e,level:(0,p.getAzdataApi)().window.MessageLevel.Error}}},t.mapExtractTargetEnum=d},9108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createNewProjectFromDatabaseWithQuickpick=void 0;const n=r(7549),o=r(5622),i=r(6078),a=r(1027),s=r(2527),c=r(3437);t.createNewProjectFromDatabaseWithQuickpick=async function(e){const t=await(0,a.getVscodeMssqlApi)();let r=e??await t.promptForConnection(!0);if(!r)return;let l,u="";for(;!l;)try{u=await t.connect(r),l=(await t.listDatabases(u)).filter((e=>!i.systemDbs.includes(e)))}catch(e){if(r=await t.promptForConnection(!0),!r)return}if(r.database&&r.database!==i.master){const e=l.indexOf(r.database);e>=0&&l.splice(e,1),l.unshift(r.database)}const p=await n.window.showQuickPick(l,{title:i.selectDatabase,ignoreFocusOut:!0});if(!p)return;const d=await n.window.showInputBox({title:i.projectNamePlaceholderText,value:(0,s.defaultProjectNameFromDb)(p),validateInput:e=>e?void 0:i.nameMustNotBeEmpty,ignoreFocusOut:!0});if(!d)return;const h=(0,s.defaultProjectSaveLocation)(),m=[i.browseEllipsisWithIcon];h&&m.push(h.fsPath);let f="",g=i.projectLocationPlaceholderText;for(;;){const e=await n.window.showQuickPick(m,{title:g,ignoreFocusOut:!0});if(!e)return;if(e===i.browseEllipsisWithIcon){const e=await n.window.showOpenDialog({canSelectFiles:!1,canSelectFolders:!0,canSelectMany:!1,openLabel:i.selectString,title:i.selectProjectLocation,defaultUri:h});if(!e){g=i.projectLocationPlaceholderText;continue}f=e[0].fsPath}else f=e;if(!await(0,a.exists)(o.join(f,d)))break;g=i.folderAlreadyExistsChooseNewLocation(d)}const y=await n.window.showQuickPick([i.file,i.flat,i.objectType,i.schema,i.schemaObjectType],{title:i.selectFolderStructure,ignoreFocusOut:!0});return y?{connectionUri:u,database:p,projName:d,filePath:f,version:"1.0.0.0",extractTarget:(0,c.mapExtractTargetEnum)(y),sdkStyle:!1}:void 0}},7978:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchPublishToDockerContainerQuickpick=t.launchDeployAppIntegrationQuickpick=void 0;const n=r(7549),o=r(6078),i=r(1027),a=r(2935),s=r(5736),c=r(3773),l=r(5622),u=r(5674);t.launchDeployAppIntegrationQuickpick=async function(e){let t="";const r=l.join(e.projectFolderPath,o.azureFunctionLocalSettingsFileName),a=await u.pathExists(r);if(a){let e={},r={placeHolder:o.appSettingPrompt};e[o.yesString]=!0,e[o.noString]=!1;let a=await n.window.showQuickPick(Object.keys(e).map((e=>({label:e}))),r);if(!a)return;if(void 0!==a&&e[a.label]&&(t=await n.window.showInputBox({title:o.enterConnectionStringEnvName,ignoreFocusOut:!0,value:o.defaultConnectionStringEnvVarName,validateInput:e=>i.isEmptyString(e)?o.valueCannotBeEmpty:void 0,placeHolder:o.enterConnectionStringEnvNameDescription}),!t))return}return{envVariableName:t,appSettingFile:a?r:void 0,appSettingType:a?s.AppSettingType.AzureFunction:s.AppSettingType.None}},t.launchPublishToDockerContainerQuickpick=async function(e){const t=a.getPublishServerName(e.getProjectTargetVersion());let r,s=await n.window.showInputBox({title:o.enterPortNumber(t),ignoreFocusOut:!0,value:o.defaultPortNumber,validateInput:e=>i.validateSqlServerPortNumber(e)?void 0:o.portMustBeNumber});if(!s)return;let l="";if(l=await n.window.showInputBox({title:o.enterPassword(t),ignoreFocusOut:!0,value:l,validateInput:e=>i.isValidSQLPassword(e)?void 0:o.invalidSQLPasswordMessage(t),password:!0}),!l)return;let u="";if(u=await n.window.showInputBox({title:o.confirmPassword(t),ignoreFocusOut:!0,value:u,validateInput:e=>e!==l?o.passwordNotMatch(t):void 0,password:!0}),!u)return;const p=a.getDockerBaseImages(e.getProjectTargetVersion()),d=await n.window.showQuickPick(p.map((e=>e.displayName)),{title:o.selectBaseImage(t),ignoreFocusOut:!0});if(!d)return;const h=p.find((e=>e.displayName===d));if(!await async function(e){let t=!1;const r=e?.agreementInfo;if(r){const e={iconPath:new n.ThemeIcon("link-external"),tooltip:o.openEulaString},i=n.window.createQuickPick();i.items=[{label:o.yesString},{label:o.noString}],i.title=a.getAgreementDisplayText(r),i.ignoreFocusOut=!0,i.buttons=[e];const s=[];try{const e=new Promise((e=>{s.push(i.onDidHide((()=>{e(!1)})),i.onDidTriggerButton((async()=>{await n.env.openExternal(n.Uri.parse(r.link.url))})),i.onDidChangeSelection((t=>{e(t[0].label===o.yesString)})))}));i.show(),t=await e,i.hide()}finally{s.forEach((e=>e.dispose()))}return t}return!1}(h))return;r={serverName:o.defaultLocalServerName,userName:o.defaultLocalServerAdminName,dbName:e.projectFileName,password:l,port:+s,dockerBaseImage:h?.name||"",dockerBaseImageEula:h?.agreementInfo?.link?.url||""};let m=await(0,c.getPublishDatabaseSettings)(e,!1);return m?(m.serverName=r.serverName,r.dbName=m.databaseName,{localDbSetting:r,deploySettings:m}):void 0}},5444:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promptForPublishProfile=t.PublishDatabaseDialog=void 0;const n=r(7549),o=r(6078),i=r(1027),a=r(6502),s=r(5894),c=r(9799),l=r(2935),u=r(1845),p=r(2178);function d(e){return n.window.showOpenDialog({title:o.selectProfile,canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,defaultUri:n.Uri.file(e),filters:{[o.publishSettingsFiles]:["publish.xml"]}})}t.PublishDatabaseDialog=class{constructor(e){this.project=e,this.existingServerSelected=!0,this.profileUsed=!1,this.completionPromise=new p.Deferred,this.toDispose=[],this.dialog=i.getAzdataApi().window.createModelViewDialog(o.publishDialogName,"sqlProjectPublishDialog"),this.toDispose.push(this.dialog.onClosed((e=>this.completionPromise.resolve()))),this.publishTab=i.getAzdataApi().window.createTab(o.publishDialogName)}openDialog(){this.initializeDialog(),this.dialog.okButton.label=o.publish,this.dialog.okButton.enabled=!1,this.toDispose.push(this.dialog.okButton.onClick((async()=>await this.publishClick()))),this.dialog.cancelButton.label=o.cancelButtonText;let e=i.getAzdataApi().window.createButton(o.generateScriptButtonText);this.toDispose.push(e.onClick((async()=>await this.generateScriptClick()))),e.enabled=!1,this.dialog.customButtons=[],this.dialog.customButtons.push(e),i.getAzdataApi().window.openDialog(this.dialog)}set publishToExistingServer(e){this.existingServerSelected=e}waitForClose(){return this.completionPromise.promise}dispose(){this.toDispose.forEach((e=>e.dispose()))}initializeDialog(){this.initializePublishTab(),this.dialog.content=[this.publishTab]}initializePublishTab(){this.publishTab.registerContent((async e=>{const t=this.createPublishTypeRadioButtons(e);this.createRadioButtons(e),this.createLocalDbInfoRow(e),this.dataSourcesFormComponent=this.createDataSourcesFormComponent(e),this.sqlCmdVariablesTable=this.createSqlCmdTable(e),this.loadSqlCmdVarsButton=this.createLoadSqlCmdVarsButton(e),this.sqlCmdVariablesFormComponentGroup={components:[{title:"",component:this.loadSqlCmdVarsButton},{title:"",component:this.sqlCmdVariablesTable}],title:o.sqlCmdVariables};const r=this.createProfileRow(e);this.connectionRow=this.createConnectionRow(e),this.databaseRow=this.createDatabaseRow(e);const n=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();n.addItems([r,this.databaseRow]),this.formBuilder=e.modelBuilder.formContainer().withFormItems([{title:"",components:[{component:t,title:""},{component:this.connectionRow,title:""},{component:n,title:""}]}],{horizontal:!1,titleFontSize:c.cssStyles.titleFontSize}).withLayout({width:"100%"}),Object.keys(this.project.sqlCmdVariables).length>0&&this.formBuilder.addFormItem(this.sqlCmdVariablesFormComponentGroup);let i=this.formBuilder.component();await e.initializeModel(i)}))}async getConnectionUri(){try{let e;if(this.connectionIsDataSource){const t=this.dataSourcesDropDown.value.dataSource,r=t.getConnectionProfile();e=t.integratedSecurity?(await i.getAzdataApi().connection.connect(r,!1,!1)).connectionId:(await i.getAzdataApi().connection.openConnectionDialog(void 0,r)).connectionId}else{if(!this.connectionId)throw new Error("Connection not defined.");e=this.connectionId}return await i.getAzdataApi().connection.getUriForConnection(e)}catch(e){throw new Error(o.unableToCreatePublishConnection+": "+i.getErrorMessage(e))}}async publishClick(){if(this.existingServerSelected){const e={databaseName:this.targetDatabaseName,serverName:this.getServerName(),connectionUri:await this.getConnectionUri(),sqlCmdVariables:this.getSqlCmdVariablesForPublish(),deploymentOptions:await this.getDeploymentOptions(),profileUsed:this.profileUsed};i.getAzdataApi().window.closeDialog(this.dialog),await this.publish(this.project,e)}else{const e=this.getBaseDockerImageName(),t=(0,l.getDockerBaseImages)(this.project.getProjectTargetVersion()).find((t=>t.name===e)),r={localDbSetting:{dbName:this.targetDatabaseName,dockerBaseImage:e,dockerBaseImageEula:t?.agreementInfo?.link?.url||"",password:this.serverAdminPasswordTextBox?.value||"",port:+(this.serverPortTextBox?.value||o.defaultPortNumber),serverName:o.defaultLocalServerName,userName:o.defaultLocalServerAdminName},deploySettings:{databaseName:this.targetDatabaseName,serverName:o.defaultLocalServerName,connectionUri:"",sqlCmdVariables:this.getSqlCmdVariablesForPublish(),deploymentOptions:await this.getDeploymentOptions(),profileUsed:this.profileUsed}};i.getAzdataApi().window.closeDialog(this.dialog),await this.publishToContainer(this.project,r)}this.dispose()}async generateScriptClick(){u.TelemetryReporter.sendActionEvent(u.TelemetryViews.SqlProjectPublishDialog,u.TelemetryActions.generateScriptClicked);const e=this.getSqlCmdVariablesForPublish(),t={databaseName:this.targetDatabaseName,serverName:this.getServerName(),connectionUri:await this.getConnectionUri(),sqlCmdVariables:e,deploymentOptions:await this.getDeploymentOptions(),profileUsed:this.profileUsed};i.getAzdataApi().window.closeDialog(this.dialog),await(this.generateScript?.(this.project,t)),this.dispose()}async getDeploymentOptions(){return this.deploymentOptions||(this.deploymentOptions=await i.getDefaultPublishDeploymentOptions(this.project)),this.deploymentOptions}getSqlCmdVariablesForPublish(){return{...this.sqlCmdVars}}get targetDatabaseName(){return this.existingServerSelected?this.targetDatabaseDropDown?.value??"":this.targetDatabaseTextBox?.value||""}set targetDatabaseName(e){this.targetDatabaseDropDown.values=[],this.targetDatabaseDropDown.values?.push(e),this.targetDatabaseDropDown.value=e,this.targetDatabaseTextBox&&(this.targetDatabaseTextBox.value=e)}getBaseDockerImageName(){return this.baseDockerImageDropDown?.value?.name??""}getDefaultDatabaseName(){return this.project.projectFileName}getServerName(){return this.serverName}createRadioButtons(e){return this.connectionsRadioButton=e.modelBuilder.radioButton().withProps({name:"connection",label:o.connectionRadioButtonLabel}).component(),this.connectionsRadioButton.checked=!0,this.connectionsRadioButton.onDidClick((()=>{this.formBuilder.removeFormItem(this.dataSourcesFormComponent),this.connectionIsDataSource=!1,this.targetDatabaseDropDown.value=this.getDefaultDatabaseName()})),this.dataSourcesRadioButton=e.modelBuilder.radioButton().withProps({name:"connection",label:o.dataSourceRadioButtonLabel}).component(),this.dataSourcesRadioButton.onDidClick((()=>{this.formBuilder.insertFormItem(this.dataSourcesFormComponent,2),this.connectionIsDataSource=!0,this.setDatabaseToSelectedDataSourceDatabase()})),e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this.connectionsRadioButton,this.dataSourcesRadioButton]).withProps({ariaRole:"radiogroup"}).component()}createPublishTypeRadioButtons(e){const t=(0,l.getPublishServerName)(this.project.getProjectTargetVersion()),r=e.modelBuilder.text().withProps({value:o.publishTo,width:c.cssStyles.publishDialogLabelWidth}).component();this.existingServerRadioButton=e.modelBuilder.radioButton().withProps({name:"publishType",label:o.publishToExistingServer(t)}).component(),this.existingServerRadioButton.checked=!0,this.existingServerRadioButton.onDidChangeCheckedState((t=>{this.onPublishTypeChange(t,e)})),this.dockerServerRadioButton=e.modelBuilder.radioButton().withProps({name:"publishType",label:o.publishToDockerContainer(t)}).component(),this.dockerServerRadioButton.onDidChangeCheckedState((t=>{this.onPublishTypeChange(!t,e)}));const n=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this.existingServerRadioButton,this.dockerServerRadioButton]).withProps({ariaRole:"radiogroup"}).component();return e.modelBuilder.flexContainer().withLayout({flexFlow:"row",alignItems:"baseline"}).withItems([r,n],{CSSStyles:{flex:"0 0 auto","margin-right":"10px"}}).component()}onPublishTypeChange(e,t){this.existingServerSelected=e,this.createDatabaseRow(t),this.tryEnableGenerateScriptAndOkButtons(),e?(this.connectionRow&&this.formBuilder.insertFormItem({title:"",component:this.connectionRow},2),this.localDbSection&&this.formBuilder.removeFormItem({title:"",component:this.localDbSection})):(this.connectionRow&&this.formBuilder.removeFormItem({title:"",component:this.connectionRow}),this.localDbSection&&this.formBuilder.insertFormItem({title:"",component:this.localDbSection},2))}createTargetConnectionComponent(e){return this.targetConnectionTextBox=e.modelBuilder.inputBox().withProps({value:"",ariaLabel:o.targetConnectionLabel,placeHolder:o.selectConnection,width:c.cssStyles.publishDialogTextboxWidth,enabled:!1}).component(),this.targetConnectionTextBox.onTextChanged((()=>{this.tryEnableGenerateScriptAndOkButtons()})),this.targetConnectionTextBox}createDataSourcesFormComponent(e){if(this.project.dataSources.length>0)return this.createDataSourcesDropdown(e);{const t=e.modelBuilder.text().withProps({value:o.noDataSourcesText}).component();return{title:o.dataSourceDropdownTitle,component:t}}}createDataSourcesDropdown(e){let t=[];return this.project.dataSources.filter((e=>e instanceof a.SqlConnectionDataSource)).forEach((e=>{const r=e.database,n=`${e.name}`;t.push({displayName:n,name:e.name,dataSource:e,database:r})})),this.dataSourcesDropDown=e.modelBuilder.dropDown().withProps({values:t}).component(),this.dataSourcesDropDown.onValueChanged((()=>{this.setDatabaseToSelectedDataSourceDatabase(),this.tryEnableGenerateScriptAndOkButtons()})),{title:o.dataSourceDropdownTitle,component:this.dataSourcesDropDown}}setDatabaseToSelectedDataSourceDatabase(){this.dataSourcesDropDown.value?.database&&(this.targetDatabaseDropDown.value=this.dataSourcesDropDown.value.database)}createProfileRow(e){const t=this.createLoadProfileButton(e);this.loadProfileTextBox=e.modelBuilder.inputBox().withProps({placeHolder:o.loadProfilePlaceholderText,ariaLabel:o.profile,width:c.cssStyles.publishDialogTextboxWidth}).component();const r=e.modelBuilder.text().withProps({value:o.profile,width:c.cssStyles.publishDialogLabelWidth}).component(),n=e.modelBuilder.flexContainer().withItems([r,this.loadProfileTextBox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return n.insertItem(t,2,{CSSStyles:{"margin-right":"0px"}}),n}createConnectionRow(e){this.targetConnectionTextBox=this.createTargetConnectionComponent(e);const t=this.createSelectConnectionButton(e),r=e.modelBuilder.text().withProps({value:o.server,requiredIndicator:!0,width:c.cssStyles.publishDialogLabelWidth}).component(),n=e.modelBuilder.flexContainer().withItems([r,this.targetConnectionTextBox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return n.insertItem(t,2,{CSSStyles:{"margin-right":"0px"}}),n}createLocalDbInfoRow(e){const t=(0,l.getPublishServerName)(this.project.getProjectTargetVersion());this.serverPortTextBox=e.modelBuilder.inputBox().withProps({value:o.defaultPortNumber,ariaLabel:o.serverPortNumber(t),placeHolder:o.serverPortNumber(t),width:c.cssStyles.publishDialogTextboxWidth,enabled:!0,inputType:"number",validationErrorMessage:o.portMustBeNumber}).withValidation((e=>i.validateSqlServerPortNumber(e.value))).component(),this.serverPortTextBox.onTextChanged((()=>{this.tryEnableGenerateScriptAndOkButtons()}));const r=this.createFormRow(e,o.serverPortNumber(t),this.serverPortTextBox);this.serverAdminPasswordTextBox=e.modelBuilder.inputBox().withProps({value:"",ariaLabel:o.serverPassword(t),placeHolder:o.serverPassword(t),width:c.cssStyles.publishDialogTextboxWidth,enabled:!0,inputType:"password",validationErrorMessage:o.invalidSQLPasswordMessage(t)}).withValidation((e=>!i.isEmptyString(e.value)&&i.isValidSQLPassword(e.value||""))).component();const n=this.createFormRow(e,o.serverPassword(t),this.serverAdminPasswordTextBox);this.serverConfigAdminPasswordTextBox=e.modelBuilder.inputBox().withProps({value:"",ariaLabel:o.confirmServerPassword(t),placeHolder:o.confirmServerPassword(t),width:c.cssStyles.publishDialogTextboxWidth,enabled:!0,inputType:"password",validationErrorMessage:o.passwordNotMatch(t)}).withValidation((e=>e.value===this.serverAdminPasswordTextBox?.value)).component(),this.serverAdminPasswordTextBox.onTextChanged((()=>{this.tryEnableGenerateScriptAndOkButtons(),this.serverConfigAdminPasswordTextBox&&(this.serverConfigAdminPasswordTextBox.value="")})),this.serverConfigAdminPasswordTextBox.onTextChanged((()=>{this.tryEnableGenerateScriptAndOkButtons()}));const a=this.createFormRow(e,o.confirmServerPassword(t),this.serverConfigAdminPasswordTextBox),s=(0,l.getDockerBaseImages)(this.project.getProjectTargetVersion()),u=s.map((e=>({name:e.name,displayName:e.displayName})));this.baseDockerImageDropDown=e.modelBuilder.dropDown().withProps({values:u,ariaLabel:o.baseDockerImage(t),width:c.cssStyles.publishDialogTextboxWidth,enabled:!0}).component();const p=s[0].agreementInfo,d=this.createFormRow(e,o.baseDockerImage(t),this.baseDockerImageDropDown);this.eulaCheckBox=e.modelBuilder.checkBox().withProps({ariaLabel:(0,l.getAgreementDisplayText)(p),required:!0}).component(),this.eulaCheckBox.onChanged((()=>{this.tryEnableGenerateScriptAndOkButtons()}));const h=e.modelBuilder.flexContainer().withLayout({flexFlow:"row",alignItems:"center"}).component();return this.localDbSection=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component(),this.localDbSection.addItems([r,n,a,d,h]),this.baseDockerImageDropDown.onValueChanged((()=>{this.eulaCheckBox&&(this.eulaCheckBox.checked=!1);const t=(0,l.getDockerBaseImages)(this.project.getProjectTargetVersion()).find((e=>e.name===this.baseDockerImageDropDown?.value.name));if(t?.agreementInfo.link){const r=e.modelBuilder.text().withProps({value:o.eulaAgreementTemplate,links:[t.agreementInfo.link],requiredIndicator:!0}).component();h&&this.eulaCheckBox&&(h?.clearItems(),h?.addItems([this.eulaCheckBox,r],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}}))}})),this.localDbSection}createFormRow(e,t,r){const n=e.modelBuilder.text().withProps({value:t,requiredIndicator:!0,width:c.cssStyles.publishDialogLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([n,r],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}createDatabaseRow(e){let t;this.existingServerSelected?(void 0===this.targetDatabaseDropDown&&(this.targetDatabaseDropDown=e.modelBuilder.dropDown().withProps({values:[this.getDefaultDatabaseName()],value:this.getDefaultDatabaseName(),ariaLabel:o.databaseNameLabel,required:!0,width:c.cssStyles.publishDialogTextboxWidth,editable:!0,fireOnTextChange:!0}).component(),this.targetDatabaseDropDown.onValueChanged((()=>{this.tryEnableGenerateScriptAndOkButtons()}))),t=this.targetDatabaseDropDown):(void 0===this.targetDatabaseTextBox&&(this.targetDatabaseTextBox=e.modelBuilder.inputBox().withProps({ariaLabel:o.databaseNameLabel,required:!0,width:c.cssStyles.publishDialogTextboxWidth,value:this.getDefaultDatabaseName()}).component()),t=this.targetDatabaseTextBox);const r=e.modelBuilder.text().withProps({value:o.databaseNameLabel,requiredIndicator:!0,width:c.cssStyles.publishDialogLabelWidth}).component(),n={flex:"0 0 auto",CSSStyles:{"margin-right":"10px"}};return void 0===this.databaseRow?this.databaseRow=e.modelBuilder.flexContainer().withItems([r,t],n).withLayout({flexFlow:"row",alignItems:"center"}).component():(this.databaseRow.clearItems(),this.databaseRow.addItems([r,t],n)),this.databaseRow}createSqlCmdTable(e){this.sqlCmdVars={...this.project.sqlCmdVariables};const t=e.modelBuilder.declarativeTable().withProps({ariaLabel:o.sqlCmdVariables,dataValues:this.convertSqlCmdVarsToTableFormat(this.sqlCmdVars),columns:[{displayName:o.sqlCmdVariableColumn,valueType:i.getAzdataApi().DeclarativeDataType.string,width:"50%",isReadOnly:!0,headerCssStyles:c.cssStyles.tableHeader,rowCssStyles:c.cssStyles.tableRow},{displayName:o.sqlCmdValueColumn,valueType:i.getAzdataApi().DeclarativeDataType.string,width:"50%",isReadOnly:!1,headerCssStyles:c.cssStyles.tableHeader,rowCssStyles:c.cssStyles.tableRow}],width:"420px"}).component();return t.onDataChanged((()=>{this.sqlCmdVars={},t.dataValues?.forEach((e=>{this.sqlCmdVars[e[0].value]=e[1].value})),this.tryEnableGenerateScriptAndOkButtons()})),t}createLoadSqlCmdVarsButton(e){let t=e.modelBuilder.button().withProps({label:o.loadSqlCmdVarsButtonTitle,title:o.loadSqlCmdVarsButtonTitle,ariaLabel:o.loadSqlCmdVarsButtonTitle,width:"210px",iconPath:s.IconPathHelper.refresh,height:"18px",CSSStyles:{"font-size":"13px"}}).component();return t.onDidClick((async()=>{this.sqlCmdVars={...this.project.sqlCmdVariables};const e=this.convertSqlCmdVarsToTableFormat(this.sqlCmdVars);await this.sqlCmdVariablesTable.updateProperties({dataValues:e}),this.tryEnableGenerateScriptAndOkButtons()})),t}createSelectConnectionButton(e){let t=e.modelBuilder.button().withProps({ariaLabel:o.selectConnection,iconPath:s.IconPathHelper.selectConnection,height:"16px",width:"16px"}).component();return t.onDidClick((async()=>{let e=await i.getAzdataApi().connection.openConnectionDialog();this.connectionId=e.connectionId,this.serverName=e.options.server;let r=(0,l.getConnectionName)(e);await this.updateConnectionComponents(r,this.connectionId),e.options.database&&e.options.database!==o.master&&(this.targetDatabaseDropDown.value=e.options.database),t.iconPath=s.IconPathHelper.connect})),t}async updateConnectionComponents(e,t){if(this.targetConnectionTextBox.value=e,await this.targetConnectionTextBox.updateProperty("title",e),t){const e=(await i.getAzdataApi().connection.listDatabases(t)).filter((e=>!o.systemDbs.includes(e)));this.targetDatabaseDropDown.values=e}}createLoadProfileButton(e){let t=e.modelBuilder.button().withProps({ariaLabel:o.loadProfilePlaceholderText,iconPath:s.IconPathHelper.folder_blue,height:"18px",width:"18px"}).component();return t.onDidClick((async()=>{const e=await d(this.project.projectFolderPath);if(e&&0!==e.length&&this.readPublishProfile){const t=await this.readPublishProfile(e[0]);this.targetDatabaseName="",this.connectionId=t.connectionId,this.serverName=t.serverName,await this.updateConnectionComponents(t.connection,this.connectionId),t.databaseName&&(this.targetDatabaseName=t.databaseName),Object.keys(t.sqlCmdVariables).length?0===Object.keys(this.project.sqlCmdVariables).length&&0===Object.keys(this.sqlCmdVars).length&&this.formBuilder?.addFormItem(this.sqlCmdVariablesFormComponentGroup):0===Object.keys(this.project.sqlCmdVariables).length&&this.formBuilder?.removeFormItem(this.sqlCmdVariablesFormComponentGroup);for(let e in t.sqlCmdVariables)this.sqlCmdVars[e]=t.sqlCmdVariables[e];this.deploymentOptions=t.options;const r=this.convertSqlCmdVarsToTableFormat(this.getSqlCmdVariablesForPublish());await this.sqlCmdVariablesTable.updateProperties({dataValues:r}),this.loadProfileTextBox.value=e[0].fsPath,await this.loadProfileTextBox.updateProperty("title",e[0].fsPath)}})),t}convertSqlCmdVarsToTableFormat(e){let t=[];for(let r in e)t.push([{value:r},{value:e[r]}]);return t}tryEnableGenerateScriptAndOkButtons(){let e=!1,t=!1;this.existingServerRadioButton?.checked?(this.targetConnectionTextBox.value&&this.targetDatabaseDropDown.value||this.connectionIsDataSource&&this.targetDatabaseDropDown.value)&&this.allSqlCmdVariablesFilled()&&(e=!0,t=!0):i.validateSqlServerPortNumber(this.serverPortTextBox?.value)&&!i.isEmptyString(this.serverAdminPasswordTextBox?.value)&&i.isValidSQLPassword(this.serverAdminPasswordTextBox?.value||"",o.defaultLocalServerAdminName)&&this.serverAdminPasswordTextBox?.value===this.serverConfigAdminPasswordTextBox?.value&&this.eulaCheckBox?.checked&&(e=!0),this.dialog.okButton.enabled=e,this.dialog.customButtons[0].enabled=t}allSqlCmdVariablesFilled(){for(let e in this.sqlCmdVars)if(""===this.sqlCmdVars[e]||void 0===this.sqlCmdVars[e])return!1;return!0}},t.promptForPublishProfile=d},3773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchPublishTargetOption=t.getPublishDatabaseSettings=void 0;const n=r(7549),o=r(6078),i=r(5932),a=r(5444),s=r(1027),c=r(2935);t.getPublishDatabaseSettings=async function(e,t=!0){const r=n.window.createQuickPick();r.items=[{label:o.dontUseProfile},{label:o.browseForProfileWithIcon}],r.ignoreFocusOut=!0,r.title=o.selectProfileToUse;const c=new Promise(((t,n)=>{r.onDidHide((()=>{n()})),r.onDidChangeSelection((async n=>{if(n[0].label===o.browseForProfileWithIcon){const n=await(0,a.promptForPublishProfile)(e.projectFolderPath);if(!n)return r.selectedItems=[],void(r.activeItems=[]);let o=n[0];try{r.busy=!0,r.enabled=!1;const e=await(0,i.readPublishProfile)(o);t(e)}catch(e){r.selectedItems=[],r.activeItems=[],r.busy=!1,r.enabled=!0}}else t(void 0)}))}));let l,u,p,d;r.show();try{l=await c}catch(e){return}if(r.hide(),t){const e=await(0,s.getVscodeMssqlApi)();for(;!p;){if(u=await e.promptForConnection(!0),!u)return;try{d=await e.connect(u),p=await e.listDatabases(d)}catch(e){}}}else p=[];const h=p.filter((e=>!o.systemDbs.includes(e))).map((e=>({label:e})));h.unshift({label:`$(add) ${o.createNew}`,isCreateNew:!0});const m=l?.databaseName||e.projectFileName,f=p.findIndex((e=>e===m));let g;for(-1===f?h.unshift({label:m,description:o.newText}):(h.splice(f,1),h.unshift({label:m}));!g;){const e=await n.window.showQuickPick(h,{title:o.selectDatabase,ignoreFocusOut:!0});if(!e)return;g=e.label,e.isCreateNew&&(g=await n.window.showInputBox({title:o.enterNewDatabaseName,ignoreFocusOut:!0,validateInput:e=>e?void 0:o.nameMustNotBeEmpty})??"")}let y=Object.assign({},e.sqlCmdVariables,l?.sqlCmdVariables);if(Object.keys(y).length>0)for(;;){const t=Object.keys(y).map((e=>({label:e,description:y[e],key:e})));t.push({label:`$(refresh) ${o.resetAllVars}`,isResetAllVars:!0}),t.unshift({label:`$(check) ${o.done}`,isDone:!0});const r=await n.window.showQuickPick(t,{title:o.chooseSqlcmdVarsToModify,ignoreFocusOut:!0});if(!r)break;if(r.key){const e=await n.window.showInputBox({title:o.enterNewValueForVar(r.key),value:y[r.key],ignoreFocusOut:!0});e&&(y[r.key]=e)}else if(r.isResetAllVars)y=Object.assign({},e.sqlCmdVariables,l?.sqlCmdVariables);else if(r.isDone)break}return{databaseName:g,serverName:u?.server||"",connectionUri:d||"",sqlCmdVariables:y,deploymentOptions:l?.options??await(0,s.getDefaultPublishDeploymentOptions)(e),profileUsed:!!l}},t.launchPublishTargetOption=async function(e){const t=(0,c.getPublishServerName)(e.getProjectTargetVersion()),r=await n.window.showQuickPick([o.publishToExistingServer(t),o.publishToDockerContainer(t)],{title:o.selectPublishOption,ignoreFocusOut:!0});if(r)switch(r){case o.publishToExistingServer(t):return o.PublishTargetType.existingServer;case o.publishToDockerContainer(t):return o.PublishTargetType.docker;default:return o.PublishTargetType.existingServer}}},5603:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateProjectFromDatabaseDialog=void 0;const n=r(7549),o=r(6078),i=r(2527),a=r(2178),s=r(9799),c=r(5894),l=r(1027),u=r(5622);t.UpdateProjectFromDatabaseDialog=class{constructor(e,t){this.project=t,this.toDispose=[],this.initDialogPromise=new a.Deferred,this.populatedInputsPromise=new a.Deferred,e&&"connectionName"in e&&(this.profile=e),this.dialog=(0,l.getAzdataApi)().window.createModelViewDialog(o.updateProjectFromDatabaseDialogName,"updateProjectFromDatabaseDialog"),this.updateProjectFromDatabaseTab=(0,l.getAzdataApi)().window.createTab(o.updateProjectFromDatabaseDialogName),this.dialog.registerCloseValidator((async()=>this.validate())),this.toDispose.push(this.dialog.onClosed((e=>this.initDialogPromise.resolve())))}async openDialog(){let e=await(0,l.getAzdataApi)().connection.getCurrentConnection();e&&(this.connectionId=e.connectionId),this.initializeDialog(),this.dialog.okButton.label=o.updateText,this.dialog.okButton.enabled=!1,this.toDispose.push(this.dialog.okButton.onClick((async()=>await this.handleUpdateButtonClick()))),this.dialog.cancelButton.label=o.cancelButtonText,(0,l.getAzdataApi)().window.openDialog(this.dialog),await this.initDialogPromise,this.tryEnableUpdateButton()}dispose(){this.toDispose.forEach((e=>e.dispose()))}initializeDialog(){this.initializeUpdateProjectFromDatabaseTab(),this.dialog.content=[this.updateProjectFromDatabaseTab]}initializeUpdateProjectFromDatabaseTab(){this.updateProjectFromDatabaseTab.registerContent((async e=>{const t=this.createServerRow(e),r=this.createDatabaseRow(e);await this.populateServerDropdown();const n=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();n.addItems([t,r]);const i=this.createProjectLocationRow(e),a=this.createFolderStructureRow(e),c=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();c.addItems([i,a]);const l=await this.createActionRow(e),u=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).component();u.addItems([l]),this.formBuilder=e.modelBuilder.formContainer().withFormItems([{title:o.sourceDatabase,components:[{component:n}]},{title:o.targetProject,components:[{component:c}]},{title:o.updateAction,components:[{component:u}]}],{horizontal:!1,titleFontSize:s.cssStyles.titleFontSize}).withLayout({width:"100%",padding:"10px 10px 0 20px"});let p=this.formBuilder.component();await e.initializeModel(p),await(this.connectionButton?.focus()),this.initDialogPromise.resolve()}))}createServerRow(e){this.createServerComponent(e);const t=e.modelBuilder.text().withProps({value:o.server,requiredIndicator:!0,width:s.cssStyles.updateProjectFromDatabaseLabelWidth}).component(),r=e.modelBuilder.flexContainer().withItems([t,this.serverDropdown],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-5px","margin-top":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component();return r.addItem(this.connectionButton,{CSSStyles:{"margin-right":"0px","margin-bottom":"-5px","margin-top":"-10px"}}),r}createDatabaseRow(e){this.createDatabaseComponent(e);const t=e.modelBuilder.text().withProps({value:o.databaseNameLabel,requiredIndicator:!0,width:s.cssStyles.updateProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([t,this.databaseDropdown],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}createServerComponent(e){this.serverDropdown=e.modelBuilder.dropDown().withProps({editable:!0,fireOnTextChange:!0,width:s.cssStyles.updateProjectFromDatabaseTextboxWidth}).component(),this.createConnectionButton(e),this.serverDropdown.onValueChanged((()=>{this.tryEnableUpdateButton()}))}createDatabaseComponent(e){this.databaseDropdown=e.modelBuilder.dropDown().withProps({editable:!0,fireOnTextChange:!0,width:s.cssStyles.updateProjectFromDatabaseTextboxWidth}).component(),this.databaseDropdown.onValueChanged((()=>{this.tryEnableUpdateButton()}))}async populateServerDropdown(){this.serverDropdown.loading=!0;const e=await this.getServerValues();e&&e.length>0&&await this.serverDropdown.updateProperties({values:e,value:e[0]}),this.serverDropdown.loading=!1,this.serverDropdown.value&&await this.populateDatabaseDropdown(),this.tryEnableUpdateButton(),this.populatedInputsPromise.resolve()}async populateDatabaseDropdown(){const e=this.serverDropdown.value.connection;this.databaseDropdown.loading=!0,await this.databaseDropdown.updateProperties({values:[],value:void 0});let t=[];try{t=await this.getDatabaseValues(e.connectionId);const r=t.filter((e=>o.systemDbs.includes(e)));t=t.filter((e=>!o.systemDbs.includes(e))).concat(r)}catch(r){t=[e.databaseName],console.warn(r)}t&&t.length>0&&await this.databaseDropdown.updateProperties({values:t,value:t[0]}),this.databaseDropdown.loading=!1}async getServerValues(){let e=await(0,l.getAzdataApi)().connection.getConnections(!0);if(!e||0===e.length)return;this.connectionButton.iconPath=c.IconPathHelper.connect,e.reverse();let t=-1,r=-1,n=e.map((e=>{t++;let n=e.options.user;n||(n=o.defaultUser);let i=e.options.server,a=`${i} (${n})`;return e.options.connectionName&&(a=e.options.connectionName),e.connectionId===this.connectionId&&(r=t),{connection:e,displayName:a,name:i}}));if(r>=1){let e=n[0];n[0]=n[r],n[r]=e}return n=n.reduce(((e,t)=>(e.find((e=>e.displayName===t.displayName))||e.push(t),e)),[]),n}async getDatabaseValues(e){let t=-1,r=-1,n=(await(0,l.getAzdataApi)().connection.listDatabases(e)).sort(((e,t)=>e.localeCompare(t))).map((e=>(r++,this.profile&&this.profile.databaseName&&this.profile.databaseName===e&&(t=r),e)));if(t>=0){let e=n[0];n[0]=n[t],n[t]=e}return n}createConnectionButton(e){this.connectionButton=e.modelBuilder.button().withProps({ariaLabel:o.selectConnection,iconPath:c.IconPathHelper.selectConnection,height:"20px",width:"20px"}).component(),this.connectionButton.onDidClick((async()=>{await this.connectionButtonClick(),this.connectionButton.iconPath=c.IconPathHelper.connect}))}async connectionButtonClick(){let e=await(0,l.getAzdataApi)().connection.openConnectionDialog();e&&(this.connectionId=e.connectionId,await this.populateServerDropdown())}createProjectLocationRow(e){const t=this.createBrowseFileButton(e),r=this.project?this.project.projectFilePath:"";this.projectFileTextBox=e.modelBuilder.inputBox().withProps({value:r,ariaLabel:o.projectLocationLabel,placeHolder:o.projectToUpdatePlaceholderText,width:s.cssStyles.updateProjectFromDatabaseTextboxWidth}).component(),this.projectFileTextBox.onTextChanged((async()=>{await this.projectFileTextBox.updateProperty("title",this.projectFileTextBox.value),this.tryEnableUpdateButton()}));const n=e.modelBuilder.text().withProps({value:o.projectLocationLabel,requiredIndicator:!0,width:s.cssStyles.updateProjectFromDatabaseLabelWidth}).component(),i=e.modelBuilder.flexContainer().withItems([n,this.projectFileTextBox],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-5px","margin-top":"-10px"}}).component();return i.addItem(t,{CSSStyles:{"margin-right":"0px","margin-bottom":"-5px","margin-top":"-10px"}}),i}createBrowseFileButton(e){const t=e.modelBuilder.button().withProps({ariaLabel:o.browseButtonText,iconPath:c.IconPathHelper.folder_blue,height:"18px",width:"18px"}).component();return t.onDidClick((async()=>{let e=await n.window.showOpenDialog({canSelectFiles:!0,canSelectFolders:!1,canSelectMany:!1,openLabel:o.selectString,defaultUri:i.defaultProjectSaveLocation(),filters:{Files:["sqlproj"]}});e&&0!==e.length&&(this.projectFileTextBox.value=e[0].fsPath,await this.projectFileTextBox.updateProperty("title",e[0].fsPath))})),t}createFolderStructureRow(e){this.folderStructureDropDown=e.modelBuilder.dropDown().withProps({values:[o.file,o.flat,o.objectType,o.schema,o.schemaObjectType],value:o.schemaObjectType,ariaLabel:o.folderStructureLabel,required:!0,width:s.cssStyles.updateProjectFromDatabaseTextboxWidth}).component(),this.folderStructureDropDown.onValueChanged((()=>{this.tryEnableUpdateButton()}));const t=e.modelBuilder.text().withProps({value:o.folderStructureLabel,requiredIndicator:!0,width:s.cssStyles.createProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([t,this.folderStructureDropDown],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}async createActionRow(e){this.compareActionRadioButton=e.modelBuilder.radioButton().withProps({name:"action",label:o.compareActionRadioButtonLabel,checked:!0}).component(),this.updateActionRadioButton=e.modelBuilder.radioButton().withProps({name:"action",label:o.updateActionRadioButtonLabel}).component(),await this.compareActionRadioButton.updateProperties({checked:!0}),this.action=0,this.compareActionRadioButton.onDidClick((async()=>{this.action=0,this.tryEnableUpdateButton()})),this.updateActionRadioButton.onDidClick((async()=>{this.action=1,this.tryEnableUpdateButton()}));let t=e.modelBuilder.flexContainer().withLayout({flexFlow:"column"}).withItems([this.compareActionRadioButton,this.updateActionRadioButton]).withProps({ariaRole:"radiogroup"}).component();const r=e.modelBuilder.text().withProps({value:o.actionLabel,requiredIndicator:!0,width:s.cssStyles.updateProjectFromDatabaseLabelWidth}).component();return e.modelBuilder.flexContainer().withItems([r,t],{flex:"0 0 auto",CSSStyles:{"margin-right":"10px","margin-bottom":"-10px"}}).withLayout({flexFlow:"row",alignItems:"center"}).component()}tryEnableUpdateButton(){this.serverDropdown?.value&&this.databaseDropdown?.value&&this.projectFileTextBox?.value&&this.folderStructureDropDown?.value&&void 0!==this.action?this.dialog.okButton.enabled=!0:this.dialog.okButton.enabled=!1}async handleUpdateButtonClick(){const e=this.serverDropdown.value,t=await(0,l.getAzdataApi)().connection.getUriForConnection(e.connection.connectionId);let r=(await(0,l.getAzdataApi)().connection.getConnections(!0)).filter((t=>t.connectionId===e.connection.connectionId))[0];r.databaseName=this.databaseDropdown.value;const n=await(0,l.getAzdataApi)().connection.getCredentials(r.connectionId);n.hasOwnProperty("password")&&(r.password=r.options.password=n.password);const o={id:r.connectionId,userName:r.userName,password:r.password,serverName:r.serverName,databaseName:r.databaseName,connectionName:r.connectionName,providerName:r.providerId,groupId:r.groupId,groupFullName:r.groupFullName,authenticationType:r.authenticationType,savePassword:r.savePassword,saveProfile:r.saveProfile,options:r.options},i={sourceEndpointInfo:{endpointType:0,databaseName:this.databaseDropdown.value,serverDisplayName:e.displayName,serverName:e.name,connectionDetails:o,ownerUri:t,projectFilePath:"",folderStructure:"",targetScripts:[],dataSchemaProvider:"",packageFilePath:"",connectionName:e.connection.options.connectionName},targetEndpointInfo:{endpointType:2,projectFilePath:this.projectFileTextBox.value,folderStructure:this.folderStructureDropDown.value,targetScripts:[],dataSchemaProvider:"",connectionDetails:o,databaseName:"",serverDisplayName:"",serverName:"",ownerUri:"",packageFilePath:""},action:this.action};this.updateProjectFromDatabaseCallback(i),this.dispose()}async validate(){try{return!1!==await(0,l.getDataWorkspaceExtensionApi)().validateWorkspace()&&(await(0,l.exists)(u.dirname(this.projectFileTextBox.value))?await(0,l.exists)(this.projectFileTextBox.value)?!!n.extensions.getExtension(o.schemaCompareExtensionId)||(this.showErrorMessage(o.noSchemaCompareExtension),!1):(this.showErrorMessage(o.noSqlProjFile),!1):(this.showErrorMessage(o.ProjectParentDirectoryNotExistError(this.projectFileTextBox.value)),!1))}catch(e){return this.showErrorMessage(e?.message?e.message:e),!1}}showErrorMessage(e){this.dialog.message={text:e,level:(0,l.getAzdataApi)().window.MessageLevel.Error}}}},2935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDockerBaseImages=t.getPublishServerName=t.getAgreementDisplayText=t.getConnectionName=void 0;const n=r(6078);t.getConnectionName=function(e){let t;if(e.options.connectionName)t=e.options.connectionName;else{let r=e.options.user;r||(r=n.defaultUser),t=`${e.options.server} (${r})`}return t},t.getAgreementDisplayText=function(e){return n.eulaAgreementText(e.link.text)},t.getPublishServerName=function(e){return e===n.targetPlatformToVersion.get("Azure SQL Database")?n.AzureSqlServerName:n.SqlServerName},t.getDockerBaseImages=function(e){return e===n.targetPlatformToVersion.get("Azure SQL Database")?[{name:`${n.sqlServerDockerRegistry}/${n.sqlServerDockerRepository}:2019-latest`,displayName:"SQL Server 2019",agreementInfo:{link:{text:n.eulaAgreementTitle,url:n.sqlServerEulaLink}}},{name:`${n.sqlServerDockerRegistry}/${n.azureSqlEdgeDockerRepository}:latest`,displayName:"Azure SQL Edge",agreementInfo:{link:{text:n.edgeEulaAgreementTitle,url:n.sqlServerEdgeEulaLink}}}]:[{name:`${n.sqlServerDockerRegistry}/${n.sqlServerDockerRepository}:2017-latest`,displayName:"SQL Server 2017",agreementInfo:{link:{text:n.eulaAgreementTitle,url:n.sqlServerEulaLink}}},{name:`${n.sqlServerDockerRegistry}/${n.sqlServerDockerRepository}:2019-latest`,displayName:"SQL Server 2019",agreementInfo:{link:{text:n.eulaAgreementTitle,url:n.sqlServerEulaLink}}},{name:`${n.sqlServerDockerRegistry}/${n.azureSqlEdgeDockerRepository}:latest`,displayName:"Azure SQL Edge",agreementInfo:{link:{text:n.edgeEulaAgreementTitle,url:n.sqlServerEdgeEulaLink}}}]}},891:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Status=t.PublishData=t.DashboardData=void 0;class r{constructor(e,t,r,n){this.projectFile=e,this.status=t,this.target=r,this.timeToCompleteAction="",this.startDate=n}}var n;t.DashboardData=r,t.PublishData=class extends r{constructor(e,t,r,n,o,i){super(e,t,r,n),this.targetDatabase=o,this.targetServer=i}},(n=t.Status||(t.Status={}))[n.success=0]="success",n[n.failed=1]="failed",n[n.inProgress=2]="inProgress"},9018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.NoDataSourcesFileError=t.DataSource=void 0;const n=r(5747),o=r(6078);t.DataSource=class{constructor(e){this.name=e}};class i extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype),this.name=i.name}}t.NoDataSourcesFileError=i,t.load=async function(e){let t;try{t=await n.promises.readFile(e)}catch(e){throw new i(o.noDataSourcesFile)}const r=JSON.parse(t.toString());if(void 0===r.version)throw new Error(o.missingVersion);switch(r.version){case"0.0.0":break;default:throw new Error(o.unrecognizedDataSourcesVersion+r.version)}return[]}},6502:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlConnectionDataSource=void 0;const n=r(9018),o=r(6078);class i extends n.DataSource{constructor(e,t){super(e),this.connectionStringComponents={},this.connectionString=t;const r=this.connectionString.split(";").filter((e=>""!==e));for(const e of r){const t=e.split("=");if(2!==t.length)throw new Error(o.invalidSqlConnectionString);this.connectionStringComponents[t[0].toLocaleLowerCase()]=t[1]}}static get type(){return"sql_connection_string"}get type(){return i.type}get typeFriendlyName(){return o.sqlConnectionStringFriendly}get server(){return this.getSetting(o.dataSourceSetting)}get database(){return this.getSetting(o.initialCatalogSetting)}get integratedSecurity(){return"true"===this.getSetting(o.integratedSecuritySetting)?.toLowerCase()}get azureMFA(){return this.getSetting(o.authenticationSetting)?.toLowerCase().includes(o.activeDirectoryInteractive)}get authType(){return this.azureMFA?o.azureMfaAuth:this.integratedSecurity?o.integratedAuth:o.sqlAuth}get username(){return this.getSetting(o.userIdSetting)}get password(){return this.getSetting(o.passwordSetting)}getSetting(e){return this.connectionStringComponents[e.toLocaleLowerCase()]}static fromJson(e){return new i(e.name,e.data.connectionString)}getConnectionProfile(){return{serverName:this.server,databaseName:this.database,connectionName:this.name,userName:this.username,password:this.password,authenticationType:this.authType,savePassword:!1,providerName:"MSSQL",saveProfile:!0,id:this.name+"-dataSource",options:[]}}}t.SqlConnectionDataSource=i},5736:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AppSettingType=void 0,(r=t.AppSettingType||(t.AppSettingType={}))[r.None=0]="None",r[r.AzureFunction=1]="AzureFunction"},5892:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeployService=void 0;const n=r(5736),o=r(2884),i=r(6078),a=r(1027),s=r(5674),c=r(7549),l=r(2102),u=r(3848);t.DeployService=class{constructor(e,t){this._outputChannel=e,this.DefaultSqlRetryTimeoutInSec=10,this.DefaultSqlNumberOfRetries=3,this._shellExecutionHelper=t??new u.ShellExecutionHelper(this._outputChannel)}createConnectionStringTemplate(e){switch(e?.toLocaleLowerCase()){case"dotnet":return i.defaultConnectionStringTemplate}return""}findAppRuntime(e,t){switch(e.appSettingType){case n.AppSettingType.AzureFunction:return t?.Values.FUNCTIONS_WORKER_RUNTIME}}async updateAppSettings(e,t){if(!e.appSettingFile)return;this.logToOutput(i.deployAppSettingUpdating(e.appSettingFile));let r=JSON.parse(s.readFileSync(e.appSettingFile,"utf8"));if(r&&r.Values){let n="";if(t&&t.localDbSetting){const o=this.findAppRuntime(e,r);let i=this.createConnectionStringTemplate(o);const a={SERVER:t?.localDbSetting?.serverName||"",PORT:t?.localDbSetting?.port?.toString()||"",USER:t?.localDbSetting?.userName||"",SA_PASSWORD:t?.localDbSetting?.password||"",DATABASE:t?.localDbSetting?.dbName||""};n=l.macroExpansion(i,a)}else t?.deploySettings?.connectionUri&&(n=await this.getConnectionString(t?.deploySettings?.connectionUri));n&&e.envVariableName?(r.Values[e.envVariableName]=n,await s.writeFileSync(e.appSettingFile,JSON.stringify(r,void 0,4)),this.logToOutput(`app setting '${e.appSettingFile}' has been updated. env variable name: ${e.envVariableName} connection String: ${n}`)):this.logToOutput(i.deployAppSettingUpdateFailed(e.appSettingFile))}}async verifyDocker(){try{await this.executeCommand("docker version --format {{.Server.APIVersion}}")}catch(e){throw Error(i.dockerNotRunningError(a.getErrorMessage(e)))}}getDockerImageSpec(e,t,r){r=r??o.generateUuid();const n=/[^a-zA-Z0-9_,\-]/g;let a=e.replace(n,"");const s=t.replace(":","-").replace(i.sqlServerDockerRegistry,"").replace(n,"");return a=a.substring(0,128-(i.dockerImageNamePrefix.length+s.length+2)),{label:`${i.dockerImageLabelPrefix}-${a}`.toLocaleLowerCase(),tag:`${i.dockerImageNamePrefix}-${a}-${s}`.toLocaleLowerCase(),containerName:`${i.dockerImageNamePrefix}-${a}-${r}`.toLocaleLowerCase()}}async deploy(e,t){return await this.executeTask(i.deployDbTaskName,(async()=>{if(!e.localDbSetting)return;await this.verifyDocker(),this.logToOutput(i.dockerImageMessage),this.logToOutput(e.localDbSetting.dockerBaseImage),this.logToOutput(i.dockerImageEulaMessage),this.logToOutput(e.localDbSetting.dockerBaseImageEula);const r=this.getDockerImageSpec(t.projectFileName,e.localDbSetting.dockerBaseImage);e.localDbSetting.profileName||(e.localDbSetting.profileName=r.containerName),this.logToOutput(i.cleaningDockerImagesMessage);const n=await this.getCurrentDockerContainer(r.label);n.length>0&&await c.window.showWarningMessage(i.containerAlreadyExistForProject,i.yesString,i.noString)===i.yesString&&(this.logToOutput(i.cleaningDockerImagesMessage),await this.cleanDockerObjects(n,["docker stop","docker rm"])),this.logToOutput(i.creatingDeploymentSettingsMessage),this.logToOutput(i.runningDockerMessage);const o=await this.runDockerContainer(r,e.localDbSetting);this.logToOutput(`Docker container created. Id: ${o}`);const s=await a.retry("Validating the docker container",(async()=>this.executeCommand(`docker ps -q -a --filter label=${r.label} -q`)),(e=>Promise.resolve({validated:void 0!==e,errorMessage:i.dockerContainerNotRunningErrorMessage})),(e=>Promise.resolve(e)),this._outputChannel);if(s)return this.logToOutput(i.dockerContainerCreatedMessage(s)),await this.getConnection(e.localDbSetting,!1,"master");this.logToOutput(i.dockerContainerFailedToRunErrorMessage),o&&await this.executeCommand(i.dockerLogMessage(o))}))}async runDockerContainer(e,t){const r=[t.password];return await this.executeCommand(`docker pull ${t.dockerBaseImage}`),await this.executeCommand(`docker run -p ${t.port}:1433 -e "MSSQL_SA_PASSWORD=${t.password}" -e "ACCEPT_EULA=Y" -e "MSSQL_PID=Developer" --label ${e.label} -d --name ${e.containerName} ${t.dockerBaseImage} `,r),await this.executeCommand(`docker ps -q -a --filter label=${e.label} -q`)}async getConnectionString(e){const t=await a.getAzdataApi();if(t){const r=await t.connection.getConnection(e);if(r)return await t.connection.getConnectionString(r.connectionId,!0)}}async connectToDatabase(e,t,r){const n=await a.getAzdataApi(),o=n?void 0:await a.getVscodeMssqlApi();if(n){const o={password:e.password,serverName:`${e.serverName},${e.port}`,database:r,savePassword:t,userName:e.userName,providerName:"MSSQL",saveProfile:!1,id:"",connectionName:e.profileName,options:[],authenticationType:"SqlLogin"};return await n.connection.connect(o,t,!1)}if(o){const n={password:e.password,server:`${e.serverName}`,port:e.port,database:r,savePassword:t,user:e.userName,authenticationType:"SqlLogin",encrypt:!1,connectTimeout:30,applicationName:"SQL Database Project",accountId:void 0,azureAccountToken:void 0,applicationIntent:void 0,attachDbFilename:void 0,connectRetryCount:void 0,connectRetryInterval:void 0,connectionString:void 0,currentLanguage:void 0,email:void 0,failoverPartner:void 0,loadBalanceTimeout:void 0,maxPoolSize:void 0,minPoolSize:void 0,multiSubnetFailover:void 0,multipleActiveResultSets:void 0,packetSize:void 0,persistSecurityInfo:void 0,pooling:void 0,replication:void 0,trustServerCertificate:void 0,typeSystemVersion:void 0,workstationId:void 0,profileName:e.profileName,expiresOn:void 0,tenantId:void 0};return await o.connect(n,t)}}async validateConnection(e){const t=await a.getAzdataApi();if(e){if(t){const t=e;if(t){const e=void 0!==t&&t.connected&&void 0!==t.connectionId;return{validated:e,errorMessage:e?"":i.connectionFailedError(t?.errorMessage)}}return{validated:!1,errorMessage:i.connectionFailedError("")}}return{validated:void 0!==e,errorMessage:i.connectionFailedError("")}}return{validated:!1,errorMessage:i.connectionFailedError("No result returned")}}async formatConnectionResult(e){const t=await a.getAzdataApi(),r=void 0!==e&&t?e:void 0;return r?r.connectionId:e}async getConnection(e,t,r){const n=await a.getAzdataApi();let o=await a.retry(i.connectingToSqlServerMessage,(async()=>await this.connectToDatabase(e,t,r)),this.validateConnection,this.formatConnectionResult,this._outputChannel,this.DefaultSqlNumberOfRetries,e.connectionRetryTimeout||this.DefaultSqlRetryTimeoutInSec);if(o){const e=o;return n?await n.connection.getUriForConnection(e.connectionId):o}}async executeTask(e,t){const r=await a.getAzdataApi();return r?new Promise(((n,o)=>{let a=e;r.tasks.startBackgroundOperation({displayName:a,description:a,isCancelable:!1,operation:async a=>{try{let e=await t();a.updateStatus(r.TaskStatus.Succeeded),n(e)}catch(t){let n=i.taskFailedError(e,t?t.message:"");a.updateStatus(r.TaskStatus.Failed,n),o(n)}}})})):await t()}logToOutput(e){this._outputChannel.appendLine(e)}async executeCommand(e,t=[],r=3e5){return await this._shellExecutionHelper.runStreamedCommand(e,void 0,t,r)}async getCurrentDockerContainer(e){const t=await this.executeCommand(`docker ps -q -a --filter label=${e}`);return t?t.split(/\r?\n/):[]}async cleanDockerObjects(e,t){for(let r=0;r<e.length;r++){const n=e[r];if(n)for(let e=0;e<t.length;e++){const r=t[e];await this.executeCommand(`${r} ${n}`)}}}}},4935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reservedProjectFolders=t.Project=void 0;const n=r(5622),o=r(647),i=r(6078),a=r(1027),s=r(1465),c=r(2087),l=r(2102),u=r(2884),p=r(7549),d=r(5747),h=r(1845),m=r(6742);class f{constructor(e){this._files=[],this._dataSources=[],this._importedTargets=[],this._databaseReferences=[],this._sqlCmdVariables={},this._preDeployScripts=[],this._postDeployScripts=[],this._noneDeployScripts=[],this._isSdkStyleProject=!1,this.projFileXmlDoc=void 0,this._projectFilePath=e,this._projectFileName=n.basename(e,".sqlproj")}get dacpacOutputPath(){return n.join(this.projectFolderPath,"bin","Debug",`${this._projectFileName}.dacpac`)}get projectFolderPath(){return p.Uri.file(n.dirname(this._projectFilePath)).fsPath}get projectFilePath(){return this._projectFilePath}get projectFileName(){return this._projectFileName}get projectGuid(){return this._projectGuid}get files(){return this._files}get dataSources(){return this._dataSources}get importedTargets(){return this._importedTargets}get databaseReferences(){return this._databaseReferences}get sqlCmdVariables(){return this._sqlCmdVariables}get preDeployScripts(){return this._preDeployScripts}get postDeployScripts(){return this._postDeployScripts}get noneDeployScripts(){return this._noneDeployScripts}get isSdkStyleProject(){return this._isSdkStyleProject}static async openProject(e){const t=new f(e);return await t.readProjFile(),await t.updateProjectForRoundTrip(),t}async readProjFile(){this.resetProject();const e=await d.promises.readFile(this._projectFilePath);this.projFileXmlDoc=(new o.DOMParser).parseFromString(e.toString()),this._isSdkStyleProject=this.CheckForSdkStyleProject(),this._preDeployScripts=this.readPreDeployScripts(),this._postDeployScripts=this.readPostDeployScripts(),this._noneDeployScripts=this.readNoneDeployScripts(),this._files=await this.readFilesInProject(),this.files.push(...await this.readFolders()),this._databaseReferences=this.readDatabaseReferences(),this._importedTargets=this.readImportedTargets();try{this._sqlCmdVariables=a.readSqlCmdVariables(this.projFileXmlDoc,!1)}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.sqlCmdVariables,this.projectFilePath)),console.error(a.getErrorMessage(e))}try{this._projectGuid=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ProjectGuid)[0].childNodes[0].nodeValue}catch(e){this._projectGuid=u.generateUuid();const t=this.projFileXmlDoc.createElement(i.ProjectGuid),r=this.projFileXmlDoc.createTextNode(`{${this._projectGuid}}`);t.appendChild(r),this.projFileXmlDoc.documentElement.getElementsByTagName(i.PropertyGroup)[0]?.appendChild(t),await this.serializeToProjFile(this.projFileXmlDoc)}}async readFilesInProject(){const e=new Set,t=[];if(this._isSdkStyleProject)try{(await a.getSqlFilesInFolder(this.projectFolderPath,!0)).forEach((t=>{e.add(a.convertSlashesForSqlProj(a.trimUri(p.Uri.file(this.projectFilePath),p.Uri.file(t))))}))}catch(e){console.error(a.getErrorMessage(e))}for(let r=0;r<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;r++){const o=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[r];try{const r=o.getElementsByTagName(i.Build);for(let o=0;o<r.length;o++){const s=r[o].getAttribute(i.Include);if(s){const c=n.join(a.getPlatformSafeFileEntryPath(this.projectFolderPath),a.getPlatformSafeFileEntryPath(s));if(this._isSdkStyleProject&&!await a.exists(c))(await a.globWithPattern(c)).forEach((t=>{const r=a.convertSlashesForSqlProj(a.trimUri(p.Uri.file(this.projectFilePath),p.Uri.file(t)));e.add(r)}));else{e.add(s);const n=r[o].getAttribute(i.Type);n&&t.push({relativePath:s,typeAttribute:n})}}if(this._isSdkStyleProject){const t=r[o].getAttribute(i.Remove);if(t){const r=n.join(a.getPlatformSafeFileEntryPath(this.projectFolderPath),a.getPlatformSafeFileEntryPath(t));(await a.globWithPattern(r)).forEach((t=>{const r=a.convertSlashesForSqlProj(a.trimUri(p.Uri.file(this.projectFilePath),p.Uri.file(t)));e.delete(r)}))}}}}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.BuildElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}}this.isSdkStyleProject&&(this.preDeployScripts.forEach((t=>e.delete(t.relativePath))),this.postDeployScripts.forEach((t=>e.delete(t.relativePath))),this.noneDeployScripts.forEach((t=>e.delete(t.relativePath))),this.readNoneRemoveScripts().forEach((t=>e.delete(t.relativePath))));const r=[];return e.forEach((e=>{const n=t.find((t=>t.relativePath===e));r.push(this.createFileProjectEntry(e,m.EntryType.File,n?n.typeAttribute:void 0))})),r}async readFolders(){const e=[],t=new Set,r=await this.foldersListedInSqlproj();return r.forEach((e=>t.add(e))),this._isSdkStyleProject&&(this.files.forEach((e=>{e.relativePath.startsWith("..")||n.dirname(e.fsUri.fsPath)===this.projectFolderPath||a.getFoldersToFile(this.projectFolderPath,e.fsUri.fsPath).forEach((e=>t.add(a.convertSlashesForSqlProj(a.trimUri(p.Uri.file(this.projectFilePath),p.Uri.file(e))))))})),r.forEach((e=>{const r=n.join(a.getPlatformSafeFileEntryPath(this.projectFolderPath),a.getPlatformSafeFileEntryPath(e));a.getFoldersAlongPath(this.projectFolderPath,a.getPlatformSafeFileEntryPath(r)).forEach((e=>t.add(a.convertSlashesForSqlProj(a.trimUri(p.Uri.file(this.projectFilePath),p.Uri.file(e))))))}))),t.forEach((t=>{e.push(this.createFileProjectEntry(t,m.EntryType.Folder))})),e}async foldersListedInSqlproj(){const e=[];for(let t=0;t<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;t++){const r=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[t];try{const t=r.getElementsByTagName(i.Folder);for(let r=0;r<t.length;r++){let n=t[r].getAttribute(i.Include);a.trimChars(n,"\\")!==i.Properties&&e.push(a.ensureTrailingSlash(n))}}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.Folder,this.projectFilePath)),console.error(a.getErrorMessage(e))}}return e}readPreDeployScripts(){const e=[];let t=0;for(let r=0;r<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;r++){const n=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[r];try{const r=n.getElementsByTagName(i.PreDeploy);for(let n=0;n<r.length;n++)e.push(this.createFileProjectEntry(r[n].getAttribute(i.Include),m.EntryType.File)),t++}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.PreDeployElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}}return t>1&&p.window.showWarningMessage(i.prePostDeployCount,i.okString),e}readPostDeployScripts(){const e=[];let t=0;for(let r=0;r<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;r++){const n=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[r];try{const r=n.getElementsByTagName(i.PostDeploy);for(let n=0;n<r.length;n++)e.push(this.createFileProjectEntry(r[n].getAttribute(i.Include),m.EntryType.File)),t++}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.PostDeployElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}}return t>1&&p.window.showWarningMessage(i.prePostDeployCount,i.okString),e}readNoneDeployScripts(){const e=[];for(let t=0;t<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;t++){const r=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[t];try{const t=r.getElementsByTagName(i.None);for(let r=0;r<t.length;r++){const n=t[r].getAttribute(i.Include);n&&e.push(this.createFileProjectEntry(n,m.EntryType.File))}}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.NoneElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}}return e}readNoneRemoveScripts(){const e=[];for(let t=0;t<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;t++){const r=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[t];try{const t=r.getElementsByTagName(i.None);for(let r=0;r<t.length;r++)e.push(this.createFileProjectEntry(t[r].getAttribute(i.Remove),m.EntryType.File))}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.NoneElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}}return e}readDatabaseReferences(){const e=[],t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference);for(let r=0;r<t.length;r++)try{if(t[r].getAttribute(i.Condition)!==i.NotNetCoreCondition){const n=t[r].getAttribute(i.Include);if(!n)throw new Error(i.invalidDatabaseReference);const o=t[r].getElementsByTagName(i.DatabaseVariableLiteralValue),s=1===o.length?o[0].childNodes[0].nodeValue:void 0,c=t[r].getElementsByTagName(i.SuppressMissingDependenciesErrors),l=1===c.length&&c[0].childNodes[0].nodeValue===i.True;a.convertSlashesForSqlProj(this.getSystemDacpacUri(`${s}.dacpac`).fsPath).includes(n)?e.push(new m.SystemDatabaseReferenceProjectEntry(p.Uri.file(n),this.getSystemDacpacSsdtUri(`${s}.dacpac`),s,l)):e.push(new m.DacpacReferenceProjectEntry({dacpacFileLocation:p.Uri.file(a.getPlatformSafeFileEntryPath(n)),databaseName:s,suppressMissingDependenciesErrors:l}))}}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.DacpacReferenceElement,this.projectFilePath)),console.error(a.getErrorMessage(e))}const r=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ProjectReference);for(let t=0;t<r.length;t++)try{const n=r[t].getAttribute(i.Include);if(!n)throw new Error(i.invalidDatabaseReference);const o=r[t].getElementsByTagName(i.Name);let s="";try{s=o[0].childNodes[0].nodeValue}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.ProjectReferenceNameElement,this.projectFilePath)),console.error(a.getErrorMessage(e))}const c=r[t].getElementsByTagName(i.SuppressMissingDependenciesErrors),l=1===c.length&&c[0].childNodes[0].nodeValue===i.True;e.push(new m.SqlProjectReferenceProjectEntry({projectRelativePath:p.Uri.file(a.getPlatformSafeFileEntryPath(n)),projectName:s,projectGuid:"",suppressMissingDependenciesErrors:l}))}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.ProjectReferenceElement,this.projectFilePath)),console.error(a.getErrorMessage(e))}return e}readImportedTargets(){const e=[];try{const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import);for(let r=0;r<t.length;r++){const n=t[r];e.push(n.getAttribute(i.Project))}}catch(e){p.window.showErrorMessage(i.errorReadingProject(i.ImportElements,this.projectFilePath)),console.error(a.getErrorMessage(e))}return e}resetProject(){this._files=[],this._importedTargets=[],this._databaseReferences=[],this._sqlCmdVariables={},this._preDeployScripts=[],this._postDeployScripts=[],this._noneDeployScripts=[],this.projFileXmlDoc=void 0}CheckForSdkStyleProject(){const e=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Sdk);if(e.length>0)return e[0].getAttribute(i.Name)===i.sqlProjectSdk;const t=this.projFileXmlDoc.documentElement.getAttribute(i.Sdk);if(t)return t.includes(i.sqlProjectSdk);const r=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import);for(let e=0;e<r.length;e++)if(r[e].getAttribute(i.Sdk)===i.sqlProjectSdk)return!0;return!1}async updateProjectForRoundTrip(){this._importedTargets.includes(i.NetCoreTargets)&&!this.containsSSDTOnlySystemDatabaseReferences()||this.isSdkStyleProject||(h.TelemetryReporter.sendActionEvent(h.TelemetryViews.ProjectController,h.TelemetryActions.updateProjectForRoundtrip),this._importedTargets.includes(i.NetCoreTargets)?this.containsSSDTOnlySystemDatabaseReferences()&&await p.window.showWarningMessage(i.updateProjectDatabaseReferencesForRoundTrip(this.projectFileName),i.yesString,i.noString)===i.yesString&&(await d.promises.copyFile(this._projectFilePath,this._projectFilePath+"_backup"),await this.updateSystemDatabaseReferencesInProjFile()):await p.window.showWarningMessage(i.updateProjectForRoundTrip(this.projectFileName),i.yesString,i.noString)===i.yesString&&(await d.promises.copyFile(this._projectFilePath,this._projectFilePath+"_backup"),await this.updateImportToSupportRoundTrip(),await this.updatePackageReferenceInProjFile(),await this.updateBeforeBuildTargetInProjFile(),await this.updateSystemDatabaseReferencesInProjFile()))}async updateImportToSupportRoundTrip(){for(let e=0;e<this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import).length;e++){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import)[e];let r=t.getAttribute(i.Condition),n=t.getAttribute(i.Project);r===i.SqlDbPresentCondition&&n===i.SqlDbTargets&&await this.updateImportedTargetsToProjFile(i.RoundTripSqlDbPresentCondition,n,t),r===i.SqlDbNotPresentCondition&&n===i.MsBuildtargets&&await this.updateImportedTargetsToProjFile(i.RoundTripSqlDbNotPresentCondition,n,t)}await this.updateImportedTargetsToProjFile(i.NetCoreCondition,i.NetCoreTargets,void 0)}async updateBeforeBuildTargetInProjFile(){for(let e=0;e<this.projFileXmlDoc.documentElement.getElementsByTagName(i.Target).length;e++){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Target)[e];if(t.getAttribute(i.Name)===i.BeforeBuildTarget)return await this.createCleanFileNode(t)}const e=this.projFileXmlDoc.createElement(i.Target);e.setAttribute(i.Name,i.BeforeBuildTarget),this.projFileXmlDoc.documentElement.appendChild(e),await this.createCleanFileNode(e)}async convertProjectToSdkStyle(){if(this.isSdkStyleProject||!this._importedTargets.includes(i.NetCoreTargets))return!1;await d.promises.copyFile(this._projectFilePath,this._projectFilePath+"_backup");try{const e=this.files.filter((e=>e.type===m.EntryType.File)),t=this.files.filter((e=>e.type===m.EntryType.Folder));for(const t of e)t.relativePath.includes("..")||await this.exclude(t);for(const e of t)await this.exclude(e);try{await this.removeFolderFromProjFile("Properties")}catch{}const r=[];for(let e=0;e<this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import).length;e++){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Import)[e],n=t.getAttribute(i.Project);n!==i.NetCoreTargets&&n!==i.SqlDbTargets&&n!==i.MsBuildtargets||r.push(t)}const n=r[0]?.parentNode;r.forEach((e=>{n?.removeChild(e)}));const o=this.projFileXmlDoc.createElement(i.Sdk);o.setAttribute(i.Name,i.sqlProjectSdk),o.setAttribute(i.Version,i.sqlProjectSdkVersion);const a=this.projFileXmlDoc.documentElement;a.insertBefore(o,a.firstChild),await this.serializeToProjFile(this.projFileXmlDoc),await this.readProjFile();for(const t of this.files.filter((e=>e.type===m.EntryType.File)))e.find((e=>e.pathForSqlProj()===t.pathForSqlProj()))||await this.exclude(t);const s=this.files.filter((e=>e.type===m.EntryType.Folder));for(const e of t)s.find((t=>t.relativePath===e.relativePath))||await this.addFolderItem(e.relativePath)}catch(e){return console.error(e),await d.promises.copyFile(this._projectFilePath+"_backup",this._projectFilePath),await this.readProjFile(),!1}return!0}async createCleanFileNode(e){const t=this.projFileXmlDoc.createElement(i.Delete);t.setAttribute(i.Files,i.ProjJsonToClean),e.appendChild(t),await this.serializeToProjFile(this.projFileXmlDoc)}async addFolderItem(e){const t=await this.ensureFolderItems(e);if(t)return t;throw new Error(i.outsideFolderPath)}async addScriptItem(e,t,r){const o=n.join(this.projectFolderPath,e);if(t){await d.promises.mkdir(n.dirname(o),{recursive:!0});try{await d.promises.writeFile(o,t,{flag:"wx"})}catch(e){if("EEXIST"===e.code)throw new Error(i.fileAlreadyExists(n.parse(o).name));throw e}}else if(!await a.exists(o))throw new Error(i.noFileExist(o));await this.ensureFolderItems(n.relative(this.projectFolderPath,n.dirname(o)));const s=a.convertSlashesForSqlProj(e),c=this.files.find((e=>e.relativePath.toUpperCase()===s.toUpperCase()));if(c)return c;const u=this.createFileProjectEntry(s,m.EntryType.File);let p;switch(r){case l.preDeployScript:p=i.PreDeploy,0===this._preDeployScripts.length?this._preDeployScripts.push(u):this._noneDeployScripts.push(u);break;case l.postDeployScript:p=i.PostDeploy,0===this._postDeployScripts.length?this._postDeployScripts.push(u):this._noneDeployScripts.push(u);break;default:p=i.Build,this._files.push(u)}const h=new Map;return r===l.externalStreamingJob&&(u.sqlObjectType=i.ExternalStreamingJob,h.set(i.Type,i.ExternalStreamingJob)),await this.addToProjFile(u,p,h),u}async addExistingItem(e){if(!await a.exists(e))throw new Error(i.noFileExist(e));const t=a.convertSlashesForSqlProj(n.relative(this.projectFolderPath,e)),r=this.files.find((e=>e.relativePath.toUpperCase()===t.toUpperCase()));if(r)return r;await this.ensureFolderItems(n.relative(this.projectFolderPath,n.dirname(e)));const o=this.createFileProjectEntry(t,m.EntryType.File),s=n.extname(e)===i.sqlFileExtension?i.Build:i.None;return await this.addToProjFile(o,s),this._files.push(o),o}async exclude(e){const t=this._files.concat(this._preDeployScripts).concat(this._postDeployScripts).concat(this._noneDeployScripts).filter((t=>t.fsUri.fsPath.startsWith(e.fsUri.fsPath)));await this.removeFromProjFile(t),this._files=this._files.filter((t=>!t.fsUri.fsPath.startsWith(e.fsUri.fsPath))),this._preDeployScripts=this._preDeployScripts.filter((t=>!t.fsUri.fsPath.startsWith(e.fsUri.fsPath))),this._postDeployScripts=this._postDeployScripts.filter((t=>!t.fsUri.fsPath.startsWith(e.fsUri.fsPath))),this._noneDeployScripts=this._noneDeployScripts.filter((t=>!t.fsUri.fsPath.startsWith(e.fsUri.fsPath)))}async deleteFileFolder(e){const t=this._files.concat(this._preDeployScripts).concat(this._postDeployScripts).concat(this._noneDeployScripts).filter((t=>t.fsUri.fsPath.startsWith(e.fsUri.fsPath)&&t.type===m.EntryType.File)),r=this._files.filter((t=>t.fsUri.fsPath.startsWith(e.fsUri.fsPath)&&t.type===m.EntryType.Folder));await Promise.all(t.map((e=>d.promises.unlink(e.fsUri.fsPath)))),await Promise.all(r.map((e=>d.promises.rmdir(e.fsUri.fsPath,{recursive:!0})))),await this.exclude(e)}async deleteDatabaseReference(e){await this.removeFromProjFile(e),this._databaseReferences=this._databaseReferences.filter((t=>t!==e))}async changeTargetPlatform(e){if(this.getProjectTargetVersion()!==e){h.TelemetryReporter.createActionEvent(h.TelemetryViews.ProjectTree,h.TelemetryActions.changePlatformType).withAdditionalProperties({from:this.getProjectTargetVersion(),to:e}).send();const t=`${i.MicrosoftDatatoolsSchemaSqlSql}${e}${i.databaseSchemaProvider}`;this.projFileXmlDoc.getElementsByTagName(i.DSP)[0].childNodes[0].data=t,this.projFileXmlDoc.getElementsByTagName(i.DSP)[0].childNodes[0].nodeValue=t;const r=this._databaseReferences.filter((e=>e instanceof m.SystemDatabaseReferenceProjectEntry));if(r.length>0)for(let e of r)this.removeDatabaseReferenceFromProjFile(e),e.fsUri=this.getSystemDacpacUri(`${e.databaseName}.dacpac`),e.ssdtUri=this.getSystemDacpacSsdtUri(`${e.databaseName}.dacpac`),await this.addDatabaseReferenceToProjFile(e);await this.serializeToProjFile(this.projFileXmlDoc)}}async addSystemDatabaseReference(e){let t,r;e.systemDb===m.SystemDatabase.master?(t=this.getSystemDacpacUri(i.masterDacpac),r=this.getSystemDacpacSsdtUri(i.masterDacpac)):(t=this.getSystemDacpacUri(i.msdbDacpac),r=this.getSystemDacpacSsdtUri(i.msdbDacpac));const n=new m.SystemDatabaseReferenceProjectEntry(t,r,e.databaseName,e.suppressMissingDependenciesErrors);if(this.databaseReferenceExists(n))throw new Error(i.databaseReferenceAlreadyExists);await this.addToProjFile(n)}getSystemDacpacUri(e){const t=this.getSystemDacpacFolderName(),r=this.isSdkStyleProject?"$(SystemDacpacsLocation)":"$(NETCoreTargetsPath)";return p.Uri.parse(n.join(r,"SystemDacpacs",t,e))}getSystemDacpacSsdtUri(e){const t=this.getSystemDacpacFolderName();return p.Uri.parse(n.join("$(DacPacRootPath)","Extensions","Microsoft","SQLDB","Extensions","SqlServer",t,"SqlSchemas",e))}getSystemDacpacFolderName(){const e=this.getProjectTargetVersion();return e===i.targetPlatformToVersion.get("Azure Synapse Dedicated SQL Pool")?i.AzureDwFolder:e}getProjectTargetVersion(){let e;try{e=this.evaluateProjectPropertyValue(i.DSP)}catch{}if(!e)throw new Error(i.invalidDataSchemaProvider);const t=e.substring(i.MicrosoftDatatoolsSchemaSqlSql.length,e.length-i.databaseSchemaProvider.length);if(!Array.from(i.targetPlatformToVersion.values()).includes(t))throw new Error(i.invalidDataSchemaProvider);return t}getDatabaseDefaultCollation(){return this.evaluateProjectPropertyValue(i.DefaultCollationProperty,i.DefaultCollation)}async addDatabaseReference(e){const t=new m.DacpacReferenceProjectEntry(e);if(this.databaseReferenceExists(t))throw new Error(i.databaseReferenceAlreadyExists);await this.addToProjFile(t)}async addProjectReference(e){const t=new m.SqlProjectReferenceProjectEntry(e);if(this.databaseReferenceExists(t))throw new Error(i.databaseReferenceAlreadyExists);await this.addToProjFile(t)}async addSqlCmdVariable(e,t){const r=new m.SqlCmdVariableProjectEntry(e,t);await this.addToProjFile(r)}createFileProjectEntry(e,t,r){let o=a.getPlatformSafeFileEntryPath(e);return new m.FileProjectEntry(p.Uri.file(n.join(this.projectFolderPath,o)),a.convertSlashesForSqlProj(e),t,r)}findOrCreateItemGroup(e,t){let r;if(e)for(let t=0;t<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup).length;t++){const n=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ItemGroup)[t];if(n.getElementsByTagName(e).length>0){r=n;break}}return r||(r=this.projFileXmlDoc.createElement(i.ItemGroup),this.projFileXmlDoc.documentElement.appendChild(r),t&&(t.scriptExist=!1)),r}async addFileToProjFile(e,t,r){let o;if(await this.undoExcludeFileFromProjFile(t,e),t===i.PreDeploy||t===i.PostDeploy){let e={scriptExist:!0};o=this.findOrCreateItemGroup(t,e),!0===e.scriptExist&&(p.window.showInformationMessage(i.deployScriptExists(t)),t=i.None)}else{this.isSdkStyleProject&&(await this.foldersListedInSqlproj()).forEach((t=>{a.trimUri(p.Uri.file(a.getPlatformSafeFileEntryPath(t)),p.Uri.file(a.getPlatformSafeFileEntryPath(e)))===n.basename(a.getPlatformSafeFileEntryPath(e))&&this.removeFolderNode(t)}));const i=await this.readFilesInProject();if((!r||0===r.size)&&i.find((t=>t.relativePath===a.convertSlashesForSqlProj(e))))return;o=this.findOrCreateItemGroup(t)}const s=this.projFileXmlDoc.createElement(t);if(s.setAttribute(i.Include,a.convertSlashesForSqlProj(e)),r)for(const e of r.keys())s.setAttribute(e,r.get(e));o.appendChild(s)}async removeFileFromProjFile(e){const t=[this.projFileXmlDoc.documentElement.getElementsByTagName(i.Build),this.projFileXmlDoc.documentElement.getElementsByTagName(i.PreDeploy),this.projFileXmlDoc.documentElement.getElementsByTagName(i.PostDeploy),this.projFileXmlDoc.documentElement.getElementsByTagName(i.None)],r=this.files.find((t=>t.relativePath===e));let n=!1;for(let r=0;r<t.length;r++)if(n=this.removeNode(e,t[r]),n){if(this.isSdkStyleProject)break;return}if(!this.isSdkStyleProject)throw new Error(i.unableToFindObject(e,i.fileObject));if(n&&await this.serializeToProjFile(this.projFileXmlDoc),this._preDeployScripts=this.readPreDeployScripts(),this._postDeployScripts=this.readPostDeployScripts(),this._noneDeployScripts=this.readNoneDeployScripts(),(await this.readFilesInProject()).find((t=>t.relativePath===a.convertSlashesForSqlProj(e)))){const t=r?this.projFileXmlDoc.createElement(i.Build):this.projFileXmlDoc.createElement(i.None);return t.setAttribute(i.Remove,a.convertSlashesForSqlProj(e)),void this.findOrCreateItemGroup(i.Build).appendChild(t)}}removeNode(e,t,r=!1){const n=r?i.Remove:i.Include;for(let r=0;r<t.length;r++){const o=t[r].parentNode;if(o&&t[r].getAttribute(n)===a.convertSlashesForSqlProj(e))return o.removeChild(t[r]),0===Array.from(o.childNodes).filter((e=>e.childNodes)).length&&o.parentNode?.removeChild(o),!0}return!1}async undoExcludeFileFromProjFile(e,t){const r=this.projFileXmlDoc.documentElement.getElementsByTagName(e);await this.removeNode(t,r,!0)&&await this.serializeToProjFile(this.projFileXmlDoc)}async addFolderToProjFile(e){this.isSdkStyleProject&&(await this.foldersListedInSqlproj()).forEach((t=>{a.trimChars(a.trimUri(p.Uri.file(a.getPlatformSafeFileEntryPath(t)),p.Uri.file(a.getPlatformSafeFileEntryPath(e))),"/")===n.basename(a.getPlatformSafeFileEntryPath(e))&&this.removeFolderNode(t)}));const t=this.projFileXmlDoc.createElement(i.Folder);t.setAttribute(i.Include,a.convertSlashesForSqlProj(e)),this.findOrCreateItemGroup(i.Folder).appendChild(t)}async removeFolderFromProjFile(e){let t=this.removeFolderNode(e);if(this.isSdkStyleProject){if(await this.writeToSqlProjAndUpdateFilesFolders(),(await this.readFolders()).find((t=>t.relativePath===a.convertSlashesForSqlProj(e)))){const t=this.projFileXmlDoc.createElement(i.Build);t.setAttribute(i.Remove,a.convertSlashesForSqlProj(e+"**")),this.findOrCreateItemGroup(i.Build).appendChild(t),await this.writeToSqlProjAndUpdateFilesFolders()}t=!0}if(!t)throw new Error(i.unableToFindObject(e,i.folderObject))}removeFolderNode(e){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.Folder);let r=this.removeNode(e,t);return r||(r=this.removeNode(a.trimChars(e,"\\"),t)),r}async writeToSqlProjAndUpdateFilesFolders(){await this.serializeToProjFile(this.projFileXmlDoc);const e=await d.promises.readFile(this._projectFilePath);this.projFileXmlDoc=(new o.DOMParser).parseFromString(e.toString()),this._files=await this.readFilesInProject(),this.files.push(...await this.readFolders())}removeSqlCmdVariableFromProjFile(e){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.SqlCmdVariable);if(!this.removeNode(e,t))throw new Error(i.unableToFindSqlCmdVariable(e))}removeDatabaseReferenceFromProjFile(e){const t=e instanceof m.SqlProjectReferenceProjectEntry?i.ProjectReference:i.ArtifactReference,r=this.projFileXmlDoc.documentElement.getElementsByTagName(t),n=this.removeNode(e.pathForSqlProj(),r);if(e instanceof m.SystemDatabaseReferenceProjectEntry){const t=e.ssdtPathForSqlProj();this.removeNode(t,r)}if(!n)throw new Error(i.unableToFindDatabaseReference(e.databaseName))}async addSystemDatabaseReferenceToProjFile(e){const t=this.projFileXmlDoc.createElement(i.ArtifactReference);t.setAttribute(i.Condition,i.NetCoreCondition),t.setAttribute(i.Include,e.pathForSqlProj()),await this.addDatabaseReferenceChildren(t,e),this.findOrCreateItemGroup(i.ArtifactReference).appendChild(t);const r=this.projFileXmlDoc.createElement(i.ArtifactReference);r.setAttribute(i.Condition,i.NotNetCoreCondition),r.setAttribute(i.Include,e.ssdtPathForSqlProj()),await this.addDatabaseReferenceChildren(r,e),this.findOrCreateItemGroup(i.ArtifactReference).appendChild(r)}async addDatabaseReferenceToProjFile(e){if(e instanceof m.SystemDatabaseReferenceProjectEntry)await this.addSystemDatabaseReferenceToProjFile(e);else if(e instanceof m.SqlProjectReferenceProjectEntry){const t=this.projFileXmlDoc.createElement(i.ProjectReference);t.setAttribute(i.Include,e.pathForSqlProj()),this.addProjectReferenceChildren(t,e),await this.addDatabaseReferenceChildren(t,e),this.findOrCreateItemGroup(i.ProjectReference).appendChild(t)}else{const t=this.projFileXmlDoc.createElement(i.ArtifactReference);t.setAttribute(i.Include,e.pathForSqlProj()),await this.addDatabaseReferenceChildren(t,e),this.findOrCreateItemGroup(i.ArtifactReference).appendChild(t)}this.databaseReferenceExists(e)||this._databaseReferences.push(e)}databaseReferenceExists(e){return void 0!==this._databaseReferences.find((t=>t.pathForSqlProj()===e.pathForSqlProj()))}async addDatabaseReferenceChildren(e,t){const r=this.projFileXmlDoc.createElement(i.SuppressMissingDependenciesErrors),n=this.projFileXmlDoc.createTextNode(t.suppressMissingDependenciesErrors?i.True:i.False);if(r.appendChild(n),e.appendChild(r),t.databaseSqlCmdVariable){const r=this.projFileXmlDoc.createElement(i.DatabaseSqlCmdVariable),n=this.projFileXmlDoc.createTextNode(t.databaseSqlCmdVariable);r.appendChild(n),e.appendChild(r),await this.addSqlCmdVariable(t.databaseSqlCmdVariable,t.databaseVariableLiteralValue)}else if(t.databaseVariableLiteralValue){const r=this.projFileXmlDoc.createElement(i.DatabaseVariableLiteralValue),n=this.projFileXmlDoc.createTextNode(t.databaseVariableLiteralValue);r.appendChild(n),e.appendChild(r)}if(t.serverSqlCmdVariable){const r=this.projFileXmlDoc.createElement(i.ServerSqlCmdVariable),n=this.projFileXmlDoc.createTextNode(t.serverSqlCmdVariable);r.appendChild(n),e.appendChild(r),await this.addSqlCmdVariable(t.serverSqlCmdVariable,t.serverName)}}addProjectReferenceChildren(e,t){const r=this.projFileXmlDoc.createElement(i.Name),n=this.projFileXmlDoc.createTextNode(t.projectName);r.appendChild(n),e.appendChild(r);const o=this.projFileXmlDoc.createElement(i.Project),a=this.projFileXmlDoc.createTextNode(t.projectGuid);o.appendChild(a),e.appendChild(o);const s=this.projFileXmlDoc.createElement(i.Private),c=this.projFileXmlDoc.createTextNode(i.True);s.appendChild(c),e.appendChild(s)}async addSqlCmdVariableToProjFile(e){Object.keys(this._sqlCmdVariables).includes(e.variableName)&&await this.removeFromProjFile(e);const t=this.projFileXmlDoc.createElement(i.SqlCmdVariable);t.setAttribute(i.Include,e.variableName),this.addSqlCmdVariableChildren(t,e),this.findOrCreateItemGroup(i.SqlCmdVariable).appendChild(t),this._sqlCmdVariables[e.variableName]=e.defaultValue}addSqlCmdVariableChildren(e,t){const r=this.projFileXmlDoc.createElement(i.DefaultValue),n=this.projFileXmlDoc.createTextNode(t.defaultValue);r.appendChild(n),e.appendChild(r);const o=this.projFileXmlDoc.createElement(i.Value),a=this.projFileXmlDoc.createTextNode(`$(SqlCmdVar__${this.getNextSqlCmdVariableCounter()})`);o.appendChild(a),e.appendChild(o)}getNextSqlCmdVariableCounter(){const e=this.projFileXmlDoc.documentElement.getElementsByTagName(i.SqlCmdVariable);let t=0;for(let r=0;r<e.length;r++){const n=e[r].getElementsByTagName(i.Value)[0].childNodes[0].nodeValue,o=parseInt(n.substring(13).slice(0,-1));o>t&&(t=o)}return t+1}async updateImportedTargetsToProjFile(e,t,r){const n=this.projFileXmlDoc.createElement(i.Import);return n.setAttribute(i.Condition,e),n.setAttribute(i.Project,t),r?this.projFileXmlDoc.documentElement.replaceChild(n,r):(this.projFileXmlDoc.documentElement.appendChild(n),this._importedTargets.push(t)),await this.serializeToProjFile(this.projFileXmlDoc),n}async updatePackageReferenceInProjFile(){const e=this.projFileXmlDoc.createElement(i.PackageReference);e.setAttribute(i.Condition,i.NetCoreCondition),e.setAttribute(i.Include,i.NETFrameworkAssembly),e.setAttribute(i.Version,i.VersionNumber),e.setAttribute(i.PrivateAssets,i.All),this.findOrCreateItemGroup(i.PackageReference).appendChild(e),await this.serializeToProjFile(this.projFileXmlDoc)}containsSSDTOnlySystemDatabaseReferences(){for(let e=0;e<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference).length;e++){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference)[e];if(t.getAttribute(i.Condition)!==i.NetCoreCondition&&t.getAttribute(i.Condition)!==i.NotNetCoreCondition&&t.getAttribute(i.Include)?.includes(i.DacpacRootPath))return!0}return!1}async updateSystemDatabaseReferencesInProjFile(){for(let e=0;e<this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference).length;e++){const t=this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference)[e];if(!t.getAttribute(i.Condition)&&t.getAttribute(i.Include)?.includes(i.DacpacRootPath)){const e=t.getAttribute(i.Include)?.includes(i.master)?m.SystemDatabase.master:m.SystemDatabase.msdb,r=t.getElementsByTagName(i.DatabaseVariableLiteralValue)[0].childNodes[0]?.nodeValue,n=t.getElementsByTagName(i.SuppressMissingDependenciesErrors)[0].childNodes[0].nodeValue===i.True;this.projFileXmlDoc.documentElement.removeChild(t),0===this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference).length&&this.projFileXmlDoc.documentElement.removeChild(t.parentNode),this._databaseReferences.splice(this._databaseReferences.findIndex((t=>t.databaseName===(e===m.SystemDatabase.master?i.master:i.msdb))),1),await this.addSystemDatabaseReference({databaseName:r,systemDb:e,suppressMissingDependenciesErrors:n})}}h.TelemetryReporter.createActionEvent(h.TelemetryViews.ProjectController,h.TelemetryActions.updateSystemDatabaseReferencesInProjFile).withAdditionalMeasurements({referencesCount:this.projFileXmlDoc.documentElement.getElementsByTagName(i.ArtifactReference).length}).send()}async addToProjFile(e,t,r){switch(e.type){case m.EntryType.File:await this.addFileToProjFile(e.relativePath,t||i.Build,r);break;case m.EntryType.Folder:await this.addFolderToProjFile(e.relativePath);break;case m.EntryType.DatabaseReference:await this.addDatabaseReferenceToProjFile(e);break;case m.EntryType.SqlCmdVariable:await this.addSqlCmdVariableToProjFile(e)}await this.serializeToProjFile(this.projFileXmlDoc)}async removeFromProjFile(e){e instanceof m.ProjectEntry&&(e=[e]);const t=e.filter((e=>e.type===m.EntryType.Folder));for(const e of t)await this.removeFolderFromProjFile(e.relativePath);e=e.filter((e=>e.type!==m.EntryType.Folder));for(const t of e)switch(t.type){case m.EntryType.File:await this.removeFileFromProjFile(t.relativePath);break;case m.EntryType.DatabaseReference:this.removeDatabaseReferenceFromProjFile(t);break;case m.EntryType.SqlCmdVariable:this.removeSqlCmdVariableFromProjFile(t.variableName)}await this.serializeToProjFile(this.projFileXmlDoc)}async serializeToProjFile(e){let t=(new o.XMLSerializer).serializeToString(e);t=s(t,{collapseContent:!0,indentation:"  ",lineSeparator:c.EOL,whiteSpaceAtEndOfSelfclosingTag:!0}),await d.promises.writeFile(this._projectFilePath,t),this.projFileXmlDoc=(new o.DOMParser).parseFromString(t)}async addToProject(e){for(let t of e)if(!await a.exists(t.fsPath))throw new Error(i.fileOrFolderDoesNotExist(t.fsPath));for(let t of e){const e=a.trimChars(a.trimUri(p.Uri.file(this._projectFilePath),t),"/");if(e.length>0){const r=await d.promises.stat(t.fsPath);r.isFile()&&t.fsPath.toLowerCase().endsWith(i.sqlFileExtension)?await this.addScriptItem(e):r.isDirectory()&&await this.addFolderItem(e)}}}evaluateProjectPropertyValue(e,t){const r=this.projFileXmlDoc.getElementsByTagName(e);if(0===r.length)return t;const n=r[0];if(1!==n.childNodes.length)throw new Error(i.invalidProjectPropertyValue(e));return n.childNodes[0].nodeValue}async ensureFolderItems(e){if(!e)return;const t=n.join(this.projectFolderPath,e),r=n.normalize(this.projectFolderPath);if(!t.toUpperCase().startsWith(r.toUpperCase()))return;if(await d.promises.mkdir(t,{recursive:!0}),this.isSdkStyleProject){let t=this.files.find((t=>a.ensureTrailingSlash(t.relativePath.toUpperCase())===a.ensureTrailingSlash(e.toUpperCase())));return t||(t=this.createFileProjectEntry(a.ensureTrailingSlash(e),m.EntryType.Folder),this.files.push(t),await this.addToProjFile(t)),t}const o=a.convertSlashesForSqlProj(t.substring(r.length)),s=a.trimChars(o," \\").split(i.SqlProjPathSeparator);let c,l="";for(let e of s)e&&(l+=e+i.SqlProjPathSeparator,c=this.files.find((e=>a.ensureTrailingSlash(e.relativePath.toUpperCase())===l.toUpperCase())),c||(c=this.createFileProjectEntry(l,m.EntryType.Folder),this.files.push(c),await this.addToProjFile(c)));return c}}t.Project=f,t.reservedProjectFolders=["Properties","Data Sources","Database References"]},6742:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SystemDatabase=t.DatabaseReferenceLocation=t.EntryType=t.SqlCmdVariableProjectEntry=t.SqlProjectReferenceProjectEntry=t.SystemDatabaseReferenceProjectEntry=t.DacpacReferenceProjectEntry=t.FileProjectEntry=t.ProjectEntry=void 0;const n=r(5622),o=r(1027);class i{constructor(e){this.type=e}}t.ProjectEntry=i;class a extends i{constructor(e,t,r,n){super(r),this.fsUri=e,this.relativePath=t,this.sqlObjectType=n}toString(){return this.fsUri.path}pathForSqlProj(){return o.convertSlashesForSqlProj(this.fsUri.fsPath)}}var s,c,l;t.FileProjectEntry=a,t.DacpacReferenceProjectEntry=class extends a{constructor(e){super(e.dacpacFileLocation,"",s.DatabaseReference),this.databaseSqlCmdVariable=e.databaseVariable,this.databaseVariableLiteralValue=e.databaseName,this.serverName=e.serverName,this.serverSqlCmdVariable=e.serverVariable,this.suppressMissingDependenciesErrors=e.suppressMissingDependenciesErrors}get databaseName(){return n.parse(o.getPlatformSafeFileEntryPath(this.fsUri.fsPath)).name}pathForSqlProj(){return o.convertSlashesForSqlProj(this.fsUri.path.substring(1))}},t.SystemDatabaseReferenceProjectEntry=class extends a{constructor(e,t,r,n){super(e,"",s.DatabaseReference),this.ssdtUri=t,this.databaseVariableLiteralValue=r,this.suppressMissingDependenciesErrors=n}get databaseName(){return n.parse(o.getPlatformSafeFileEntryPath(this.fsUri.fsPath)).name}pathForSqlProj(){return o.convertSlashesForSqlProj(this.fsUri.path.substring(1))}ssdtPathForSqlProj(){return o.convertSlashesForSqlProj(this.ssdtUri.path.substring(1))}},t.SqlProjectReferenceProjectEntry=class extends a{constructor(e){super(e.projectRelativePath,"",s.DatabaseReference),this.projectName=e.projectName,this.projectGuid=e.projectGuid,this.databaseSqlCmdVariable=e.databaseVariable,this.databaseVariableLiteralValue=e.databaseName,this.serverName=e.serverName,this.serverSqlCmdVariable=e.serverVariable,this.suppressMissingDependenciesErrors=e.suppressMissingDependenciesErrors}get databaseName(){return this.projectName}pathForSqlProj(){return o.convertSlashesForSqlProj(this.fsUri.path.substring(1))}},t.SqlCmdVariableProjectEntry=class extends i{constructor(e,t){super(s.SqlCmdVariable),this.variableName=e,this.defaultValue=t}},function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.DatabaseReference=2]="DatabaseReference",e[e.SqlCmdVariable=3]="SqlCmdVariable"}(s=t.EntryType||(t.EntryType={})),(l=t.DatabaseReferenceLocation||(t.DatabaseReferenceLocation={}))[l.sameDatabase=0]="sameDatabase",l[l.differentDatabaseSameServer=1]="differentDatabaseSameServer",l[l.differentDatabaseDifferentServer=2]="differentDatabaseDifferentServer",(c=t.SystemDatabase||(t.SystemDatabase={}))[c.master=0]="master",c[c.msdb=1]="msdb"},5932:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.readPublishProfile=void 0;const n=r(647),o=r(6078),i=r(1027),a=r(7549),s=r(5747),c=r(6502);async function l(e,t){const r=await s.promises.readFile(e.fsPath),a=(new n.DOMParser).parseFromString(r.toString());let l="",u=a.documentElement.getElementsByTagName(o.targetDatabaseName).length;u>0&&(l=a.documentElement.getElementsByTagName(o.targetDatabaseName)[u-1].textContent);const p=await async function(e){let t="",r="",n="";if(e.documentElement.getElementsByTagName(o.targetConnectionString).length>0){const a=e.documentElement.getElementsByTagName(o.TargetConnectionString)[0].textContent,s=new c.SqlConnectionDataSource("",a);let l="";const u=s.getConnectionProfile();try{const e=i.getAzdataApi();if(s.integratedSecurity)e&&(r=(await i.getAzdataApi().connection.connect(u,!1,!1)).connectionId),n=s.server,l=o.defaultUser;else if(e){const e=await i.getAzdataApi().connection.openConnectionDialog(void 0,u);r=e.connectionId,n=e.options.server,l=e.options.user}t=`${n} (${l})`}catch(e){throw new Error(o.unableToCreatePublishConnection(i.getErrorMessage(e)))}}return{connectionId:r,connection:t,server:n}}(a),d=await t.getOptionsFromProfile(e.fsPath),h=i.readSqlCmdVariables(a,!0);return{databaseName:l,serverName:p.server,connectionId:p.connectionId,connection:p.connection,sqlCmdVariables:h,options:d.deploymentOptions}}t.readPublishProfile=async function(e){try{const t=await i.getDacFxService();return await l(e,t)}catch(e){throw a.window.showErrorMessage(o.profileReadError(e)),e}},t.load=l},4175:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpacerTreeItem=t.MessageTreeItem=t.BaseProjectTreeItem=void 0;const n=r(7549),o=r(5622);class i{constructor(e,t){this.projectUri=e,this.parent=t}get friendlyName(){return o.parse(this.projectUri.path).base}get root(){let e=this;for(;void 0!==e.parent;)e=e.parent;return e}}t.BaseProjectTreeItem=i;class a extends i{constructor(e,t){super(n.Uri.file(o.join(t?.projectUri.path??"Message",e)),t),this.message=e}get children(){return[]}get treeItem(){return new n.TreeItem(this.message,n.TreeItemCollapsibleState.None)}}t.MessageTreeItem=a,t.SpacerTreeItem=new a("")},8957:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.constructDataSourceTreeItem=t.SqlConnectionDataSourceTreeItem=t.DataSourcesTreeItem=void 0;const n=r(7549),o=r(5622),i=r(4175),a=r(6078),s=r(6502),c=r(5894);class l extends i.BaseProjectTreeItem{constructor(e){super(n.Uri.file(o.join(e.projectUri.path,a.dataSourcesNodeName)),e),this.dataSources=[],this.construct()}construct(){for(const e of this.parent.project.dataSources)this.dataSources.push(d(e,this))}get children(){return this.dataSources}get treeItem(){const e=new n.TreeItem(this.projectUri,n.TreeItemCollapsibleState.Collapsed);return e.contextValue=a.DatabaseProjectItemType.dataSourceRoot,e.iconPath=c.IconPathHelper.dataSourceGroup,e}}t.DataSourcesTreeItem=l;class u extends i.BaseProjectTreeItem{}class p extends u{constructor(e,t){super(n.Uri.file(o.join(t.projectUri.path,e.name)),t),this.dataSource=e}get treeItem(){let e=new n.TreeItem(this.projectUri,n.TreeItemCollapsibleState.Collapsed);return e.label=`${this.dataSource.name} (${this.dataSource.typeFriendlyName})`,e.iconPath=c.IconPathHelper.dataSourceSql,e}get children(){const e=[];for(const t of Object.keys(this.dataSource.connectionStringComponents).sort())e.push(new i.MessageTreeItem(`${t}: ${this.dataSource.connectionStringComponents[t]}`,this));return e}}function d(e,t){switch(e.type){case s.SqlConnectionDataSource.type:return new p(e,t);default:throw new Error(a.unknownDataSourceType+e.type)}}t.SqlConnectionDataSourceTreeItem=p,t.constructDataSourceTreeItem=d},122:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DatabaseReferenceTreeItem=t.DatabaseReferencesTreeItem=void 0;const n=r(7549),o=r(5622),i=r(6078),a=r(4175),s=r(5894);class c extends a.BaseProjectTreeItem{constructor(e){super(n.Uri.file(o.join(e.projectUri.fsPath,i.databaseReferencesNodeName)),e),this.references=[],this.construct()}construct(){for(const e of this.parent.project.databaseReferences)this.references.push(new l(e,this))}get children(){return this.references}get treeItem(){const e=new n.TreeItem(this.projectUri,n.TreeItemCollapsibleState.Collapsed);return e.contextValue=i.DatabaseProjectItemType.referencesRoot,e.iconPath=s.IconPathHelper.referenceGroup,e}}t.DatabaseReferencesTreeItem=c;class l extends a.BaseProjectTreeItem{constructor(e,t){super(n.Uri.file(o.join(t.projectUri.fsPath,e.databaseName)),t),this.reference=e}get children(){return[]}get treeItem(){const e=new n.TreeItem(this.projectUri,n.TreeItemCollapsibleState.None);return e.label=this.reference.databaseName,e.contextValue=i.DatabaseProjectItemType.reference,e.iconPath=s.IconPathHelper.referenceDatabase,e}}t.DatabaseReferenceTreeItem=l},2134:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortFileFolderNodes=t.ExternalStreamingJobFileNode=t.FileNode=t.FolderNode=void 0;const n=r(7549),o=r(5622),i=r(1027),a=r(4175),s=r(6078),c=r(5894);class l extends a.BaseProjectTreeItem{constructor(e,t){super(d(e,t.root),t),this.fileChildren={},this.fileSystemUri=e}get children(){return Object.values(this.fileChildren).sort(p)}get treeItem(){const e=new n.TreeItem(this.fileSystemUri,n.TreeItemCollapsibleState.Collapsed);return e.contextValue=s.DatabaseProjectItemType.folder,e.iconPath=c.IconPathHelper.folder,e}get project(){return this.parent.project}}t.FolderNode=l;class u extends a.BaseProjectTreeItem{constructor(e,t){super(d(e,t.root,!0),t),this.fileSystemUri=e}get children(){return[]}get treeItem(){const e=new n.TreeItem(this.fileSystemUri,n.TreeItemCollapsibleState.None);return e.command={title:"Open file",command:"vscode.open",arguments:[this.fileSystemUri]},e.contextValue=s.DatabaseProjectItemType.file,e}}function p(e,t){return e instanceof l&&!(t instanceof l)?-1:!(e instanceof l)&&t instanceof l?1:e.projectUri.fsPath.localeCompare(t.projectUri.fsPath)}function d(e,t,r){const a=t.project.projectFolderPath;let s="";if(e.fsPath.startsWith(a))s=e.fsPath.substring(a.length);else if(r){const t=i.getPlatformSafeFileEntryPath(e.fsPath).split("/");s=t[t.length-1]}return n.Uri.file(o.join(t.projectUri.fsPath,s))}t.FileNode=u,t.ExternalStreamingJobFileNode=class extends u{get treeItem(){const e=super.treeItem;return e.contextValue=s.DatabaseProjectItemType.externalStreamingJob,e}},t.sortFileFolderNodes=p},7920:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectRootTreeItem=void 0;const n=r(7549),o=r(5622),i=r(8957),a=r(4175),s=r(2134),c=r(1027),l=r(122),u=r(6078),p=r(5894),d=r(6742);class h extends a.BaseProjectTreeItem{constructor(e){super(n.Uri.parse(o.basename(e.projectFilePath,u.sqlprojExtension)),void 0),this.fileChildren={},this.project=e,this.fileSystemUri=n.Uri.file(e.projectFilePath),this.dataSourceNode=new i.DataSourcesTreeItem(this),this.databaseReferencesNode=new l.DatabaseReferencesTreeItem(this),this.construct()}get children(){const e=[];return e.push(this.databaseReferencesNode),e.concat(Object.values(this.fileChildren).sort(s.sortFileFolderNodes))}get treeItem(){const e=new n.TreeItem(this.fileSystemUri,n.TreeItemCollapsibleState.Expanded);return e.contextValue=this.project.isSdkStyleProject?u.DatabaseProjectItemType.project:u.DatabaseProjectItemType.legacyProject,e.iconPath=p.IconPathHelper.databaseProject,e.label=o.basename(this.projectUri.fsPath,u.sqlprojExtension),e}construct(){let e=this.project.files.concat(this.project.preDeployScripts).concat(this.project.postDeployScripts).concat(this.project.noneDeployScripts);for(const t of e){if(t.type!==d.EntryType.File&&t.relativePath.startsWith(u.RelativeOuterPath))continue;const e=this.getEntryParentNode(t);if(Object.keys(e.fileChildren).includes(o.basename(t.fsUri.path)))continue;let r;switch(t.type){case d.EntryType.File:r=t.sqlObjectType===u.ExternalStreamingJob?new s.ExternalStreamingJobFileNode(t.fsUri,e):new s.FileNode(t.fsUri,e);break;case d.EntryType.Folder:r=new s.FolderNode(t.fsUri,e);break;default:throw new Error(`Unknown EntryType: '${t.type}'`)}e.fileChildren[o.basename(t.fsUri.path)]=r}}getEntryParentNode(e){const t=c.trimChars(c.trimUri(n.Uri.file(this.project.projectFilePath),e.fsUri),"/").split("/").slice(0,-1);if(0===t.length)return this;if(t[0]===u.RelativeOuterPath)return this;let r=this;for(const e of t){if(void 0===r.fileChildren[e]){const t=r instanceof h?o.dirname(r.fileSystemUri.fsPath):r.fileSystemUri.fsPath;r.fileChildren[e]=new s.FolderNode(n.Uri.file(o.join(t,e)),r)}if(r.fileChildren[e]instanceof s.FileNode)return r;r=r.fileChildren[e]}return r}}t.ProjectRootTreeItem=h},7482:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadAssets=t.targetPlatformToAssets=void 0;const n=r(5622);t.loadAssets=function(e){t.targetPlatformToAssets=new Map([["AzureV12",{readmeFolder:n.join(e,"AzureV12")}]])}},6650:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SqlDatabaseProjectProvider=void 0;const n=r(7549),o=r(6078),i=r(5894),a=r(1027),s=r(5372),c=r(4935);t.SqlDatabaseProjectProvider=class{constructor(e){this.projectController=e}async getProjectTreeDataProvider(e){const t=new s.SqlDatabaseProjectTreeViewProvider,r=await c.Project.openProject(e.fsPath);return t.load([r]),t}get supportedProjectTypes(){return[{id:o.emptyAzureDbSqlDatabaseProjectTypeId,projectFileExtension:o.sqlprojExtension.replace(/\./g,""),displayName:o.emptyAzureDbProjectTypeDisplayName,description:o.emptyAzureDbProjectTypeDescription,defaultTargetPlatform:"Azure SQL Database",icon:i.IconPathHelper.azureSqlDbProject,sdkStyleOption:!0,sdkStyleLearnMoreUrl:o.sdkLearnMoreUrl},{id:o.emptySqlDatabaseProjectTypeId,projectFileExtension:o.sqlprojExtension.replace(/\./g,""),displayName:o.emptyProjectTypeDisplayName,description:o.emptyProjectTypeDescription,icon:i.IconPathHelper.colorfulSqlProject,targetPlatforms:Array.from(o.targetPlatformToVersion.keys()),defaultTargetPlatform:o.defaultTargetPlatform,sdkStyleOption:!0,sdkStyleLearnMoreUrl:o.sdkLearnMoreUrl},{id:o.edgeSqlDatabaseProjectTypeId,projectFileExtension:o.sqlprojExtension.replace(/\./g,""),displayName:o.edgeProjectTypeDisplayName,description:o.edgeProjectTypeDescription,icon:i.IconPathHelper.sqlEdgeProject,sdkStyleOption:!0,sdkStyleLearnMoreUrl:o.sdkLearnMoreUrl}]}async createProject(e,t,r,o,i=!0){if(!o){const e=this.supportedProjectTypes.find((e=>e.id===r));e&&e.defaultTargetPlatform&&(o=e.defaultTargetPlatform)}const a=await this.projectController.createNewProject({newProjName:e,folderUri:t,projectTypeId:r,targetPlatform:o,sdkStyle:i});return n.Uri.file(a)}openProject(e){return c.Project.openProject(e)}get projectToolbarActions(){return[{actions:[{id:o.addItemAction,icon:i.IconPathHelper.add,run:e=>this.projectController.addItemPromptFromNode(e)},{id:o.schemaCompareAction,icon:i.IconPathHelper.schemaCompare,run:e=>this.projectController.schemaCompare(e)},{id:o.buildAction,icon:i.IconPathHelper.build,run:e=>this.projectController.buildProject(e)},{id:o.publishAction,icon:i.IconPathHelper.publish,run:e=>this.projectController.publishProject(e)}]},{id:o.changeTargetPlatformAction,icon:i.IconPathHelper.targetPlatform,run:e=>this.projectController.changeTargetPlatform(e)}]}getDashboardComponents(e){const t=200;return[{name:o.PublishHistory,columns:[{displayName:o.Status,width:t,type:"icon"},{displayName:o.Date,width:t},{displayName:o.Time,width:t},{displayName:o.TargetPlatform,width:t},{displayName:o.TargetServer,width:t},{displayName:o.TargetDatabase,width:t}],data:this.projectController.getDashboardPublishData(e)},{name:o.BuildHistory,columns:[{displayName:o.Status,width:t,type:"icon"},{displayName:o.Date,width:t},{displayName:o.Time,width:t},{displayName:o.TargetPlatform,width:t}],data:this.projectController.getDashboardBuildData(e)}]}get image(){return i.IconPathHelper.dashboardSqlProj}async openSqlNewProjectDialog(e){let t=Array.from(o.targetPlatformToVersion.keys());e&&(t=t.filter((t=>e.toString().includes(t))));const r={id:o.emptySqlDatabaseProjectTypeId,projectFileExtension:o.sqlprojExtension.replace(/\./g,""),displayName:o.emptyProjectTypeDisplayName,description:o.emptyProjectTypeDescription,icon:i.IconPathHelper.colorfulSqlProject,targetPlatforms:t,defaultTargetPlatform:o.defaultTargetPlatform};return(0,a.getDataWorkspaceExtensionApi)().openSpecificProjectNewProjectDialog(r)}async getProjectScriptFiles(e){return await this.projectController.getProjectScriptFiles(e)}async getProjectDatabaseSchemaProvider(e){return await this.projectController.getProjectDatabaseSchemaProvider(e)}}},2102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=t.ProjectScriptType=t.macroExpansion=t.loadTemplates=t.projectScriptTypes=t.get=t.postDeployScript=t.preDeployScript=t.folder=t.externalStreamingJob=t.externalStream=t.fileFormat=t.dataSource=t.storedProcedure=t.view=t.table=t.script=t.newSdkSqlProjectTemplate=t.newSqlProjectTemplate=void 0;const n=r(5622),o=r(6078),i=r(5747);t.script="script",t.table="table",t.view="view",t.storedProcedure="storedProcedure",t.dataSource="dataSource",t.fileFormat="fileFormat",t.externalStream="externalStream",t.externalStreamingJob="externalStreamingJob",t.folder="folder",t.preDeployScript="preDeployScript",t.postDeployScript="postDeployScript";let a={};t.get=function(e){if(0===Object.keys(a).length)throw new Error("Templates must be loaded from file before attempting to use.");return a[e.toLocaleLowerCase()]};let s=[];async function c(e,t,r,n){const o=await l(r,n);return s.push(new u(e,t,o)),e}async function l(e,t){return(await i.promises.readFile(n.join(e,t))).toString()}t.projectScriptTypes=function(){if(0===s.length)throw new Error("Templates must be loaded from file before attempting to use.");return s},t.loadTemplates=async function(e){p(),await Promise.all([Promise.resolve(t.newSqlProjectTemplate=await l(e,"newSqlProjectTemplate.xml")),Promise.resolve(t.newSdkSqlProjectTemplate=await l(e,"newSdkSqlProjectTemplate.xml")),c(t.script,o.scriptFriendlyName,e,"newTsqlScriptTemplate.sql"),c(t.table,o.tableFriendlyName,e,"newTsqlTableTemplate.sql"),c(t.view,o.viewFriendlyName,e,"newTsqlViewTemplate.sql"),c(t.storedProcedure,o.storedProcedureFriendlyName,e,"newTsqlStoredProcedureTemplate.sql"),c(t.preDeployScript,o.preDeployScriptFriendlyName,e,"newTsqlPreDeployScriptTemplate.sql"),c(t.postDeployScript,o.postDeployScriptFriendlyName,e,"newTsqlPostDeployScriptTemplate.sql"),c(t.dataSource,o.dataSourceFriendlyName,e,"newTsqlDataSourceTemplate.sql"),c(t.fileFormat,o.fileFormatFriendlyName,e,"newTsqlFileFormatTemplate.sql"),c(t.externalStream,o.externalStreamFriendlyName,e,"newTsqlExternalStreamTemplate.sql"),c(t.externalStreamingJob,o.externalStreamingJobFriendlyName,e,"newTsqlExternalStreamingJobTemplate.sql")]);for(const e of s){if(Object.keys(a).find((t=>t===e.type.toLocaleLowerCase()||t===e.friendlyName.toLocaleLowerCase())))throw new Error(`Script type map already contains ${e.type} or its friendlyName.`);a[e.type.toLocaleLowerCase()]=e,a[e.friendlyName.toLocaleLowerCase()]=e}},t.macroExpansion=function(e,t){const r="@@";let n=e;for(const e in t){if(t[e].includes(r))throw new Error(`Macro value ${t[e]} is invalid because it contains @@`);n=n.replace(new RegExp(r+e+r,"g"),t[e])}return n};class u{constructor(e,t,r){this.type=e,this.friendlyName=t,this.templateScript=r}}function p(){a={},s=[]}t.ProjectScriptType=u,t.reset=p},4191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutorestHelper=void 0;const n=r(7549),o=r(6078),i=r(1027),a=r(1249),s=r(5191),c=r(3848);class l extends c.ShellExecutionHelper{constructor(e){super(e)}get autorestSqlPackageVersion(){let e=n.workspace.getConfiguration(s.DBProjectConfigurationKey).autorestSqlVersion;return e&&a.valid(e.trim())?e.trim():"latest"}async detectInstallation(){const e="autorest";if(await i.detectCommandInstallation(e))return e;if(await i.detectCommandInstallation("npx")){this._outputChannel.appendLine(o.nodeButNotAutorestFound);const t=await n.window.showInformationMessage(o.nodeButNotAutorestFoundPrompt,o.installGlobally,o.runViaNpx);if(t===o.installGlobally)return this._outputChannel.appendLine(o.userSelectionInstallGlobally),await this.runStreamedCommand("npm install autorest -g"),e;if(t===o.runViaNpx)return this._outputChannel.appendLine(o.userSelectionRunNpx),"npx autorest";this._outputChannel.appendLine(o.userSelectionCancelled)}else this._outputChannel.appendLine(o.nodeNotFound)}async generateAutorestFiles(e,t){const r=await this.detectInstallation();if(!r){if(!0!==n.workspace.getConfiguration(s.DBProjectConfigurationKey).nodejsDoNotAsk)return;const e=await n.window.showErrorMessage(o.nodeNotFound,o.DoNotAskAgain,o.Install);if(e===o.Install){const e="https://nodejs.dev/download";await n.env.openExternal(n.Uri.parse(e))}else if(e===o.DoNotAskAgain){const e=n.workspace.getConfiguration(s.DBProjectConfigurationKey);await e.update("nodejsDoNotAsk",!0,n.ConfigurationTarget.Global)}return}const i=this.constructAutorestCommand(r,e,t);return await this.runStreamedCommand(i)}constructAutorestCommand(e,t,r){return`${e} --use:autorest-sql-testing@${this.autorestSqlPackageVersion} --input-file="${t}" --output-folder="${r}" --clear-output-folder --verbose`}}t.AutorestHelper=l},4914:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BuildHelper=void 0;const n=r(7549),o=r(5622),i=r(5747),a=r(1027),s=r(6078),c=["Microsoft.Data.SqlClient.dll","Microsoft.Data.Tools.Schema.Sql.dll","Microsoft.Data.Tools.Schema.Tasks.Sql.dll","Microsoft.Data.Tools.Utilities.dll","Microsoft.SqlServer.Dac.dll","Microsoft.SqlServer.Dac.Extensions.dll","Microsoft.SqlServer.TransactSql.ScriptDom.dll","Microsoft.SqlServer.Types.dll","System.ComponentModel.Composition.dll","System.IO.Packaging.dll","Microsoft.Data.Tools.Schema.SqlTasks.targets"];t.BuildHelper=class{constructor(){this.initialized=!1;const e=a.getAzdataApi()?"Microsoft.sql-database-projects":"ms-mssql.sql-database-projects-vscode";this.extensionDir=n.extensions.getExtension(e)?.extensionPath??"",this.extensionBuildDir=o.join(this.extensionDir,"BuildDirectory")}async createBuildDirFolder(){if(this.initialized)return;await a.exists(this.extensionBuildDir)||await i.promises.mkdir(this.extensionBuildDir);const e=await this.getBuildDirPathFromMssqlTools();c.forEach((async t=>{await a.exists(o.join(e,t))&&await i.promises.copyFile(o.join(e,t),o.join(this.extensionBuildDir,t))})),this.initialized=!0}async getBuildDirPathFromMssqlTools(){try{return a.getAzdataApi()?n.extensions.getExtension("Microsoft.mssql")?.exports.sqlToolsServicePath:n.extensions.getExtension("ms-mssql.mssql")?.exports.sqlToolsServicePath}catch(e){throw new Error((0,s.errorFindingBuildFilesLocation)(e))}}get extensionBuildDirPath(){return this.extensionBuildDir}constructBuildArguments(e,t,r){return e=a.getQuotedPath(e),t=a.getQuotedPath(t),r?` build ${e} /p:NetCoreBuild=true /p:SystemDacpacsLocation=${t}`:` build ${e} /p:NetCoreBuild=true /p:NETCoreTargetsPath=${t}`}}},5191:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DotNetError=t.NetCoreTool=t.minSupportedNetCoreVersionForBuild=t.linuxPlatform=t.macPlatform=t.winPlatform=t.NetCoreNonWindowsDefaultPath=t.NetCoreDoNotAskAgainKey=t.DotnetInstallLocationKey=t.NetCoreInstallLocationKey=t.DBProjectConfigurationKey=void 0;const n=r(3129),o=r(5747),i=r(2087),a=r(5622),s=r(1249),c=r(1669),l=r(7549),u=r(3403),p=r(6078),d=r(1027),h=r(3848),m=u.loadMessageBundle(r(5622).join(__dirname,"tools/netcoreTool.ts"));t.DBProjectConfigurationKey="sqlDatabaseProjects",t.NetCoreInstallLocationKey="netCoreSDKLocation",t.DotnetInstallLocationKey="dotnetSDK Location",t.NetCoreDoNotAskAgainKey="netCoreDoNotAsk",t.NetCoreNonWindowsDefaultPath="/usr/local/share",t.winPlatform="win32",t.macPlatform="darwin",t.linuxPlatform="linux",t.minSupportedNetCoreVersionForBuild="3.1.0";const f="win32"===i.platform()?"dotnet.exe":"dotnet";class g extends h.ShellExecutionHelper{constructor(e){super(e),this.osPlatform=i.platform(),this.netCoreInstallState=2}async findOrInstallNetCore(e=!1){return this.isNetCoreInstallationPresent&&(!this.isNetCoreInstallationPresent||e)||this.isNetCoreInstallationPresent&&await this.isNetCoreVersionSupportedForBuild()?(this.netCoreInstallState=2,!0):(!0!==l.workspace.getConfiguration(t.DBProjectConfigurationKey)[t.NetCoreDoNotAskAgainKey]&&this.showInstallDialog(),!1)}async showInstallDialog(){let e;if(e=0===this.netCoreInstallState?await l.window.showErrorMessage(p.DotnetInstallationConfirmation,p.UpdateDotnetLocation,p.Install,p.DoNotAskAgain):await l.window.showErrorMessage((0,p.NetCoreSupportedVersionInstallationConfirmation)(this.netCoreSdkInstalledVersion),p.UpdateDotnetLocation,p.Install,p.DoNotAskAgain),e===p.UpdateDotnetLocation)await l.commands.executeCommand("workbench.action.openGlobalSettings");else if(e===p.Install){const e="https://dotnet.microsoft.com/download/dotnet-core/3.1";await l.env.openExternal(l.Uri.parse(e))}else if(e===p.DoNotAskAgain){const e=l.workspace.getConfiguration(t.DBProjectConfigurationKey);await e.update(t.NetCoreDoNotAskAgainKey,!0,l.ConfigurationTarget.Global)}}get isNetCoreInstallationPresent(){const e=!(0,c.isNullOrUndefined)(this.netcoreInstallLocation)&&o.existsSync(this.netcoreInstallLocation);return e||(this.netCoreInstallState=0),e}get netcoreInstallLocation(){return l.workspace.getConfiguration(t.DBProjectConfigurationKey)[t.DotnetInstallLocationKey]||this.defaultLocalInstallLocationByDistribution}get defaultLocalInstallLocationByDistribution(){switch(this.osPlatform){case t.winPlatform:return this.defaultWindowsLocation;case t.macPlatform:case t.linuxPlatform:return this.defaultnonWindowsLocation;default:return}}get defaultnonWindowsLocation(){return this.getDotnetPathIfPresent(t.NetCoreNonWindowsDefaultPath)||this.getDotnetPathIfPresent(i.homedir())||void 0}get defaultWindowsLocation(){return this.getDotnetPathIfPresent(process.env.ProgramW6432)||this.getDotnetPathIfPresent(process.env["ProgramFiles(x86)"])||this.getDotnetPathIfPresent(process.env.ProgramFiles)}getDotnetPathIfPresent(e){if(!(0,c.isNullOrUndefined)(e)&&o.existsSync(a.join(e,"dotnet")))return a.join(e,"dotnet")}async isNetCoreVersionSupportedForBuild(){try{const e=n.spawn;let r,o=!1;const i=[];return r=e("dotnet --version",[],{shell:!0}),r.stdout.on("data",(e=>i.push(e))),await new Promise(((e,n)=>{r.on("exit",(()=>{this.netCoreSdkInstalledVersion=Buffer.concat(i).toString("utf8").trim();try{o=!!s.gte(this.netCoreSdkInstalledVersion,t.minSupportedNetCoreVersionForBuild),e({stdout:this.netCoreSdkInstalledVersion})}catch(e){console.log(e),n(e)}})),r.on("error",(e=>{console.log(e),this.netCoreInstallState=0,n(e)}))})),this.netCoreInstallState=o?2:1,o}catch(e){return console.log(e),void(this.netCoreInstallState=0)}}async runDotnetCommand(e,t=!1){if(e&&void 0!==e.commandTitle&&null!==e.commandTitle&&this._outputChannel.appendLine(`\t[ ${e.commandTitle} ]`),!await this.findOrInstallNetCore(t))throw 0===this.netCoreInstallState?new y(p.DotnetInstallationConfirmation):new y((0,p.NetCoreSupportedVersionInstallationConfirmation)(this.netCoreSdkInstalledVersion));const r=d.getQuotedPath(a.join(this.netcoreInstallLocation,f))+" "+e.argument;try{return await this.runStreamedCommand(r,e)}catch(e){throw this._outputChannel.append(m(0,null,r,d.getErrorMessage(e))),e}}}t.NetCoreTool=g;class y extends Error{}t.DotNetError=y},2527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProjectNameFromDb=t.defaultProjectNameNewProj=t.defaultProjectSaveLocation=void 0;const n=r(7549),o=r(5747),i=r(5622),a=r(2087),s=r(6078),c=r(1027);function l(){return c.getDataWorkspaceExtensionApi().defaultProjectSaveLocation}function u(e,t){for(;t<Number.MAX_SAFE_INTEGER;){const r=e+t,s=l()??n.Uri.file(a.homedir()),c=i.join(s.fsPath,r);if(!o.existsSync(c))return r;t++}return s.defaultProjectNameStarter+t}t.defaultProjectSaveLocation=l,t.defaultProjectNameNewProj=function(){return u(s.defaultProjectNameStarter,1)},t.defaultProjectNameFromDb=function(e){if(!e)return"";const t=s.defaultProjectNameStarter+e,r=l()??n.Uri.file(a.homedir()),c=i.join(r.fsPath,t);return o.existsSync(c)?u(t,2):t}},3848:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShellExecutionHelper=void 0;const n=r(4155),o=r(3403).loadMessageBundle(r(5622).join(__dirname,"tools/shellExecutionHelper.ts"));class i{constructor(e){this._outputChannel=e}async runStreamedCommand(e,t,r=[],a=3e5){const s=[];let c=e;r.forEach((e=>{c=c.replace(e,"***")})),this._outputChannel.appendLine(`    > ${c}`);const l={cwd:t&&t.workingDirectory,env:Object.assign({},process.env,t&&t.additionalEnvironmentVariables),encoding:"utf8",maxBuffer:10485760,shell:!0,detached:!1,windowsHide:!0,timeout:a};try{const t=n.spawn(e,[],l);return this._outputChannel.show(),t.on("exit",((e,t)=>{null!==e?this._outputChannel.appendLine(o(0,null,c,e)):this._outputChannel.appendLine(o(1,null,c,t))})),t.stdout.on("data",(e=>{s.push(e.toString()),i.outputDataChunk(this._outputChannel,e,o(2,null))})),t.stderr.on("data",(e=>{i.outputDataChunk(this._outputChannel,e,o(3,null))})),await t,s.join("")}catch(e){throw r.forEach((t=>{e.cmd=e.cmd?.replace(t,"***"),e.message=e.message?.replace(t,"***")})),e}}static outputDataChunk(e,t,r){t.toString().split(/\r?\n/).forEach((t=>{e&&e.appendLine(r+t)}))}}t.ShellExecutionHelper=i},8921:e=>{"use strict";e.exports=require("@opentelemetry/tracing")},6591:e=>{"use strict";e.exports=require("applicationinsights-native-metrics")},2357:e=>{"use strict";e.exports=require("assert")},7303:e=>{"use strict";e.exports=require("async_hooks")},3331:e=>{"use strict";e.exports=require("azdata")},3129:e=>{"use strict";e.exports=require("child_process")},7082:e=>{"use strict";e.exports=require("console")},7619:e=>{"use strict";e.exports=require("constants")},6417:e=>{"use strict";e.exports=require("crypto")},881:e=>{"use strict";e.exports=require("dns")},8614:e=>{"use strict";e.exports=require("events")},5747:e=>{"use strict";e.exports=require("fs")},8605:e=>{"use strict";e.exports=require("http")},7211:e=>{"use strict";e.exports=require("https")},2282:e=>{"use strict";e.exports=require("module")},1631:e=>{"use strict";e.exports=require("net")},2087:e=>{"use strict";e.exports=require("os")},5622:e=>{"use strict";e.exports=require("path")},2413:e=>{"use strict";e.exports=require("stream")},8213:e=>{"use strict";e.exports=require("timers")},8835:e=>{"use strict";e.exports=require("url")},1669:e=>{"use strict";e.exports=require("util")},7549:e=>{"use strict";e.exports=require("vscode")},8761:e=>{"use strict";e.exports=require("zlib")}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var n={};(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.deactivate=e.activate=void 0;const t=r(7549),o=r(1027),i=r(8018);let a=[];e.activate=function(e){t.commands.executeCommand("setContext","azdataAvailable",!!(0,o.getAzdataApi)());const r=new i.default(e);return a.push(r),e.subscriptions.push(r),r.activate()},e.deactivate=function(){for(let e of a)e.deactivate()}})();var o=exports;for(var i in n)o[i]=n[i];n.__esModule&&Object.defineProperty(o,"__esModule",{value:!0})})();
//# sourceMappingURL=https://sqlopsbuilds.blob.core.windows.net/sourcemaps/58d6b2226315dae80e427da8de2de9fd6d34ab21/extensions/sql-database-projects/dist/extension.js.map